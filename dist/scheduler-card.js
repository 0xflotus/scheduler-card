!function(e){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */function t(e,t,r,a){var i,s=arguments.length,n=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(n=(s<3?i(n):s>3?i(t,r,n):i(t,r))||n);return s>3&&n&&Object.defineProperty(t,r,n),n
/**
     * @license
     * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
     * This code may only be used under the BSD style license found at
     * http://polymer.github.io/LICENSE.txt
     * The complete set of authors may be found at
     * http://polymer.github.io/AUTHORS.txt
     * The complete set of contributors may be found at
     * http://polymer.github.io/CONTRIBUTORS.txt
     * Code distributed by Google as part of the polymer project is also
     * subject to an additional IP rights grant found at
     * http://polymer.github.io/PATENTS.txt
     */}const r="undefined"!=typeof window&&null!=window.customElements&&void 0!==window.customElements.polyfillWrapFlushCallback,a=(e,t,r=null)=>{for(;t!==r;){const r=t.nextSibling;e.removeChild(t),t=r}},i=`{{lit-${String(Math.random()).slice(2)}}}`,s=`\x3c!--${i}--\x3e`,n=new RegExp(`${i}|${s}`);class o{constructor(e,t){this.parts=[],this.element=t;const r=[],a=[],s=document.createTreeWalker(t.content,133,null,!1);let o=0,l=-1,h=0;const{strings:p,values:{length:f}}=e;for(;h<f;){const e=s.nextNode();if(null!==e){if(l++,1===e.nodeType){if(e.hasAttributes()){const t=e.attributes,{length:r}=t;let a=0;for(let e=0;e<r;e++)c(t[e].name,"$lit$")&&a++;for(;a-- >0;){const t=p[h],r=d.exec(t)[2],a=r.toLowerCase()+"$lit$",i=e.getAttribute(a);e.removeAttribute(a);const s=i.split(n);this.parts.push({type:"attribute",index:l,name:r,strings:s}),h+=s.length-1}}"TEMPLATE"===e.tagName&&(a.push(e),s.currentNode=e.content)}else if(3===e.nodeType){const t=e.data;if(t.indexOf(i)>=0){const a=e.parentNode,i=t.split(n),s=i.length-1;for(let t=0;t<s;t++){let r,s=i[t];if(""===s)r=u();else{const e=d.exec(s);null!==e&&c(e[2],"$lit$")&&(s=s.slice(0,e.index)+e[1]+e[2].slice(0,-"$lit$".length)+e[3]),r=document.createTextNode(s)}a.insertBefore(r,e),this.parts.push({type:"node",index:++l})}""===i[s]?(a.insertBefore(u(),e),r.push(e)):e.data=i[s],h+=s}}else if(8===e.nodeType)if(e.data===i){const t=e.parentNode;null!==e.previousSibling&&l!==o||(l++,t.insertBefore(u(),e)),o=l,this.parts.push({type:"node",index:l}),null===e.nextSibling?e.data="":(r.push(e),l--),h++}else{let t=-1;for(;-1!==(t=e.data.indexOf(i,t+1));)this.parts.push({type:"node",index:-1}),h++}}else s.currentNode=a.pop()}for(const e of r)e.parentNode.removeChild(e)}}const c=(e,t)=>{const r=e.length-t.length;return r>=0&&e.slice(r)===t},l=e=>-1!==e.index,u=()=>document.createComment(""),d=/([ \x09\x0a\x0c\x0d])([^\0-\x1F\x7F-\x9F "'>=/]+)([ \x09\x0a\x0c\x0d]*=[ \x09\x0a\x0c\x0d]*(?:[^ \x09\x0a\x0c\x0d"'`<>=]*|"[^"]*|'[^']*))$/;function h(e,t){const{element:{content:r},parts:a}=e,i=document.createTreeWalker(r,133,null,!1);let s=f(a),n=a[s],o=-1,c=0;const l=[];let u=null;for(;i.nextNode();){o++;const e=i.currentNode;for(e.previousSibling===u&&(u=null),t.has(e)&&(l.push(e),null===u&&(u=e)),null!==u&&c++;void 0!==n&&n.index===o;)n.index=null!==u?-1:n.index-c,s=f(a,s),n=a[s]}l.forEach(e=>e.parentNode.removeChild(e))}const p=e=>{let t=11===e.nodeType?0:1;const r=document.createTreeWalker(e,133,null,!1);for(;r.nextNode();)t++;return t},f=(e,t=-1)=>{for(let r=t+1;r<e.length;r++){const t=e[r];if(l(t))return r}return-1};
/**
     * @license
     * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
     * This code may only be used under the BSD style license found at
     * http://polymer.github.io/LICENSE.txt
     * The complete set of authors may be found at
     * http://polymer.github.io/AUTHORS.txt
     * The complete set of contributors may be found at
     * http://polymer.github.io/CONTRIBUTORS.txt
     * Code distributed by Google as part of the polymer project is also
     * subject to an additional IP rights grant found at
     * http://polymer.github.io/PATENTS.txt
     */
const m=new WeakMap,v=e=>"function"==typeof e&&m.has(e),y={},g={};
/**
     * @license
     * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
     * This code may only be used under the BSD style license found at
     * http://polymer.github.io/LICENSE.txt
     * The complete set of authors may be found at
     * http://polymer.github.io/AUTHORS.txt
     * The complete set of contributors may be found at
     * http://polymer.github.io/CONTRIBUTORS.txt
     * Code distributed by Google as part of the polymer project is also
     * subject to an additional IP rights grant found at
     * http://polymer.github.io/PATENTS.txt
     */
class b{constructor(e,t,r){this.__parts=[],this.template=e,this.processor=t,this.options=r}update(e){let t=0;for(const r of this.__parts)void 0!==r&&r.setValue(e[t]),t++;for(const e of this.__parts)void 0!==e&&e.commit()}_clone(){const e=r?this.template.element.content.cloneNode(!0):document.importNode(this.template.element.content,!0),t=[],a=this.template.parts,i=document.createTreeWalker(e,133,null,!1);let s,n=0,o=0,c=i.nextNode();for(;n<a.length;)if(s=a[n],l(s)){for(;o<s.index;)o++,"TEMPLATE"===c.nodeName&&(t.push(c),i.currentNode=c.content),null===(c=i.nextNode())&&(i.currentNode=t.pop(),c=i.nextNode());if("node"===s.type){const e=this.processor.handleTextExpression(this.options);e.insertAfterNode(c.previousSibling),this.__parts.push(e)}else this.__parts.push(...this.processor.handleAttributeExpressions(c,s.name,s.strings,this.options));n++}else this.__parts.push(void 0),n++;return r&&(document.adoptNode(e),customElements.upgrade(e)),e}}
/**
     * @license
     * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
     * This code may only be used under the BSD style license found at
     * http://polymer.github.io/LICENSE.txt
     * The complete set of authors may be found at
     * http://polymer.github.io/AUTHORS.txt
     * The complete set of contributors may be found at
     * http://polymer.github.io/CONTRIBUTORS.txt
     * Code distributed by Google as part of the polymer project is also
     * subject to an additional IP rights grant found at
     * http://polymer.github.io/PATENTS.txt
     */const _=window.trustedTypes&&trustedTypes.createPolicy("lit-html",{createHTML:e=>e}),w=` ${i} `;class P{constructor(e,t,r,a){this.strings=e,this.values=t,this.type=r,this.processor=a}getHTML(){const e=this.strings.length-1;let t="",r=!1;for(let a=0;a<e;a++){const e=this.strings[a],n=e.lastIndexOf("\x3c!--");r=(n>-1||r)&&-1===e.indexOf("--\x3e",n+1);const o=d.exec(e);t+=null===o?e+(r?w:s):e.substr(0,o.index)+o[1]+o[2]+"$lit$"+o[3]+i}return t+=this.strings[e],t}getTemplateElement(){const e=document.createElement("template");let t=this.getHTML();return void 0!==_&&(t=_.createHTML(t)),e.innerHTML=t,e}}
/**
     * @license
     * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
     * This code may only be used under the BSD style license found at
     * http://polymer.github.io/LICENSE.txt
     * The complete set of authors may be found at
     * http://polymer.github.io/AUTHORS.txt
     * The complete set of contributors may be found at
     * http://polymer.github.io/CONTRIBUTORS.txt
     * Code distributed by Google as part of the polymer project is also
     * subject to an additional IP rights grant found at
     * http://polymer.github.io/PATENTS.txt
     */const E=e=>null===e||!("object"==typeof e||"function"==typeof e),S=e=>Array.isArray(e)||!(!e||!e[Symbol.iterator]);class j{constructor(e,t,r){this.dirty=!0,this.element=e,this.name=t,this.strings=r,this.parts=[];for(let e=0;e<r.length-1;e++)this.parts[e]=this._createPart()}_createPart(){return new x(this)}_getValue(){const e=this.strings,t=e.length-1,r=this.parts;if(1===t&&""===e[0]&&""===e[1]){const e=r[0].value;if("symbol"==typeof e)return String(e);if("string"==typeof e||!S(e))return e}let a="";for(let i=0;i<t;i++){a+=e[i];const t=r[i];if(void 0!==t){const e=t.value;if(E(e)||!S(e))a+="string"==typeof e?e:String(e);else for(const t of e)a+="string"==typeof t?t:String(t)}}return a+=e[t],a}commit(){this.dirty&&(this.dirty=!1,this.element.setAttribute(this.name,this._getValue()))}}class x{constructor(e){this.value=void 0,this.committer=e}setValue(e){e===y||E(e)&&e===this.value||(this.value=e,v(e)||(this.committer.dirty=!0))}commit(){for(;v(this.value);){const e=this.value;this.value=y,e(this)}this.value!==y&&this.committer.commit()}}class ${constructor(e){this.value=void 0,this.__pendingValue=void 0,this.options=e}appendInto(e){this.startNode=e.appendChild(u()),this.endNode=e.appendChild(u())}insertAfterNode(e){this.startNode=e,this.endNode=e.nextSibling}appendIntoPart(e){e.__insert(this.startNode=u()),e.__insert(this.endNode=u())}insertAfterPart(e){e.__insert(this.startNode=u()),this.endNode=e.endNode,e.endNode=this.startNode}setValue(e){this.__pendingValue=e}commit(){if(null===this.startNode.parentNode)return;for(;v(this.__pendingValue);){const e=this.__pendingValue;this.__pendingValue=y,e(this)}const e=this.__pendingValue;e!==y&&(E(e)?e!==this.value&&this.__commitText(e):e instanceof P?this.__commitTemplateResult(e):e instanceof Node?this.__commitNode(e):S(e)?this.__commitIterable(e):e===g?(this.value=g,this.clear()):this.__commitText(e))}__insert(e){this.endNode.parentNode.insertBefore(e,this.endNode)}__commitNode(e){this.value!==e&&(this.clear(),this.__insert(e),this.value=e)}__commitText(e){const t=this.startNode.nextSibling,r="string"==typeof(e=null==e?"":e)?e:String(e);t===this.endNode.previousSibling&&3===t.nodeType?t.data=r:this.__commitNode(document.createTextNode(r)),this.value=e}__commitTemplateResult(e){const t=this.options.templateFactory(e);if(this.value instanceof b&&this.value.template===t)this.value.update(e.values);else{const r=new b(t,e.processor,this.options),a=r._clone();r.update(e.values),this.__commitNode(a),this.value=r}}__commitIterable(e){Array.isArray(this.value)||(this.value=[],this.clear());const t=this.value;let r,a=0;for(const i of e)r=t[a],void 0===r&&(r=new $(this.options),t.push(r),0===a?r.appendIntoPart(this):r.insertAfterPart(t[a-1])),r.setValue(i),r.commit(),a++;a<t.length&&(t.length=a,this.clear(r&&r.endNode))}clear(e=this.startNode){a(this.startNode.parentNode,e.nextSibling,this.endNode)}}class O{constructor(e,t,r){if(this.value=void 0,this.__pendingValue=void 0,2!==r.length||""!==r[0]||""!==r[1])throw new Error("Boolean attributes can only contain a single expression");this.element=e,this.name=t,this.strings=r}setValue(e){this.__pendingValue=e}commit(){for(;v(this.__pendingValue);){const e=this.__pendingValue;this.__pendingValue=y,e(this)}if(this.__pendingValue===y)return;const e=!!this.__pendingValue;this.value!==e&&(e?this.element.setAttribute(this.name,""):this.element.removeAttribute(this.name),this.value=e),this.__pendingValue=y}}class A extends j{constructor(e,t,r){super(e,t,r),this.single=2===r.length&&""===r[0]&&""===r[1]}_createPart(){return new k(this)}_getValue(){return this.single?this.parts[0].value:super._getValue()}commit(){this.dirty&&(this.dirty=!1,this.element[this.name]=this._getValue())}}class k extends x{}let F=!1;(()=>{try{const e={get capture(){return F=!0,!1}};window.addEventListener("test",e,e),window.removeEventListener("test",e,e)}catch(e){}})();class C{constructor(e,t,r){this.value=void 0,this.__pendingValue=void 0,this.element=e,this.eventName=t,this.eventContext=r,this.__boundHandleEvent=e=>this.handleEvent(e)}setValue(e){this.__pendingValue=e}commit(){for(;v(this.__pendingValue);){const e=this.__pendingValue;this.__pendingValue=y,e(this)}if(this.__pendingValue===y)return;const e=this.__pendingValue,t=this.value,r=null==e||null!=t&&(e.capture!==t.capture||e.once!==t.once||e.passive!==t.passive),a=null!=e&&(null==t||r);r&&this.element.removeEventListener(this.eventName,this.__boundHandleEvent,this.__options),a&&(this.__options=D(e),this.element.addEventListener(this.eventName,this.__boundHandleEvent,this.__options)),this.value=e,this.__pendingValue=y}handleEvent(e){"function"==typeof this.value?this.value.call(this.eventContext||this.element,e):this.value.handleEvent(e)}}const D=e=>e&&(F?{capture:e.capture,passive:e.passive,once:e.once}:e.capture)
/**
     * @license
     * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
     * This code may only be used under the BSD style license found at
     * http://polymer.github.io/LICENSE.txt
     * The complete set of authors may be found at
     * http://polymer.github.io/AUTHORS.txt
     * The complete set of contributors may be found at
     * http://polymer.github.io/CONTRIBUTORS.txt
     * Code distributed by Google as part of the polymer project is also
     * subject to an additional IP rights grant found at
     * http://polymer.github.io/PATENTS.txt
     */;function R(e){let t=I.get(e.type);void 0===t&&(t={stringsArray:new WeakMap,keyString:new Map},I.set(e.type,t));let r=t.stringsArray.get(e.strings);if(void 0!==r)return r;const a=e.strings.join(i);return r=t.keyString.get(a),void 0===r&&(r=new o(e,e.getTemplateElement()),t.keyString.set(a,r)),t.stringsArray.set(e.strings,r),r}const I=new Map,z=new WeakMap;
/**
     * @license
     * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
     * This code may only be used under the BSD style license found at
     * http://polymer.github.io/LICENSE.txt
     * The complete set of authors may be found at
     * http://polymer.github.io/AUTHORS.txt
     * The complete set of contributors may be found at
     * http://polymer.github.io/CONTRIBUTORS.txt
     * Code distributed by Google as part of the polymer project is also
     * subject to an additional IP rights grant found at
     * http://polymer.github.io/PATENTS.txt
     */const N=new
/**
     * @license
     * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
     * This code may only be used under the BSD style license found at
     * http://polymer.github.io/LICENSE.txt
     * The complete set of authors may be found at
     * http://polymer.github.io/AUTHORS.txt
     * The complete set of contributors may be found at
     * http://polymer.github.io/CONTRIBUTORS.txt
     * Code distributed by Google as part of the polymer project is also
     * subject to an additional IP rights grant found at
     * http://polymer.github.io/PATENTS.txt
     */
class{handleAttributeExpressions(e,t,r,a){const i=t[0];if("."===i){return new A(e,t.slice(1),r).parts}if("@"===i)return[new C(e,t.slice(1),a.eventContext)];if("?"===i)return[new O(e,t.slice(1),r)];return new j(e,t,r).parts}handleTextExpression(e){return new $(e)}};
/**
     * @license
     * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
     * This code may only be used under the BSD style license found at
     * http://polymer.github.io/LICENSE.txt
     * The complete set of authors may be found at
     * http://polymer.github.io/AUTHORS.txt
     * The complete set of contributors may be found at
     * http://polymer.github.io/CONTRIBUTORS.txt
     * Code distributed by Google as part of the polymer project is also
     * subject to an additional IP rights grant found at
     * http://polymer.github.io/PATENTS.txt
     */"undefined"!=typeof window&&(window.litHtmlVersions||(window.litHtmlVersions=[])).push("1.3.0");const T=(e,...t)=>new P(e,t,"html",N)
/**
     * @license
     * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
     * This code may only be used under the BSD style license found at
     * http://polymer.github.io/LICENSE.txt
     * The complete set of authors may be found at
     * http://polymer.github.io/AUTHORS.txt
     * The complete set of contributors may be found at
     * http://polymer.github.io/CONTRIBUTORS.txt
     * Code distributed by Google as part of the polymer project is also
     * subject to an additional IP rights grant found at
     * http://polymer.github.io/PATENTS.txt
     */,L=(e,t)=>`${e}--${t}`;let U=!0;void 0===window.ShadyCSS?U=!1:void 0===window.ShadyCSS.prepareTemplateDom&&(console.warn("Incompatible ShadyCSS version detected. Please update to at least @webcomponents/webcomponentsjs@2.0.2 and @webcomponents/shadycss@1.3.1."),U=!1);const q=e=>t=>{const r=L(t.type,e);let a=I.get(r);void 0===a&&(a={stringsArray:new WeakMap,keyString:new Map},I.set(r,a));let s=a.stringsArray.get(t.strings);if(void 0!==s)return s;const n=t.strings.join(i);if(s=a.keyString.get(n),void 0===s){const r=t.getTemplateElement();U&&window.ShadyCSS.prepareTemplateDom(r,e),s=new o(t,r),a.keyString.set(n,s)}return a.stringsArray.set(t.strings,s),s},V=["html","svg"],M=new Set,H=(e,t,r)=>{M.add(e);const a=r?r.element:document.createElement("template"),i=t.querySelectorAll("style"),{length:s}=i;if(0===s)return void window.ShadyCSS.prepareTemplateStyles(a,e);const n=document.createElement("style");for(let e=0;e<s;e++){const t=i[e];t.parentNode.removeChild(t),n.textContent+=t.textContent}(e=>{V.forEach(t=>{const r=I.get(L(t,e));void 0!==r&&r.keyString.forEach(e=>{const{element:{content:t}}=e,r=new Set;Array.from(t.querySelectorAll("style")).forEach(e=>{r.add(e)}),h(e,r)})})})(e);const o=a.content;r?function(e,t,r=null){const{element:{content:a},parts:i}=e;if(null==r)return void a.appendChild(t);const s=document.createTreeWalker(a,133,null,!1);let n=f(i),o=0,c=-1;for(;s.nextNode();){c++;for(s.currentNode===r&&(o=p(t),r.parentNode.insertBefore(t,r));-1!==n&&i[n].index===c;){if(o>0){for(;-1!==n;)i[n].index+=o,n=f(i,n);return}n=f(i,n)}}}(r,n,o.firstChild):o.insertBefore(n,o.firstChild),window.ShadyCSS.prepareTemplateStyles(a,e);const c=o.querySelector("style");if(window.ShadyCSS.nativeShadow&&null!==c)t.insertBefore(c.cloneNode(!0),t.firstChild);else if(r){o.insertBefore(n,o.firstChild);const e=new Set;e.add(n),h(r,e)}};window.JSCompiler_renameProperty=(e,t)=>e;const Q={toAttribute(e,t){switch(t){case Boolean:return e?"":null;case Object:case Array:return null==e?e:JSON.stringify(e)}return e},fromAttribute(e,t){switch(t){case Boolean:return null!==e;case Number:return null===e?null:Number(e);case Object:case Array:return JSON.parse(e)}return e}},B=(e,t)=>t!==e&&(t==t||e==e),G={attribute:!0,type:String,converter:Q,reflect:!1,hasChanged:B};class K extends HTMLElement{constructor(){super(),this.initialize()}static get observedAttributes(){this.finalize();const e=[];return this._classProperties.forEach((t,r)=>{const a=this._attributeNameForProperty(r,t);void 0!==a&&(this._attributeToPropertyMap.set(a,r),e.push(a))}),e}static _ensureClassProperties(){if(!this.hasOwnProperty(JSCompiler_renameProperty("_classProperties",this))){this._classProperties=new Map;const e=Object.getPrototypeOf(this)._classProperties;void 0!==e&&e.forEach((e,t)=>this._classProperties.set(t,e))}}static createProperty(e,t=G){if(this._ensureClassProperties(),this._classProperties.set(e,t),t.noAccessor||this.prototype.hasOwnProperty(e))return;const r="symbol"==typeof e?Symbol():"__"+e,a=this.getPropertyDescriptor(e,r,t);void 0!==a&&Object.defineProperty(this.prototype,e,a)}static getPropertyDescriptor(e,t,r){return{get(){return this[t]},set(a){const i=this[e];this[t]=a,this.requestUpdateInternal(e,i,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this._classProperties&&this._classProperties.get(e)||G}static finalize(){const e=Object.getPrototypeOf(this);if(e.hasOwnProperty("finalized")||e.finalize(),this.finalized=!0,this._ensureClassProperties(),this._attributeToPropertyMap=new Map,this.hasOwnProperty(JSCompiler_renameProperty("properties",this))){const e=this.properties,t=[...Object.getOwnPropertyNames(e),..."function"==typeof Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e):[]];for(const r of t)this.createProperty(r,e[r])}}static _attributeNameForProperty(e,t){const r=t.attribute;return!1===r?void 0:"string"==typeof r?r:"string"==typeof e?e.toLowerCase():void 0}static _valueHasChanged(e,t,r=B){return r(e,t)}static _propertyValueFromAttribute(e,t){const r=t.type,a=t.converter||Q,i="function"==typeof a?a:a.fromAttribute;return i?i(e,r):e}static _propertyValueToAttribute(e,t){if(void 0===t.reflect)return;const r=t.type,a=t.converter;return(a&&a.toAttribute||Q.toAttribute)(e,r)}initialize(){this._updateState=0,this._updatePromise=new Promise(e=>this._enableUpdatingResolver=e),this._changedProperties=new Map,this._saveInstanceProperties(),this.requestUpdateInternal()}_saveInstanceProperties(){this.constructor._classProperties.forEach((e,t)=>{if(this.hasOwnProperty(t)){const e=this[t];delete this[t],this._instanceProperties||(this._instanceProperties=new Map),this._instanceProperties.set(t,e)}})}_applyInstanceProperties(){this._instanceProperties.forEach((e,t)=>this[t]=e),this._instanceProperties=void 0}connectedCallback(){this.enableUpdating()}enableUpdating(){void 0!==this._enableUpdatingResolver&&(this._enableUpdatingResolver(),this._enableUpdatingResolver=void 0)}disconnectedCallback(){}attributeChangedCallback(e,t,r){t!==r&&this._attributeToProperty(e,r)}_propertyToAttribute(e,t,r=G){const a=this.constructor,i=a._attributeNameForProperty(e,r);if(void 0!==i){const e=a._propertyValueToAttribute(t,r);if(void 0===e)return;this._updateState=8|this._updateState,null==e?this.removeAttribute(i):this.setAttribute(i,e),this._updateState=-9&this._updateState}}_attributeToProperty(e,t){if(8&this._updateState)return;const r=this.constructor,a=r._attributeToPropertyMap.get(e);if(void 0!==a){const e=r.getPropertyOptions(a);this._updateState=16|this._updateState,this[a]=r._propertyValueFromAttribute(t,e),this._updateState=-17&this._updateState}}requestUpdateInternal(e,t,r){let a=!0;if(void 0!==e){const i=this.constructor;r=r||i.getPropertyOptions(e),i._valueHasChanged(this[e],t,r.hasChanged)?(this._changedProperties.has(e)||this._changedProperties.set(e,t),!0!==r.reflect||16&this._updateState||(void 0===this._reflectingProperties&&(this._reflectingProperties=new Map),this._reflectingProperties.set(e,r))):a=!1}!this._hasRequestedUpdate&&a&&(this._updatePromise=this._enqueueUpdate())}requestUpdate(e,t){return this.requestUpdateInternal(e,t),this.updateComplete}async _enqueueUpdate(){this._updateState=4|this._updateState;try{await this._updatePromise}catch(e){}const e=this.performUpdate();return null!=e&&await e,!this._hasRequestedUpdate}get _hasRequestedUpdate(){return 4&this._updateState}get hasUpdated(){return 1&this._updateState}performUpdate(){if(!this._hasRequestedUpdate)return;this._instanceProperties&&this._applyInstanceProperties();let e=!1;const t=this._changedProperties;try{e=this.shouldUpdate(t),e?this.update(t):this._markUpdated()}catch(t){throw e=!1,this._markUpdated(),t}e&&(1&this._updateState||(this._updateState=1|this._updateState,this.firstUpdated(t)),this.updated(t))}_markUpdated(){this._changedProperties=new Map,this._updateState=-5&this._updateState}get updateComplete(){return this._getUpdateComplete()}_getUpdateComplete(){return this._updatePromise}shouldUpdate(e){return!0}update(e){void 0!==this._reflectingProperties&&this._reflectingProperties.size>0&&(this._reflectingProperties.forEach((e,t)=>this._propertyToAttribute(t,this[t],e)),this._reflectingProperties=void 0),this._markUpdated()}updated(e){}firstUpdated(e){}}K.finalized=!0;
/**
     * @license
     * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
     * This code may only be used under the BSD style license found at
     * http://polymer.github.io/LICENSE.txt
     * The complete set of authors may be found at
     * http://polymer.github.io/AUTHORS.txt
     * The complete set of contributors may be found at
     * http://polymer.github.io/CONTRIBUTORS.txt
     * Code distributed by Google as part of the polymer project is also
     * subject to an additional IP rights grant found at
     * http://polymer.github.io/PATENTS.txt
     */
const J=(e,t)=>"method"===t.kind&&t.descriptor&&!("value"in t.descriptor)?Object.assign(Object.assign({},t),{finisher(r){r.createProperty(t.key,e)}}):{kind:"field",key:Symbol(),placement:"own",descriptor:{},initializer(){"function"==typeof t.initializer&&(this[t.key]=t.initializer.call(this))},finisher(r){r.createProperty(t.key,e)}};
/**
    @license
    Copyright (c) 2019 The Polymer Project Authors. All rights reserved.
    This code may only be used under the BSD style license found at
    http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
    http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
    found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
    part of the polymer project is also subject to an additional IP rights grant
    found at http://polymer.github.io/PATENTS.txt
    */
const W=window.ShadowRoot&&(void 0===window.ShadyCSS||window.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,Z=Symbol();class Y{constructor(e,t){if(t!==Z)throw new Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e}get styleSheet(){return void 0===this._styleSheet&&(W?(this._styleSheet=new CSSStyleSheet,this._styleSheet.replaceSync(this.cssText)):this._styleSheet=null),this._styleSheet}toString(){return this.cssText}}
/**
     * @license
     * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
     * This code may only be used under the BSD style license found at
     * http://polymer.github.io/LICENSE.txt
     * The complete set of authors may be found at
     * http://polymer.github.io/AUTHORS.txt
     * The complete set of contributors may be found at
     * http://polymer.github.io/CONTRIBUTORS.txt
     * Code distributed by Google as part of the polymer project is also
     * subject to an additional IP rights grant found at
     * http://polymer.github.io/PATENTS.txt
     */
(window.litElementVersions||(window.litElementVersions=[])).push("2.4.0");const X={};class ee extends K{static getStyles(){return this.styles}static _getUniqueStyles(){if(this.hasOwnProperty(JSCompiler_renameProperty("_styles",this)))return;const e=this.getStyles();if(Array.isArray(e)){const t=(e,r)=>e.reduceRight((e,r)=>Array.isArray(r)?t(r,e):(e.add(r),e),r),r=t(e,new Set),a=[];r.forEach(e=>a.unshift(e)),this._styles=a}else this._styles=void 0===e?[]:[e];this._styles=this._styles.map(e=>{if(e instanceof CSSStyleSheet&&!W){const t=Array.prototype.slice.call(e.cssRules).reduce((e,t)=>e+t.cssText,"");return new Y(String(t),Z)}return e})}initialize(){super.initialize(),this.constructor._getUniqueStyles(),this.renderRoot=this.createRenderRoot(),window.ShadowRoot&&this.renderRoot instanceof window.ShadowRoot&&this.adoptStyles()}createRenderRoot(){return this.attachShadow({mode:"open"})}adoptStyles(){const e=this.constructor._styles;0!==e.length&&(void 0===window.ShadyCSS||window.ShadyCSS.nativeShadow?W?this.renderRoot.adoptedStyleSheets=e.map(e=>e instanceof CSSStyleSheet?e:e.styleSheet):this._needsShimAdoptedStyleSheets=!0:window.ShadyCSS.ScopingShim.prepareAdoptedCssText(e.map(e=>e.cssText),this.localName))}connectedCallback(){super.connectedCallback(),this.hasUpdated&&void 0!==window.ShadyCSS&&window.ShadyCSS.styleElement(this)}update(e){const t=this.render();super.update(e),t!==X&&this.constructor.render(t,this.renderRoot,{scopeName:this.localName,eventContext:this}),this._needsShimAdoptedStyleSheets&&(this._needsShimAdoptedStyleSheets=!1,this.constructor._styles.forEach(e=>{const t=document.createElement("style");t.textContent=e.cssText,this.renderRoot.appendChild(t)}))}render(){return X}}ee.finalized=!0,ee.render=(e,t,r)=>{if(!r||"object"!=typeof r||!r.scopeName)throw new Error("The `scopeName` option is required.");const i=r.scopeName,s=z.has(t),n=U&&11===t.nodeType&&!!t.host,o=n&&!M.has(i),c=o?document.createDocumentFragment():t;if(((e,t,r)=>{let i=z.get(t);void 0===i&&(a(t,t.firstChild),z.set(t,i=new $(Object.assign({templateFactory:R},r))),i.appendInto(t)),i.setValue(e),i.commit()})(e,c,Object.assign({templateFactory:q(i)},r)),o){const e=z.get(c);z.delete(c);const r=e.value instanceof b?e.value.template:void 0;H(i,c,r),a(t,t.firstChild),t.appendChild(c),z.set(t,e)}!s&&n&&window.ShadyCSS.styleElement(t.host)};var te="object"==typeof global&&global&&global.Object===Object&&global,re="object"==typeof self&&self&&self.Object===Object&&self,ae=te||re||Function("return this")(),ie=ae.Symbol,se=Object.prototype,ne=se.hasOwnProperty,oe=se.toString,ce=ie?ie.toStringTag:void 0;var le=Object.prototype.toString;var ue=ie?ie.toStringTag:void 0;function de(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":ue&&ue in Object(e)?function(e){var t=ne.call(e,ce),r=e[ce];try{e[ce]=void 0;var a=!0}catch(e){}var i=oe.call(e);return a&&(t?e[ce]=r:delete e[ce]),i}(e):function(e){return le.call(e)}(e)}function he(e){return null!=e&&"object"==typeof e}function pe(e){return"symbol"==typeof e||he(e)&&"[object Symbol]"==de(e)}function fe(e,t){for(var r=-1,a=null==e?0:e.length,i=Array(a);++r<a;)i[r]=t(e[r],r,e);return i}var me=Array.isArray,ve=ie?ie.prototype:void 0,ye=ve?ve.toString:void 0;function ge(e){if("string"==typeof e)return e;if(me(e))return fe(e,ge)+"";if(pe(e))return ye?ye.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function be(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}var _e=/^\s+|\s+$/g,we=/^[-+]0x[0-9a-f]+$/i,Pe=/^0b[01]+$/i,Ee=/^0o[0-7]+$/i,Se=parseInt;function je(e){return e?(e=function(e){if("number"==typeof e)return e;if(pe(e))return NaN;if(be(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=be(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(_e,"");var r=Pe.test(e);return r||Ee.test(e)?Se(e.slice(2),r?2:8):we.test(e)?NaN:+e}(e))===1/0||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function xe(e){return e}function $e(e){if(!be(e))return!1;var t=de(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}var Oe,Ae=ae["__core-js_shared__"],ke=(Oe=/[^.]+$/.exec(Ae&&Ae.keys&&Ae.keys.IE_PROTO||""))?"Symbol(src)_1."+Oe:"";var Fe=Function.prototype.toString;function Ce(e){if(null!=e){try{return Fe.call(e)}catch(e){}try{return e+""}catch(e){}}return""}var De=/^\[object .+?Constructor\]$/,Re=Function.prototype,Ie=Object.prototype,ze=Re.toString,Ne=Ie.hasOwnProperty,Te=RegExp("^"+ze.call(Ne).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Le(e){return!(!be(e)||(t=e,ke&&ke in t))&&($e(e)?Te:De).test(Ce(e));var t}function Ue(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return Le(r)?r:void 0}var qe=Ue(ae,"WeakMap"),Ve=Object.create,Me=function(){function e(){}return function(t){if(!be(t))return{};if(Ve)return Ve(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();function He(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function Qe(e,t){var r=-1,a=e.length;for(t||(t=Array(a));++r<a;)t[r]=e[r];return t}var Be=Date.now;var Ge,Ke,Je,We=function(){try{var e=Ue(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),Ze=(Ge=We?function(e,t){return We(e,"toString",{configurable:!0,enumerable:!1,value:(r=t,function(){return r}),writable:!0});var r}:xe,Ke=0,Je=0,function(){var e=Be(),t=16-(e-Je);if(Je=e,t>0){if(++Ke>=800)return arguments[0]}else Ke=0;return Ge.apply(void 0,arguments)});function Ye(e,t){for(var r=-1,a=null==e?0:e.length;++r<a&&!1!==t(e[r],r,e););return e}function Xe(e,t,r,a){for(var i=e.length,s=r+(a?1:-1);a?s--:++s<i;)if(t(e[s],s,e))return s;return-1}function et(e){return e!=e}function tt(e,t,r){return t==t?function(e,t,r){for(var a=r-1,i=e.length;++a<i;)if(e[a]===t)return a;return-1}(e,t,r):Xe(e,et,r)}var rt=/^(?:0|[1-9]\d*)$/;function at(e,t){var r=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==r||"symbol"!=r&&rt.test(e))&&e>-1&&e%1==0&&e<t}function it(e,t,r){"__proto__"==t&&We?We(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function st(e,t){return e===t||e!=e&&t!=t}var nt=Object.prototype.hasOwnProperty;function ot(e,t,r){var a=e[t];nt.call(e,t)&&st(a,r)&&(void 0!==r||t in e)||it(e,t,r)}function ct(e,t,r,a){var i=!r;r||(r={});for(var s=-1,n=t.length;++s<n;){var o=t[s],c=a?a(r[o],e[o],o,r,e):void 0;void 0===c&&(c=e[o]),i?it(r,o,c):ot(r,o,c)}return r}var lt=Math.max;function ut(e,t,r){return t=lt(void 0===t?e.length-1:t,0),function(){for(var a=arguments,i=-1,s=lt(a.length-t,0),n=Array(s);++i<s;)n[i]=a[t+i];i=-1;for(var o=Array(t+1);++i<t;)o[i]=a[i];return o[t]=r(n),He(e,this,o)}}function dt(e,t){return Ze(ut(e,t,xe),e+"")}function ht(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}function pt(e){return null!=e&&ht(e.length)&&!$e(e)}function ft(e,t,r){if(!be(r))return!1;var a=typeof t;return!!("number"==a?pt(r)&&at(t,r.length):"string"==a&&t in r)&&st(r[t],e)}var mt=Object.prototype;function vt(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||mt)}function yt(e){return he(e)&&"[object Arguments]"==de(e)}var gt=Object.prototype,bt=gt.hasOwnProperty,_t=gt.propertyIsEnumerable,wt=yt(function(){return arguments}())?yt:function(e){return he(e)&&bt.call(e,"callee")&&!_t.call(e,"callee")};var Pt="object"==typeof e&&e&&!e.nodeType&&e,Et=Pt&&"object"==typeof module&&module&&!module.nodeType&&module,St=Et&&Et.exports===Pt?ae.Buffer:void 0,jt=(St?St.isBuffer:void 0)||function(){return!1},xt={};function $t(e){return function(t){return e(t)}}xt["[object Float32Array]"]=xt["[object Float64Array]"]=xt["[object Int8Array]"]=xt["[object Int16Array]"]=xt["[object Int32Array]"]=xt["[object Uint8Array]"]=xt["[object Uint8ClampedArray]"]=xt["[object Uint16Array]"]=xt["[object Uint32Array]"]=!0,xt["[object Arguments]"]=xt["[object Array]"]=xt["[object ArrayBuffer]"]=xt["[object Boolean]"]=xt["[object DataView]"]=xt["[object Date]"]=xt["[object Error]"]=xt["[object Function]"]=xt["[object Map]"]=xt["[object Number]"]=xt["[object Object]"]=xt["[object RegExp]"]=xt["[object Set]"]=xt["[object String]"]=xt["[object WeakMap]"]=!1;var Ot="object"==typeof e&&e&&!e.nodeType&&e,At=Ot&&"object"==typeof module&&module&&!module.nodeType&&module,kt=At&&At.exports===Ot&&te.process,Ft=function(){try{var e=At&&At.require&&At.require("util").types;return e||kt&&kt.binding&&kt.binding("util")}catch(e){}}(),Ct=Ft&&Ft.isTypedArray,Dt=Ct?$t(Ct):function(e){return he(e)&&ht(e.length)&&!!xt[de(e)]},Rt=Object.prototype.hasOwnProperty;function It(e,t){var r=me(e),a=!r&&wt(e),i=!r&&!a&&jt(e),s=!r&&!a&&!i&&Dt(e),n=r||a||i||s,o=n?function(e,t){for(var r=-1,a=Array(e);++r<e;)a[r]=t(r);return a}(e.length,String):[],c=o.length;for(var l in e)!t&&!Rt.call(e,l)||n&&("length"==l||i&&("offset"==l||"parent"==l)||s&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||at(l,c))||o.push(l);return o}function zt(e,t){return function(r){return e(t(r))}}var Nt=zt(Object.keys,Object),Tt=Object.prototype.hasOwnProperty;function Lt(e){if(!vt(e))return Nt(e);var t=[];for(var r in Object(e))Tt.call(e,r)&&"constructor"!=r&&t.push(r);return t}function Ut(e){return pt(e)?It(e):Lt(e)}var qt=Object.prototype.hasOwnProperty;function Vt(e){if(!be(e))return function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}(e);var t=vt(e),r=[];for(var a in e)("constructor"!=a||!t&&qt.call(e,a))&&r.push(a);return r}function Mt(e){return pt(e)?It(e,!0):Vt(e)}var Ht,Qt=(Ht=function(e,t){ct(t,Mt(t),e)},dt((function(e,t){var r=-1,a=t.length,i=a>1?t[a-1]:void 0,s=a>2?t[2]:void 0;for(i=Ht.length>3&&"function"==typeof i?(a--,i):void 0,s&&ft(t[0],t[1],s)&&(i=a<3?void 0:i,a=1),e=Object(e);++r<a;){var n=t[r];n&&Ht(e,n,r,i)}return e}))),Bt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Gt=/^\w*$/;function Kt(e,t){if(me(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!pe(e))||(Gt.test(e)||!Bt.test(e)||null!=t&&e in Object(t))}var Jt=Ue(Object,"create");var Wt=Object.prototype.hasOwnProperty;var Zt=Object.prototype.hasOwnProperty;function Yt(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var a=e[t];this.set(a[0],a[1])}}function Xt(e,t){for(var r=e.length;r--;)if(st(e[r][0],t))return r;return-1}Yt.prototype.clear=function(){this.__data__=Jt?Jt(null):{},this.size=0},Yt.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Yt.prototype.get=function(e){var t=this.__data__;if(Jt){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return Wt.call(t,e)?t[e]:void 0},Yt.prototype.has=function(e){var t=this.__data__;return Jt?void 0!==t[e]:Zt.call(t,e)},Yt.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Jt&&void 0===t?"__lodash_hash_undefined__":t,this};var er=Array.prototype.splice;function tr(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var a=e[t];this.set(a[0],a[1])}}tr.prototype.clear=function(){this.__data__=[],this.size=0},tr.prototype.delete=function(e){var t=this.__data__,r=Xt(t,e);return!(r<0)&&(r==t.length-1?t.pop():er.call(t,r,1),--this.size,!0)},tr.prototype.get=function(e){var t=this.__data__,r=Xt(t,e);return r<0?void 0:t[r][1]},tr.prototype.has=function(e){return Xt(this.__data__,e)>-1},tr.prototype.set=function(e,t){var r=this.__data__,a=Xt(r,e);return a<0?(++this.size,r.push([e,t])):r[a][1]=t,this};var rr=Ue(ae,"Map");function ar(e,t){var r=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?r["string"==typeof t?"string":"hash"]:r.map}function ir(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var a=e[t];this.set(a[0],a[1])}}ir.prototype.clear=function(){this.size=0,this.__data__={hash:new Yt,map:new(rr||tr),string:new Yt}},ir.prototype.delete=function(e){var t=ar(this,e).delete(e);return this.size-=t?1:0,t},ir.prototype.get=function(e){return ar(this,e).get(e)},ir.prototype.has=function(e){return ar(this,e).has(e)},ir.prototype.set=function(e,t){var r=ar(this,e),a=r.size;return r.set(e,t),this.size+=r.size==a?0:1,this};function sr(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var r=function(){var a=arguments,i=t?t.apply(this,a):a[0],s=r.cache;if(s.has(i))return s.get(i);var n=e.apply(this,a);return r.cache=s.set(i,n)||s,n};return r.cache=new(sr.Cache||ir),r}sr.Cache=ir;var nr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,or=/\\(\\)?/g,cr=function(e){var t=sr(e,(function(e){return 500===r.size&&r.clear(),e})),r=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(nr,(function(e,r,a,i){t.push(a?i.replace(or,"$1"):r||e)})),t}));function lr(e,t){return me(e)?e:Kt(e,t)?[e]:cr(function(e){return null==e?"":ge(e)}(e))}function ur(e){if("string"==typeof e||pe(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function dr(e,t){for(var r=0,a=(t=lr(t,e)).length;null!=e&&r<a;)e=e[ur(t[r++])];return r&&r==a?e:void 0}function hr(e,t){for(var r=-1,a=t.length,i=e.length;++r<a;)e[i+r]=t[r];return e}var pr=ie?ie.isConcatSpreadable:void 0;function fr(e){return me(e)||wt(e)||!!(pr&&e&&e[pr])}function mr(e,t,r,a,i){var s=-1,n=e.length;for(r||(r=fr),i||(i=[]);++s<n;){var o=e[s];t>0&&r(o)?t>1?mr(o,t-1,r,a,i):hr(i,o):a||(i[i.length]=o)}return i}function vr(e){return(null==e?0:e.length)?mr(e,1):[]}function yr(e){return Ze(ut(e,void 0,vr),e+"")}var gr=zt(Object.getPrototypeOf,Object),br=Function.prototype,_r=Object.prototype,wr=br.toString,Pr=_r.hasOwnProperty,Er=wr.call(Object);function Sr(e){var t=this.__data__=new tr(e);this.size=t.size}Sr.prototype.clear=function(){this.__data__=new tr,this.size=0},Sr.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},Sr.prototype.get=function(e){return this.__data__.get(e)},Sr.prototype.has=function(e){return this.__data__.has(e)},Sr.prototype.set=function(e,t){var r=this.__data__;if(r instanceof tr){var a=r.__data__;if(!rr||a.length<199)return a.push([e,t]),this.size=++r.size,this;r=this.__data__=new ir(a)}return r.set(e,t),this.size=r.size,this};var jr="object"==typeof e&&e&&!e.nodeType&&e,xr=jr&&"object"==typeof module&&module&&!module.nodeType&&module,$r=xr&&xr.exports===jr?ae.Buffer:void 0,Or=$r?$r.allocUnsafe:void 0;function Ar(e,t){for(var r=-1,a=null==e?0:e.length,i=0,s=[];++r<a;){var n=e[r];t(n,r,e)&&(s[i++]=n)}return s}function kr(){return[]}var Fr=Object.prototype.propertyIsEnumerable,Cr=Object.getOwnPropertySymbols,Dr=Cr?function(e){return null==e?[]:(e=Object(e),Ar(Cr(e),(function(t){return Fr.call(e,t)})))}:kr;var Rr=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)hr(t,Dr(e)),e=gr(e);return t}:kr;function Ir(e,t,r){var a=t(e);return me(e)?a:hr(a,r(e))}function zr(e){return Ir(e,Ut,Dr)}function Nr(e){return Ir(e,Mt,Rr)}var Tr=Ue(ae,"DataView"),Lr=Ue(ae,"Promise"),Ur=Ue(ae,"Set"),qr=Ce(Tr),Vr=Ce(rr),Mr=Ce(Lr),Hr=Ce(Ur),Qr=Ce(qe),Br=de;(Tr&&"[object DataView]"!=Br(new Tr(new ArrayBuffer(1)))||rr&&"[object Map]"!=Br(new rr)||Lr&&"[object Promise]"!=Br(Lr.resolve())||Ur&&"[object Set]"!=Br(new Ur)||qe&&"[object WeakMap]"!=Br(new qe))&&(Br=function(e){var t=de(e),r="[object Object]"==t?e.constructor:void 0,a=r?Ce(r):"";if(a)switch(a){case qr:return"[object DataView]";case Vr:return"[object Map]";case Mr:return"[object Promise]";case Hr:return"[object Set]";case Qr:return"[object WeakMap]"}return t});var Gr=Br,Kr=Object.prototype.hasOwnProperty;var Jr=ae.Uint8Array;function Wr(e){var t=new e.constructor(e.byteLength);return new Jr(t).set(new Jr(e)),t}var Zr=/\w*$/;var Yr=ie?ie.prototype:void 0,Xr=Yr?Yr.valueOf:void 0;function ea(e,t,r){var a,i,s,n=e.constructor;switch(t){case"[object ArrayBuffer]":return Wr(e);case"[object Boolean]":case"[object Date]":return new n(+e);case"[object DataView]":return function(e,t){var r=t?Wr(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}(e,r);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return function(e,t){var r=t?Wr(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}(e,r);case"[object Map]":return new n;case"[object Number]":case"[object String]":return new n(e);case"[object RegExp]":return(s=new(i=e).constructor(i.source,Zr.exec(i))).lastIndex=i.lastIndex,s;case"[object Set]":return new n;case"[object Symbol]":return a=e,Xr?Object(Xr.call(a)):{}}}var ta=Ft&&Ft.isMap,ra=ta?$t(ta):function(e){return he(e)&&"[object Map]"==Gr(e)};var aa=Ft&&Ft.isSet,ia=aa?$t(aa):function(e){return he(e)&&"[object Set]"==Gr(e)},sa={};function na(e,t,r,a,i,s){var n,o=1&t,c=2&t,l=4&t;if(r&&(n=i?r(e,a,i,s):r(e)),void 0!==n)return n;if(!be(e))return e;var u=me(e);if(u){if(n=function(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&Kr.call(e,"index")&&(r.index=e.index,r.input=e.input),r}(e),!o)return Qe(e,n)}else{var d=Gr(e),h="[object Function]"==d||"[object GeneratorFunction]"==d;if(jt(e))return function(e,t){if(t)return e.slice();var r=e.length,a=Or?Or(r):new e.constructor(r);return e.copy(a),a}(e,o);if("[object Object]"==d||"[object Arguments]"==d||h&&!i){if(n=c||h?{}:function(e){return"function"!=typeof e.constructor||vt(e)?{}:Me(gr(e))}(e),!o)return c?function(e,t){return ct(e,Rr(e),t)}(e,function(e,t){return e&&ct(t,Mt(t),e)}(n,e)):function(e,t){return ct(e,Dr(e),t)}(e,function(e,t){return e&&ct(t,Ut(t),e)}(n,e))}else{if(!sa[d])return i?e:{};n=ea(e,d,o)}}s||(s=new Sr);var p=s.get(e);if(p)return p;s.set(e,n),ia(e)?e.forEach((function(a){n.add(na(a,t,r,a,e,s))})):ra(e)&&e.forEach((function(a,i){n.set(i,na(a,t,r,i,e,s))}));var f=l?c?Nr:zr:c?keysIn:Ut,m=u?void 0:f(e);return Ye(m||e,(function(a,i){m&&(a=e[i=a]),ot(n,i,na(a,t,r,i,e,s))})),n}sa["[object Arguments]"]=sa["[object Array]"]=sa["[object ArrayBuffer]"]=sa["[object DataView]"]=sa["[object Boolean]"]=sa["[object Date]"]=sa["[object Float32Array]"]=sa["[object Float64Array]"]=sa["[object Int8Array]"]=sa["[object Int16Array]"]=sa["[object Int32Array]"]=sa["[object Map]"]=sa["[object Number]"]=sa["[object Object]"]=sa["[object RegExp]"]=sa["[object Set]"]=sa["[object String]"]=sa["[object Symbol]"]=sa["[object Uint8Array]"]=sa["[object Uint8ClampedArray]"]=sa["[object Uint16Array]"]=sa["[object Uint32Array]"]=!0,sa["[object Error]"]=sa["[object Function]"]=sa["[object WeakMap]"]=!1;function oa(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new ir;++t<r;)this.add(e[t])}function ca(e,t){for(var r=-1,a=null==e?0:e.length;++r<a;)if(t(e[r],r,e))return!0;return!1}function la(e,t){return e.has(t)}oa.prototype.add=oa.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},oa.prototype.has=function(e){return this.__data__.has(e)};function ua(e,t,r,a,i,s){var n=1&r,o=e.length,c=t.length;if(o!=c&&!(n&&c>o))return!1;var l=s.get(e);if(l&&s.get(t))return l==t;var u=-1,d=!0,h=2&r?new oa:void 0;for(s.set(e,t),s.set(t,e);++u<o;){var p=e[u],f=t[u];if(a)var m=n?a(f,p,u,t,e,s):a(p,f,u,e,t,s);if(void 0!==m){if(m)continue;d=!1;break}if(h){if(!ca(t,(function(e,t){if(!la(h,t)&&(p===e||i(p,e,r,a,s)))return h.push(t)}))){d=!1;break}}else if(p!==f&&!i(p,f,r,a,s)){d=!1;break}}return s.delete(e),s.delete(t),d}function da(e){var t=-1,r=Array(e.size);return e.forEach((function(e,a){r[++t]=[a,e]})),r}function ha(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r}var pa=ie?ie.prototype:void 0,fa=pa?pa.valueOf:void 0;var ma=Object.prototype.hasOwnProperty;var va=Object.prototype.hasOwnProperty;function ya(e,t,r,a,i,s){var n=me(e),o=me(t),c=n?"[object Array]":Gr(e),l=o?"[object Array]":Gr(t),u="[object Object]"==(c="[object Arguments]"==c?"[object Object]":c),d="[object Object]"==(l="[object Arguments]"==l?"[object Object]":l),h=c==l;if(h&&jt(e)){if(!jt(t))return!1;n=!0,u=!1}if(h&&!u)return s||(s=new Sr),n||Dt(e)?ua(e,t,r,a,i,s):function(e,t,r,a,i,s,n){switch(r){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!s(new Jr(e),new Jr(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return st(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var o=da;case"[object Set]":var c=1&a;if(o||(o=ha),e.size!=t.size&&!c)return!1;var l=n.get(e);if(l)return l==t;a|=2,n.set(e,t);var u=ua(o(e),o(t),a,i,s,n);return n.delete(e),u;case"[object Symbol]":if(fa)return fa.call(e)==fa.call(t)}return!1}(e,t,c,r,a,i,s);if(!(1&r)){var p=u&&va.call(e,"__wrapped__"),f=d&&va.call(t,"__wrapped__");if(p||f){var m=p?e.value():e,v=f?t.value():t;return s||(s=new Sr),i(m,v,r,a,s)}}return!!h&&(s||(s=new Sr),function(e,t,r,a,i,s){var n=1&r,o=zr(e),c=o.length;if(c!=zr(t).length&&!n)return!1;for(var l=c;l--;){var u=o[l];if(!(n?u in t:ma.call(t,u)))return!1}var d=s.get(e);if(d&&s.get(t))return d==t;var h=!0;s.set(e,t),s.set(t,e);for(var p=n;++l<c;){var f=e[u=o[l]],m=t[u];if(a)var v=n?a(m,f,u,t,e,s):a(f,m,u,e,t,s);if(!(void 0===v?f===m||i(f,m,r,a,s):v)){h=!1;break}p||(p="constructor"==u)}if(h&&!p){var y=e.constructor,g=t.constructor;y==g||!("constructor"in e)||!("constructor"in t)||"function"==typeof y&&y instanceof y&&"function"==typeof g&&g instanceof g||(h=!1)}return s.delete(e),s.delete(t),h}(e,t,r,a,i,s))}function ga(e,t,r,a,i){return e===t||(null==e||null==t||!he(e)&&!he(t)?e!=e&&t!=t:ya(e,t,r,a,ga,i))}function ba(e){return e==e&&!be(e)}function _a(e,t){return function(r){return null!=r&&(r[e]===t&&(void 0!==t||e in Object(r)))}}function wa(e){var t=function(e){for(var t=Ut(e),r=t.length;r--;){var a=t[r],i=e[a];t[r]=[a,i,ba(i)]}return t}(e);return 1==t.length&&t[0][2]?_a(t[0][0],t[0][1]):function(r){return r===e||function(e,t,r,a){var i=r.length,s=i,n=!a;if(null==e)return!s;for(e=Object(e);i--;){var o=r[i];if(n&&o[2]?o[1]!==e[o[0]]:!(o[0]in e))return!1}for(;++i<s;){var c=(o=r[i])[0],l=e[c],u=o[1];if(n&&o[2]){if(void 0===l&&!(c in e))return!1}else{var d=new Sr;if(a)var h=a(l,u,c,e,t,d);if(!(void 0===h?ga(u,l,3,a,d):h))return!1}}return!0}(r,e,t)}}function Pa(e,t){return null!=e&&t in Object(e)}function Ea(e,t,r){for(var a=-1,i=(t=lr(t,e)).length,s=!1;++a<i;){var n=ur(t[a]);if(!(s=null!=e&&r(e,n)))break;e=e[n]}return s||++a!=i?s:!!(i=null==e?0:e.length)&&ht(i)&&at(n,i)&&(me(e)||wt(e))}function Sa(e,t){return null!=e&&Ea(e,t,Pa)}function ja(e,t){return Kt(e)&&ba(t)?_a(ur(e),t):function(r){var a=function(e,t,r){var a=null==e?void 0:dr(e,t);return void 0===a?r:a}(r,e);return void 0===a&&a===t?Sa(r,e):ga(t,a,3)}}function xa(e){return Kt(e)?(t=ur(e),function(e){return null==e?void 0:e[t]}):function(e){return function(t){return dr(t,e)}}(e);var t}function $a(e){return"function"==typeof e?e:null==e?xe:"object"==typeof e?me(e)?ja(e[0],e[1]):wa(e):xa(e)}var Oa,Aa=function(e,t,r){for(var a=-1,i=Object(e),s=r(e),n=s.length;n--;){var o=s[Oa?n:++a];if(!1===t(i[o],o,i))break}return e};function ka(e,t){return e&&Aa(e,t,Ut)}var Fa=function(e,t){return function(r,a){if(null==r)return r;if(!pt(r))return e(r,a);for(var i=r.length,s=t?i:-1,n=Object(r);(t?s--:++s<i)&&!1!==a(n[s],s,n););return r}}(ka);function Ca(e,t){var r;return(me(e)?Ye:Fa)(e,"function"==typeof(r=t)?r:xe)}function Da(e,t){var r=[];return Fa(e,(function(e,a,i){t(e,a,i)&&r.push(e)})),r}function Ra(e,t){return(me(e)?Ar:Da)(e,$a(t))}var Ia=Math.max;var za,Na=(za=function(e,t,r){var a=null==e?0:e.length;if(!a)return-1;var i,s,n=null==r?0:(i=je(r),s=i%1,i==i?s?i-s:i:0);return n<0&&(n=Ia(a+n,0)),Xe(e,$a(t),n)},function(e,t,r){var a=Object(e);if(!pt(e)){var i=$a(t);e=Ut(e),t=function(e){return i(a[e],e,a)}}var s=za(e,t,r);return s>-1?a[i?e[s]:s]:void 0});function Ta(e,t){var r=-1,a=pt(e)?Array(e.length):[];return Fa(e,(function(e,i,s){a[++r]=t(e,i,s)})),a}var La=Object.prototype.hasOwnProperty;function Ua(e,t){return null!=e&&La.call(e,t)}function qa(e,t){return null!=e&&Ea(e,t,Ua)}function Va(e){return null==e?[]:function(e,t){return fe(t,(function(t){return e[t]}))}(e,Ut(e))}function Ma(e,t){return t.length<2?e:dr(e,function(e,t,r){var a=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(r=r>i?i:r)<0&&(r+=i),i=t>r?0:r-t>>>0,t>>>=0;for(var s=Array(i);++a<i;)s[a]=e[a+t];return s}(t,0,-1))}var Ha=Object.prototype.hasOwnProperty;function Qa(e){return void 0===e}function Ba(e,t){var r={};return t=$a(t),ka(e,(function(e,a,i){it(r,a,t(e,a,i))})),r}function Ga(e,t){return null==(e=Ma(e,t=lr(t,e)))||delete e[ur((r=t,a=null==r?0:r.length,a?r[a-1]:void 0))];var r,a}function Ka(e){return function(e){if(!he(e)||"[object Object]"!=de(e))return!1;var t=gr(e);if(null===t)return!0;var r=Pr.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&wr.call(r)==Er}(e)?void 0:e}var Ja=yr((function(e,t){var r={};if(null==e)return r;var a=!1;t=fe(t,(function(t){return t=lr(t,e),a||(a=t.length>1),t})),ct(e,Nr(e),r),a&&(r=na(r,7,Ka));for(var i=t.length;i--;)Ga(r,t[i]);return r}));function Wa(e,t,r,a){if(!be(e))return e;for(var i=-1,s=(t=lr(t,e)).length,n=s-1,o=e;null!=o&&++i<s;){var c=ur(t[i]),l=r;if(i!=n){var u=o[c];void 0===(l=a?a(u,c,o):void 0)&&(l=be(u)?u:at(t[i+1])?[]:{})}ot(o,c,l),o=o[c]}return e}function Za(e,t,r){for(var a=-1,i=t.length,s={};++a<i;){var n=t[a],o=dr(e,n);r(o,n)&&Wa(s,lr(n,e),o)}return s}function Ya(e,t){return function(e,t){if(null==e)return{};var r=fe(Nr(e),(function(e){return[e]}));return t=$a(t),Za(e,r,(function(e,r){return t(e,r[0])}))}(e,function(e){if("function"!=typeof e)throw new TypeError("Expected a function");return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}($a(t)))}function Xa(e,t){if(e!==t){var r=void 0!==e,a=null===e,i=e==e,s=pe(e),n=void 0!==t,o=null===t,c=t==t,l=pe(t);if(!o&&!l&&!s&&e>t||s&&n&&c&&!o&&!l||a&&n&&c||!r&&c||!i)return 1;if(!a&&!s&&!l&&e<t||l&&r&&i&&!a&&!s||o&&r&&i||!n&&i||!c)return-1}return 0}function ei(e,t,r){var a=-1;return t=fe(t.length?t:[xe],$t($a)),function(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}(Ta(e,(function(e,r,i){return{criteria:fe(t,(function(t){return t(e)})),index:++a,value:e}})),(function(e,t){return function(e,t,r){for(var a=-1,i=e.criteria,s=t.criteria,n=i.length,o=r.length;++a<n;){var c=Xa(i[a],s[a]);if(c)return a>=o?c:c*("desc"==r[a]?-1:1)}return e.index-t.index}(e,t,r)}))}var ti=yr((function(e,t){return null==e?{}:function(e,t){return Za(e,t,(function(t,r){return Sa(e,r)}))}(e,t)}));function ri(e,t,r,a){for(var i=r-1,s=e.length;++i<s;)if(a(e[i],t))return i;return-1}var ai=Array.prototype.splice;var ii=dt((function(e,t){return e&&e.length&&t&&t.length?function(e,t,r,a){var i=a?ri:tt,s=-1,n=t.length,o=e;for(e===t&&(t=Qe(t)),r&&(o=fe(e,$t(r)));++s<n;)for(var c=0,l=t[s],u=r?r(l):l;(c=i(o,u,c,a))>-1;)o!==e&&ai.call(o,c,1),ai.call(e,c,1);return e}(e,t):e})),si=dt((function(e,t){if(null==e)return[];var r=t.length;return r>1&&ft(e,t[0],t[1])?t=[]:r>2&&ft(t[0],t[1],t[2])&&(t=[t[0]]),ei(e,mr(t,1),[])})),ni={add:"add item",cancel:"cancel",next:"next",save:"save",delete:"delete"},oi={no_group_selected:"Select a group first",no_entity_selected:"Select an entity first",no_groups_defined:"There are no groups defined",no_entities_for_group:"There are no entities in this group",no_actions_for_entity:"There are no actions for this entity",no_entries_defined:"There are no items to show"},ci={group:"Group",entity:"Entity",action:"Action",days:"Days",time:"Time",options:"Options",day_type_daily:"every day",day_type_weekdays:"weekdays",day_type_custom:"custom",shift_with_sun:"automatically adjust time to sunrise/sunset",brightness:"Brightness",temperature:"Temperature"},li={mon:"mon",tue:"tue",wed:"wed",thu:"thu",fri:"fri",sat:"sat",sun:"sun"},ui={mon:"monday",tue:"tuesday",wed:"wednesday",thu:"thursday",fri:"friday",sat:"saturday",sun:"sunday"},di={on:"on",every:"every",and:"and",at:"at",before:"before",after:"after",sunrise:"sunrise",sunset:"sunset"},hi={turn_on:"turn on",turn_off:"turn off",close_cover:"close",open_cover:"open",set_temperature:"set temperature",set_to:"set to"},pi={climate:"climate",cover:"covers",fan:"fans",light:"lights",switch:"switches",vacuum:"vacuum"},fi={scheduler:"Scheduler",actions:ni,instructions:oi,fields:ci,days_short:li,days_long:ui,words:di,services:hi,domains:pi},mi=Object.freeze({__proto__:null,scheduler:"Scheduler",actions:ni,instructions:oi,fields:ci,days_short:li,days_long:ui,words:di,services:hi,domains:pi,default:fi}),vi={add:"Nieuw item",cancel:"annuleren",next:"verder",save:"opslaan",delete:"verwijder"},yi={no_group_selected:"Selecteer eerst een groep",no_entity_selected:"Selecteer eerst een entiteit",no_groups_defined:"Er zijn geen groepen gedefinieerd",no_entities_for_group:"Deze groep heeft geen entiteiten",no_actions_for_entity:"Deze entiteit heeft geen acties",no_entries_defined:"Er zijn geen items aangemaakt"},gi={group:"Groep",entity:"Entiteit",action:"Actie",days:"Dagen",time:"Tijdstip",options:"Opties",day_type_daily:"Dagelijks",day_type_weekdays:"werkdagen",day_type_custom:"Anders",shift_with_sun:"Automatisch aanpassen aan zonsopgang/zonsondergang",brightness:"Helderheid",temperature:"Temperatuur"},bi={mon:"ma",tue:"di",wed:"wo",thu:"do",fri:"vr",sat:"za",sun:"zo"},_i={mon:"maandag",tue:"dinsdag",wed:"woensdag",thu:"donderdag",fri:"vrijdag",sat:"zaterdag",sun:"zondag"},wi={on:"op",every:"elke",and:"en",at:"om",before:"voor",after:"na",sunrise:"zonsopgang",sunset:"zonsondergang"},Pi={turn_on:"aanzetten",turn_off:"uitzetten",close_cover:"sluiten",open_cover:"openen",set_temperature:"temperatuur instellen",set_to:"Zet op"},Ei={climate:"verwarming",cover:"zonwering",fan:"ventilatie",light:"verlichting",switch:"schakelaars",vacuum:"stofzuiger"},Si={scheduler:"Tijdplanner",actions:vi,instructions:yi,fields:gi,days_short:bi,days_long:_i,words:wi,services:Pi,domains:Ei},ji=Object.freeze({__proto__:null,scheduler:"Tijdplanner",actions:vi,instructions:yi,fields:gi,days_short:bi,days_long:_i,words:wi,services:Pi,domains:Ei,default:Si}),xi={add:"hinzufügen",cancel:"abbrechen",next:"weiter",save:"speichern",delete:"löschen"},$i={no_group_selected:"Wähle zuerst eine Gruppe aus",no_entity_selected:"Wähle zuerst eine Entity aus",no_groups_defined:"Es gibt keine Gruppe",no_entities_for_group:"Es gibt keine Entities in dieser Gruppe",no_actions_for_entity:"Es gibt keine Aktionen für diese Entity",no_entries_defined:"Es gibt keine Einträge"},Oi={group:"Gruppe",entity:"Entity",action:"Aktion",days:"Tage",time:"Zeit",options:"Optionen",day_type_daily:"jeden Tag",day_type_weekdays:"Werktags",day_type_custom:"benutzerdefiniert",shift_with_sun:"Zeit automatisch an Sonnenauf- bzw. Sonnenuntergang anpassen",brightness:"Helligkeit",temperature:"Temperatur"},Ai={mon:"Mo",tue:"Di",wed:"Mi",thu:"Do",fri:"Fr",sat:"Sa",sun:"So"},ki={mon:"Montag",tue:"Dienstag",wed:"Mittwoch",thu:"Donnerstag",fri:"Freitag",sat:"Samstag",sun:"Sonntag"},Fi={on:"An",every:"jeden",and:"und",at:"um",before:"vor",after:"nach",sunrise:"Sonnenaufgang",sunset:"Sonnenuntergang"},Ci={turn_on:"anschalten",turn_off:"ausschalten",close_cover:"schließen",open_cover:"öffnen",set_temperature:"Temperatur einstellen",set_to:"setzen auf"},Di={climate:"Heizung",cover:"Beschattung",fan:"Lüfter",light:"Licht",switch:"Schalter",vacuum:"Staubsauger"},Ri={scheduler:"Zeitplaner",actions:xi,instructions:$i,fields:Oi,days_short:Ai,days_long:ki,words:Fi,services:Ci,domains:Di},Ii=Object.freeze({__proto__:null,scheduler:"Zeitplaner",actions:xi,instructions:$i,fields:Oi,days_short:Ai,days_long:ki,words:Fi,services:Ci,domains:Di,default:Ri}),zi={add:"ajouter un item",cancel:"annuler",next:"suivant",save:"sauvegarder",delete:"effacer"},Ni={no_group_selected:"Sélectionner un groupe en premier",no_entity_selected:"Sélectionner une entité en premier",no_groups_defined:"Il n'y a pas de groupe défini",no_entities_for_group:"Il n'y a pas d'entité dans ce groupe",no_actions_for_entity:"Il n'y a pas d'action pour cette entité",no_entries_defined:"Il n'y a pas d'item à afficher"},Ti={group:"Groupe",entity:"Entité",action:"Action",days:"Jours",time:"Temps",options:"Options",day_type_daily:"chaque jour",day_type_weekdays:"en semaine",day_type_custom:"sur mesure",shift_with_sun:"ajuster automatiquement l'heure au lever/coucher du soleil",brightness:"Luminosité",temperature:"Température"},Li={mon:"lun",tue:"mar",wed:"mer",thu:"jeu",fri:"ven",sat:"sam",sun:"dim"},Ui={mon:"lundi",tue:"mardi",wed:"mercredi",thu:"jeudi",fri:"vendredi",sat:"samedi",sun:"dimanche"},qi={on:"marche",every:"tout",and:"et",at:"à",before:"avant",after:"après",sunrise:"lever du soleil",sunset:"coucher du soleil"},Vi={turn_on:"allumer",turn_off:"éteindre",close_cover:"fermer",open_cover:"ouvrir",set_temperature:"régler la température",set_to:"défini à"},Mi={climate:"climat",cover:"contrôleur",fan:"ventilateur",light:"lumière",switch:"interrupteurs",vacuum:"aspirateur"},Hi={scheduler:"Planificateur",actions:zi,instructions:Ni,fields:Ti,days_short:Li,days_long:Ui,words:qi,services:Vi,domains:Mi},Qi=Object.freeze({__proto__:null,scheduler:"Planificateur",actions:zi,instructions:Ni,fields:Ti,days_short:Li,days_long:Ui,words:qi,services:Vi,domains:Mi,default:Hi}),Bi={add:"dodaj",cancel:"anuluj",next:"dalej",save:"zapisz",delete:"usuń"},Gi={no_group_selected:"Najpierw wybierz grupę",no_entity_selected:"Najpierw wybierz encję",no_groups_defined:"Nie ma zdefiniowanych grup",no_entities_for_group:"Nie ma encji w tej grupie",no_actions_for_entity:"Nie ma akcji dla tej encji",no_entries_defined:"Nie ma elementów do pokazania"},Ki={group:"Grupa",entity:"Encja",action:"Akcja",days:"Dni",time:"Czas",options:"Opcje",day_type_daily:"codziennie",day_type_weekdays:"dni tygodnia",day_type_custom:"niestandardowy",shift_with_sun:"automatycznie dopasuj czas do wschodów/zachodów",brightness:"Jasność",temperature:"Temperatura"},Ji={mon:"pon",tue:"wt",wed:"śr",thu:"czw",fri:"pt",sat:"sob",sun:"niedz"},Wi={mon:"poniedziałek",tue:"wtorek",wed:"środa",thu:"czwartek",fri:"piątek",sat:"sobota",sun:"niedziela"},Zi={on:"w",every:"każdy",and:"oraz",at:"o",before:"przed",after:"po",sunrise:"wschód",sunset:"zachodów"},Yi={turn_on:"włącz",turn_off:"wyłącz",close_cover:"zamknij",open_cover:"otwórz",set_temperature:"Ustaw temperaturę",set_to:"ustaw na"},Xi={climate:"termostat",cover:"roleta",fan:"wiatrak",light:"światło",switch:"włącznik",vacuum:"odkurzacz"},es={scheduler:"Harmonogram",actions:Bi,instructions:Gi,fields:Ki,days_short:Ji,days_long:Wi,words:Zi,services:Yi,domains:Xi},ts=Object.freeze({__proto__:null,scheduler:"Harmonogram",actions:Bi,instructions:Gi,fields:Ki,days_short:Ji,days_long:Wi,words:Zi,services:Yi,domains:Xi,default:es}),rs={add:"legg til",cancel:"avbryt",next:"neste",save:"lagre",delete:"slett"},as={no_group_selected:"Velg en gruppe først",no_entity_selected:"Velg en entitet først",no_groups_defined:"Ingen grupper definert",no_entities_for_group:"Det finnes ingen entiteter i denne gruppen",no_actions_for_entity:"Det finnes ingen handlinger for denne entiteten",no_entries_defined:"Det er ingen definerte tidsplaner å vise"},is={group:"Gruppe",entity:"Entitet",action:"Handling",days:"Dager",time:"Tid",options:"Valg",day_type_daily:"hver dag",day_type_weekdays:"ukedager",day_type_custom:"egendefinert",shift_with_sun:"automatisk juster tid for soloppgang/solnedgang",brightness:"Lysstyrke",temperature:"Temperatur"},ss={mon:"man",tue:"tir",wed:"ons",thu:"tor",fri:"fre",sat:"lør",sun:"søn"},ns={mon:"mandag",tue:"tirsdag",wed:"onsdag",thu:"torsdag",fri:"fredag",sat:"lørdag",sun:"søndag"},os={on:"den",every:"hver",and:"og",at:"på",before:"før",after:"etter",sunrise:"soloppgang",sunset:"solnedgang"},cs={turn_on:"slå på",turn_off:"slå av",close_cover:"lukk",open_cover:"åpne",set_temperature:"sett temperatur",set_to:"sett til"},ls={climate:"klima",cover:"cover",fan:"vifter",light:"lys",switch:"brytere",vacuum:"støvsugere"},us={scheduler:"Tidsplan",actions:rs,instructions:as,fields:is,days_short:ss,days_long:ns,words:os,services:cs,domains:ls},ds=Object.freeze({__proto__:null,scheduler:"Tidsplan",actions:rs,instructions:as,fields:is,days_short:ss,days_long:ns,words:os,services:cs,domains:ls,default:us}),hs={add:"Agregar",cancel:"cancelar",next:"siguiente",save:"guardar",delete:"borrar"},ps={no_group_selected:"Selecciona un grupo primero",no_entity_selected:"Selecciona una entidad primero",no_groups_defined:"No hay grupos definidos",no_entities_for_group:"No hay entidades en este grupo",no_actions_for_entity:"No hay acciones para esta entidad",no_entries_defined:"No hay dispositivos definidos"},fs={group:"Grupo",entity:"Entidad",action:"Acción",days:"Días",time:"Hora",options:"Opciones",day_type_daily:"cada día",day_type_weekdays:"dias semanales",day_type_custom:"personalizado",shift_with_sun:"ajusta automaticamente la hora al amanecer/atardecer",brightness:"Brillo",temperature:"Temperatura"},ms={mon:"lun",tue:"mar",wed:"mie",thu:"jue",fri:"vie",sat:"sab",sun:"dom"},vs={mon:"lunes",tue:"martes",wed:"miércoles",thu:"jueves",fri:"viernes",sat:"sábado",sun:"domingo"},ys={on:"el",every:"cada",and:"y",at:"a las",before:"antes",after:"después",sunrise:"amanecer",sunset:"atardecer"},gs={turn_on:"encender",turn_off:"apagar",close_cover:"cerrar",open_cover:"abrir",set_temperature:"establecer temperatura",set_to:"establecer a"},bs={climate:"climatización",cover:"persiana",fan:"ventilador",light:"luces",switch:"interruptores",vacuum:"aspirador"},_s={scheduler:"Programador",actions:hs,instructions:ps,fields:fs,days_short:ms,days_long:vs,words:ys,services:gs,domains:bs},ws=Object.freeze({__proto__:null,scheduler:"Programador",actions:hs,instructions:ps,fields:fs,days_short:ms,days_long:vs,words:ys,services:gs,domains:bs,default:_s}),Ps={add:"добавить",cancel:"отмена",next:"далее",save:"записать",delete:"удалить"},Es={no_group_selected:"Необходимо выбрать группу",no_entity_selected:"Необходимо выбрать объект",no_groups_defined:"Ни одной группы не создано",no_entities_for_group:"В этой группе нет объектов",no_actions_for_entity:"Для этого объекта нет действий",no_entries_defined:"Объекты отсутствуют"},Ss={group:"Группа",entity:"Объект",action:"Действие",days:"Дни",time:"Время",options:"Опции",day_type_daily:"ежедневно",day_type_weekdays:"по будням",day_type_custom:"выбрать дни",shift_with_sun:"автоматически настраивать время на восход / закат",brightness:"Яркость",temperature:"Температура"},js={mon:"пн",tue:"вт",wed:"ср",thu:"чт",fri:"пт",sat:"сб",sun:"вс"},xs={mon:"понедельник",tue:"вторник",wed:"среда",thu:"четверг",fri:"пятница",sat:"суббота",sun:"воскресенье"},$s={on:"по",every:"каждый",and:"и",at:"в",before:"до",after:"после",sunrise:"восхода",sunset:"заката"},Os={turn_on:"включить",turn_off:"выключить",close_cover:"закрыть",open_cover:"открыть",set_temperature:"задать температуру",set_to:"установить"},As={climate:"Климат",cover:"Жалюзи",fan:"Вентиляторы",light:"Свет",switch:"Выключатели",vacuum:"Пылесосы"},ks={scheduler:"Планирование",actions:Ps,instructions:Es,fields:Ss,days_short:js,days_long:xs,words:$s,services:Os,domains:As},Fs={en:mi,nl:ji,de:Ii,fr:Qi,pl:ts,no:ds,es:ws,es_419:ws,ru:Object.freeze({__proto__:null,scheduler:"Планирование",actions:Ps,instructions:Es,fields:Ss,days_short:js,days_long:xs,words:$s,services:Os,domains:As,default:ks})};function Cs(e,t="",r=""){const a=Ds();var i;try{i=e.split(".").reduce((e,t)=>e[t],Fs[a])}catch(t){i=e.split(".").reduce((e,t)=>e[t],Fs.en)}return void 0===i&&(i=e.split(".").reduce((e,t)=>e[t],Fs.en)),""!==t&&""!==r&&(i=i.replace(t,r)),i}function Ds(){return(localStorage.getItem("selectedLanguage")||"en").replace(/['"]+/g,"").replace("-","_")}const Rs={light:{actions:[{service:"turn_on",icon:"lightbulb-on-outline",variable:{field:"brightness"}},{service:"turn_off",icon:"lightbulb-off-outline"}]},switch:{actions:[{service:"turn_on"},{service:"turn_off"}]},cover:{actions:[{service:"open_cover",name:Cs("services.open_cover")},{service:"close_cover",name:Cs("services.close_cover")}]},climate:{actions:[{service:"set_temperature",variable:{field:"temperature"},icon:"thermometer"},{service:"turn_off",icon:"thermometer-off"}]},fan:{actions:[{service:"turn_on",icon:"fan"},{service:"turn_off",icon:"fan-off"}]}},Is={group:"",entity:"",action:"",newItem:!1,actionConfirmed:!1,editItem:"",timeHours:"12",timeMinutes:"00",days:[],daysType:"daily",sun:!1,levelEnabled:!1,level:0};function zs(e){var t={automation:"robot",camera:"camera",climate:"home-thermometer-outline",cover:"window-shutter",fan:"fan",input_number:"sort-numeric-variant",input_select:"form-select",input_text:"form-textbox",input_time:"clock",light:"lightbulb-outline",media_player:"speaker",script:"script-text",switch:"flash",vacuum:"robot-vacuum"};return e in t?t[e]:"folder-outline"}function Ns(e){let t=null;return"climate"==e?t=Cs("domains.climate"):"cover"==e?t=Cs("domains.cover"):"fan"==e?t=Cs("domains.fan"):"light"==e?t=Cs("domains.light"):"switch"==e?t=Cs("domains.switch"):"vacuum"==e&&(t=Cs("domains.vacuum")),t||e}function Ts(e){const t={brightness:{name:Cs("fields.brightness"),unit:"",min:0,max:255,step:2.55,optional:!0,showPercentage:!0},temperature:{name:Cs("fields.temperature"),unit:"°C",min:10,max:30,step:1,optional:!1,showPercentage:!1},default:{name:e,unit:"",min:0,max:255,step:1,optional:!1,showPercentage:!1}};return void 0!==t[e]?Object.assign({},t[e]):Object.assign({},t.default)}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function Ls(e,t,r){return e(r={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&r.path)}},r.exports),r.exports}var Us=Ls((function(e,t){var r;r=function(){var e=JSON.parse('{"$":"dollar","%":"percent","&":"and","<":"less",">":"greater","|":"or","¢":"cent","£":"pound","¤":"currency","¥":"yen","©":"(c)","ª":"a","®":"(r)","º":"o","À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","Æ":"AE","Ç":"C","È":"E","É":"E","Ê":"E","Ë":"E","Ì":"I","Í":"I","Î":"I","Ï":"I","Ð":"D","Ñ":"N","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","Ù":"U","Ú":"U","Û":"U","Ü":"U","Ý":"Y","Þ":"TH","ß":"ss","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","æ":"ae","ç":"c","è":"e","é":"e","ê":"e","ë":"e","ì":"i","í":"i","î":"i","ï":"i","ð":"d","ñ":"n","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","ù":"u","ú":"u","û":"u","ü":"u","ý":"y","þ":"th","ÿ":"y","Ā":"A","ā":"a","Ă":"A","ă":"a","Ą":"A","ą":"a","Ć":"C","ć":"c","Č":"C","č":"c","Ď":"D","ď":"d","Đ":"DJ","đ":"dj","Ē":"E","ē":"e","Ė":"E","ė":"e","Ę":"e","ę":"e","Ě":"E","ě":"e","Ğ":"G","ğ":"g","Ģ":"G","ģ":"g","Ĩ":"I","ĩ":"i","Ī":"i","ī":"i","Į":"I","į":"i","İ":"I","ı":"i","Ķ":"k","ķ":"k","Ļ":"L","ļ":"l","Ľ":"L","ľ":"l","Ł":"L","ł":"l","Ń":"N","ń":"n","Ņ":"N","ņ":"n","Ň":"N","ň":"n","Ō":"O","ō":"o","Ő":"O","ő":"o","Œ":"OE","œ":"oe","Ŕ":"R","ŕ":"r","Ř":"R","ř":"r","Ś":"S","ś":"s","Ş":"S","ş":"s","Š":"S","š":"s","Ţ":"T","ţ":"t","Ť":"T","ť":"t","Ũ":"U","ũ":"u","Ū":"u","ū":"u","Ů":"U","ů":"u","Ű":"U","ű":"u","Ų":"U","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","ź":"z","Ż":"Z","ż":"z","Ž":"Z","ž":"z","ƒ":"f","Ơ":"O","ơ":"o","Ư":"U","ư":"u","ǈ":"LJ","ǉ":"lj","ǋ":"NJ","ǌ":"nj","Ș":"S","ș":"s","Ț":"T","ț":"t","˚":"o","Ά":"A","Έ":"E","Ή":"H","Ί":"I","Ό":"O","Ύ":"Y","Ώ":"W","ΐ":"i","Α":"A","Β":"B","Γ":"G","Δ":"D","Ε":"E","Ζ":"Z","Η":"H","Θ":"8","Ι":"I","Κ":"K","Λ":"L","Μ":"M","Ν":"N","Ξ":"3","Ο":"O","Π":"P","Ρ":"R","Σ":"S","Τ":"T","Υ":"Y","Φ":"F","Χ":"X","Ψ":"PS","Ω":"W","Ϊ":"I","Ϋ":"Y","ά":"a","έ":"e","ή":"h","ί":"i","ΰ":"y","α":"a","β":"b","γ":"g","δ":"d","ε":"e","ζ":"z","η":"h","θ":"8","ι":"i","κ":"k","λ":"l","μ":"m","ν":"n","ξ":"3","ο":"o","π":"p","ρ":"r","ς":"s","σ":"s","τ":"t","υ":"y","φ":"f","χ":"x","ψ":"ps","ω":"w","ϊ":"i","ϋ":"y","ό":"o","ύ":"y","ώ":"w","Ё":"Yo","Ђ":"DJ","Є":"Ye","І":"I","Ї":"Yi","Ј":"J","Љ":"LJ","Њ":"NJ","Ћ":"C","Џ":"DZ","А":"A","Б":"B","В":"V","Г":"G","Д":"D","Е":"E","Ж":"Zh","З":"Z","И":"I","Й":"J","К":"K","Л":"L","М":"M","Н":"N","О":"O","П":"P","Р":"R","С":"S","Т":"T","У":"U","Ф":"F","Х":"H","Ц":"C","Ч":"Ch","Ш":"Sh","Щ":"Sh","Ъ":"U","Ы":"Y","Ь":"","Э":"E","Ю":"Yu","Я":"Ya","а":"a","б":"b","в":"v","г":"g","д":"d","е":"e","ж":"zh","з":"z","и":"i","й":"j","к":"k","л":"l","м":"m","н":"n","о":"o","п":"p","р":"r","с":"s","т":"t","у":"u","ф":"f","х":"h","ц":"c","ч":"ch","ш":"sh","щ":"sh","ъ":"u","ы":"y","ь":"","э":"e","ю":"yu","я":"ya","ё":"yo","ђ":"dj","є":"ye","і":"i","ї":"yi","ј":"j","љ":"lj","њ":"nj","ћ":"c","ѝ":"u","џ":"dz","Ґ":"G","ґ":"g","Ғ":"GH","ғ":"gh","Қ":"KH","қ":"kh","Ң":"NG","ң":"ng","Ү":"UE","ү":"ue","Ұ":"U","ұ":"u","Һ":"H","һ":"h","Ә":"AE","ә":"ae","Ө":"OE","ө":"oe","฿":"baht","ა":"a","ბ":"b","გ":"g","დ":"d","ე":"e","ვ":"v","ზ":"z","თ":"t","ი":"i","კ":"k","ლ":"l","მ":"m","ნ":"n","ო":"o","პ":"p","ჟ":"zh","რ":"r","ს":"s","ტ":"t","უ":"u","ფ":"f","ქ":"k","ღ":"gh","ყ":"q","შ":"sh","ჩ":"ch","ც":"ts","ძ":"dz","წ":"ts","ჭ":"ch","ხ":"kh","ჯ":"j","ჰ":"h","Ẁ":"W","ẁ":"w","Ẃ":"W","ẃ":"w","Ẅ":"W","ẅ":"w","ẞ":"SS","Ạ":"A","ạ":"a","Ả":"A","ả":"a","Ấ":"A","ấ":"a","Ầ":"A","ầ":"a","Ẩ":"A","ẩ":"a","Ẫ":"A","ẫ":"a","Ậ":"A","ậ":"a","Ắ":"A","ắ":"a","Ằ":"A","ằ":"a","Ẳ":"A","ẳ":"a","Ẵ":"A","ẵ":"a","Ặ":"A","ặ":"a","Ẹ":"E","ẹ":"e","Ẻ":"E","ẻ":"e","Ẽ":"E","ẽ":"e","Ế":"E","ế":"e","Ề":"E","ề":"e","Ể":"E","ể":"e","Ễ":"E","ễ":"e","Ệ":"E","ệ":"e","Ỉ":"I","ỉ":"i","Ị":"I","ị":"i","Ọ":"O","ọ":"o","Ỏ":"O","ỏ":"o","Ố":"O","ố":"o","Ồ":"O","ồ":"o","Ổ":"O","ổ":"o","Ỗ":"O","ỗ":"o","Ộ":"O","ộ":"o","Ớ":"O","ớ":"o","Ờ":"O","ờ":"o","Ở":"O","ở":"o","Ỡ":"O","ỡ":"o","Ợ":"O","ợ":"o","Ụ":"U","ụ":"u","Ủ":"U","ủ":"u","Ứ":"U","ứ":"u","Ừ":"U","ừ":"u","Ử":"U","ử":"u","Ữ":"U","ữ":"u","Ự":"U","ự":"u","Ỳ":"Y","ỳ":"y","Ỵ":"Y","ỵ":"y","Ỷ":"Y","ỷ":"y","Ỹ":"Y","ỹ":"y","‘":"\'","’":"\'","“":"\\"","”":"\\"","†":"+","•":"*","…":"...","₠":"ecu","₢":"cruzeiro","₣":"french franc","₤":"lira","₥":"mill","₦":"naira","₧":"peseta","₨":"rupee","₩":"won","₪":"new shequel","₫":"dong","€":"euro","₭":"kip","₮":"tugrik","₯":"drachma","₰":"penny","₱":"peso","₲":"guarani","₳":"austral","₴":"hryvnia","₵":"cedi","₸":"kazakhstani tenge","₹":"indian rupee","₺":"turkish lira","₽":"russian ruble","₿":"bitcoin","℠":"sm","™":"tm","∂":"d","∆":"delta","∑":"sum","∞":"infinity","♥":"love","元":"yuan","円":"yen","﷼":"rial"}'),t=JSON.parse('{"de":{"Ä":"AE","ä":"ae","Ö":"OE","ö":"oe","Ü":"UE","ü":"ue"},"vi":{"Đ":"D","đ":"d"}}');function r(r,a){if("string"!=typeof r)throw new Error("slugify: string argument expected");var i=t[(a="string"==typeof a?{replacement:a}:a||{}).locale]||{},s=void 0===a.replacement?"-":a.replacement,n=r.split("").reduce((function(t,r){return t+(i[r]||e[r]||r).replace(a.remove||/[^\w\s$*_+~.()'"!\-:@]+/g,"")}),"").trim().replace(new RegExp("[\\s"+s+"]+","g"),s);return a.lower&&(n=n.toLowerCase()),a.strict&&(n=n.replace(new RegExp("[^a-zA-Z0-9"+s+"]","g"),"").replace(new RegExp("[\\s"+s+"]+","g"),s)),n}return r.extend=function(t){for(var r in t)e[r]=t[r]},r},e.exports=r(),e.exports.default=r()}));const qs=/^D([0-7]+)T([0-9SR\-\+]+)([A0-9+]+)$/,Vs=/^(A([0-9]+))+$/,Ms=/^([0-9]{4})?(S[SR])([0-9]{4})?$/,Hs=/^([0-9]{2})([0-9]{2})$/,Qs=/^([\+\-]{1})([0-9]{2}):([0-9]{2})$/;function Bs(e){let t=Hs.exec(e);return t?t[1]+":"+t[2]:null}function Gs(e){if(-1===e.indexOf("."))return"";return String(e.split(".").shift())}function Ks(e){let t=Ut(e);t=t.sort();let r={};return t.forEach(t=>r[t]=e[t]),Us(JSON.stringify(Va(r)).replace(/\W/g," "),"_")}function Js(e){return e.match(/^switch.schedule_[0-9a-f]{6}$/)}function Ws(e){return!e||!e.length||1==e.length&&0==e[0]?"daily":5!=e.length||e.includes(6)||e.includes(7)?"custom":"weekdays"}function Zs(e){return"string"!=typeof e&&(e=String(e)),e.replace(/_/g," ")}function Ys(e){return"string"!=typeof e&&(e=String(e)),e.match(/^[a-z]+:[a-z0-9-]+$/i)?e:"hass:"+e}class Xs{constructor(){this.entities=[],this.groups=[],this.userConfig={groups:{},domains:{},entities:{},discoverExisting:!0,standardConfiguration:!0,title:!0}}setUserConfig(e){Object.assign(this.userConfig,ti(e,["entities","groups","discoverExisting","standardConfiguration","title"])),this.userConfig.standardConfiguration&&Object.assign(this.userConfig,{domains:Rs}),e.domains&&Ca(e.domains,(e,t)=>{let r=Object.assign({},this.userConfig.domains);Object.assign(r,{[t]:e}),this.userConfig.domains=r}),this.userConfig.groups&&Ca(e.groups,this.AddGroup.bind(this))}AddGroup(e,t){if(this.FindGroup(t))return;let r=Object.assign({id:t,icon:"folder-outline",domains:[],entities:[],name:Ns(t)},Ya(Object.assign({},e),Qa));this.groups.push(r)}FindGroup(e){let t=Na(this.groups,{id:e});return t||null}AddEntityToGroup(e){let t=Gs(e),r=Na(this.groups,r=>r.domains.includes(t)||r.entities.includes(e));if(!r)if(r=this.FindGroup(t),r){let a=[...r.entities];a.push(e),this.groups.forEach((e,r)=>{e.id==t&&(this.groups[r].entities=a)})}else this.AddGroup({icon:zs(t),entities:[e]},t)}GetGroups(){let e=[...this.groups];return e=si(e,"name"),e}AddEntity(e,t){if(this.FindEntity(t))return;let r=Object.assign({id:t,name:t.split(".").pop(),icon:zs(Gs(t))},Ya(Object.assign({},e),Qa));this.entities.push(r),this.AddEntityToGroup(t)}FindEntity(e){let t=Na(this.entities,{id:e});return t||null}GetEntitiesForGroup(e){let t=[...this.entities];if(e){let r=this.FindGroup(e);if(!r)return[];t=t.filter(e=>{let t=Gs(e.id);return(null==r?void 0:r.entities.includes(e.id))||(null==r?void 0:r.domains.includes(t))})}return t=si(t,"name"),t}AddActionToEntity(e,t){if(!this.FindEntity(e))throw Error(`Entity '${e}' must be created before actions can be assigned`);if(this.FindAction(e,t.id))return;if(this.GetActionsForEntity(e).find(e=>!!e.hasOwnProperty("variable")&&!(!t.hasOwnProperty("service_data")||!t.service_data.hasOwnProperty(e.variable.field))))return;let r=[...this.GetActionsForEntity(e)];r.push(t),this.entities.forEach((t,a)=>{t.id==e&&(this.entities[a].actions=r)})}CreateAction(e){let t={id:Ks(ti(e,["service","service_data"])),name:(a=e.service,"turn_on"==a?Cs("services.turn_on"):"turn_off"==a?Cs("services.turn_off"):"open_cover"==a?Cs("services.open_cover"):"close_cover"==a?Cs("services.close_cover"):"set_temperature"==a?Cs("services.set_temperature"):-1!==a.indexOf(".")?a.split(".").pop():a),icon:(r=e.service,"turn_on"==r?"toggle-switch-outline":"turn_off"==r?"toggle-switch-off-outline":"open_cover"==r?"window-shutter-open":"close_cover"==r?"window-shutter":"set_temperature"==r?"thermometer":"flash"),service:e.service};var r,a;return qa(e,"service_data")&&!function(e){if(null==e)return!0;if(pt(e)&&(me(e)||"string"==typeof e||"function"==typeof e.splice||jt(e)||Dt(e)||wt(e)))return!e.length;var t=Gr(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(vt(e))return!Lt(e).length;for(var r in e)if(Ha.call(e,r))return!1;return!0}(e)&&Object.assign(t,ti(e,"service_data")),qa(e,"icon")&&Object.assign(t,ti(e,"icon")),qa(e,"name")&&Object.assign(t,ti(e,"name")),qa(e,"variable")&&Object.assign(t,{variable:Object.assign(Ts(e.variable.field),e.variable)}),t}FindAction(e,t){let r=this.GetActionsForEntity(e),a=Na(r,{id:t});return a||null}GetActionsForEntity(e){let t=this.FindEntity(e);if(!t)return[];let r=[...t.actions];return r=si(r,"name"),r}LoadEntities(e){if(Ca(e,t=>{let r=t.entity_id,a=Gs(r);if(!Js(r)&&(a in this.userConfig.domains||r in this.userConfig.entities)){let i=[],s={actions:[],name:e[r].attributes.friendly_name,icon:e[r].attributes.icon},n=!1;if(a in this.userConfig.domains&&(qa(this.userConfig.domains[a],"include")&&!this.userConfig.domains[a].include.includes(r)&&(n=!0),qa(this.userConfig.domains[a],"exclude")&&this.userConfig.domains[a].exclude.includes(r)&&(n=!0),Object.assign(s,Ja(this.userConfig.domains[a],"actions")),qa(this.userConfig.domains[a],"actions")&&!n)){Ca(Ba(this.userConfig.domains[a].actions,e=>{if(Gs((e=Object.assign({},e)).service)==a&&(e=Object.assign(e,{service:e.service.split(".").pop()})),"light"==a&&t.attributes.hasOwnProperty("supported_features")){!(1&t.attributes.supported_features)&&e.variable&&delete e.variable}return this.CreateAction(e)}),e=>i.push(e))}if(r in this.userConfig.entities){if(Object.assign(s,Ja(this.userConfig.entities[r],"actions")),qa(this.userConfig.entities[r],"actions")){Ca(Ba(this.userConfig.entities[r].actions,e=>{if(Gs((e=Object.assign({},e)).service)==a&&(e=Object.assign(e,{service:e.service.split(".").pop()})),"light"==a&&t.attributes.hasOwnProperty("supported_features")){!(1&t.attributes.supported_features)&&e.variable&&delete e.variable}return this.CreateAction(e)}),e=>i.push(e))}n=!1}if(n)return;this.AddEntity(s,r),Ca(i,e=>this.AddActionToEntity(r,e))}}),this.userConfig.discoverExisting){let a=Ra(e,e=>Js(e.entity_id));r=e=>e.attributes.actions,a=(me(t=a)?fe:Ta)(t,$a(r)),a=vr(a),Ca(a,t=>{let r=Object.assign({},t),a=r.entity,i=r.service,s=Ja(r,["entity","service"]);Gs(a)||(a=Gs(i)+"."+a,i=i.split(".").pop());let n=this.CreateAction({service:i,service_data:s});if(!this.FindEntity(a)){if(!e[a])return;let t={actions:[],name:e[a].attributes.friendly_name,icon:e[a].attributes.icon};this.AddEntity(t,a)}this.AddActionToEntity(a,n)})}var t,r;e["sun.sun"]&&(this.next_sunrise=new Date(e["sun.sun"].attributes.next_rising),this.next_sunset=new Date(e["sun.sun"].attributes.next_setting))}}const en=((e,...t)=>{const r=t.reduce((t,r,a)=>t+(e=>{if(e instanceof Y)return e.cssText;if("number"==typeof e)return e;throw new Error(`Value passed to 'css' function must be a 'css' function result: ${e}. Use 'unsafeCSS' to pass non-literal values, but\n            take care to ensure page security.`)})(r)+e[a+1],e[0]);return new Y(r,Z)})`
      /* list view */

      div.list-item {
        display: grid;
        grid-template-columns: min-content 1fr min-content;
        grid-template-rows: min-content min-content min-content min-content;
        grid-template-areas: "icon name switch"
                             "icon action switch"
                             "icon days switch"
                             "icon time switch";
        grid-gap: 2px 20px;
        background: var(--list-item-background-color);
        cursor: pointer;
        padding: 10px 20px;
      }

      div.list-item:hover {
        
      }

      div.list-item-icon {
        grid-area: icon;
        color: var(--state-icon-color);
      }

      div.list-item-icon ha-icon {
        width: 24px;
        height: 24px;
      }

      div.list-item-icon.enabled {
        color: var(--state-icon-active-color);
      }

      div.list-item-switch {
        grid-area: switch;
      }

      div.list-item-switch ha-switch {
        margin-top: 3px;
      }

      div.list-item-name {
        grid-area: name;
        font-weight: 500;
        color: var(--primary-text-color);
      }

      div.list-item-action {
        grid-area: action;
        color: var(--secondary-text-color);
      }

      div.list-item-days {
        grid-area: days;
        color: var(--secondary-text-color);
      }

      div.list-item-time {
        grid-area: time;
        color: var(--secondary-text-color);
      }

      div.list-item-name:first-letter, div.list-item-action:first-letter, div.list-item-days:first-letter, div.list-item-time:first-letter {
        text-transform: capitalize;
      }

      div.disabled div.list-item-icon, div.disabled div.list-item-name, div.disabled div.list-item-action, div.disabled div.list-item-days, div.disabled div.list-item-time {
        color: var(--disabled-text-color);
      }

      /* add/edit view */
   
      div.header {
        color: var(--secondary-text-color);
        text-transform: uppercase;
        font-size: 12px;
        font-weight: 500;
        margin: 0px 0px 0px 0px;
      }

      div.card-section {
        padding: 10px 10px;
      }

      div.card-section.first {
        padding-top: 0px;
      }
      
      div.card-section.last {
        padding-bottom: 10px;
      }

      div.text-field {
        color: var(--disabled-text-color);
      }

      div.summary {
        display: grid;
        grid-template-columns: 1fr max-content 1fr;
        grid-template-areas: "entity arrow action";
        grid-auto-flow: column;
        grid-gap: 5px;
      }

      div.summary-entity { grid-area: entity; }
      div.summary-action { grid-area: action; }
      div.summary-text { grid-area: text; }
      div.summary-icon { grid-area: icon; }
      div.summary-arrow {
        grid-area: arrow;
        color: var(--secondary-text-color);
        display: flex;
        justify-content:center;
        align-items:center;
      }

      div.summary-entity, div.summary-action {
        color: var(--dark-primary-color);
        padding: 10px;
        font-size: 14px;
        font-weight: 500;
        --mdc-icon-size: 20px;
        position: relative;
        display: flex;
        justify-content:center;
        align-items:center;
        display: grid;
        grid-template-columns: min-content 1fr;
        grid-template-areas: "icon text";
        grid-auto-flow: column;
        grid-gap: 10px;
      }

       div.summary-entity:before, div.summary-action:before  {
        content: " ";
        background: var(--primary-color);
        opacity: 0.15;
        border-radius: 4px;
        position: absolute;
        left: 0px;
        top: 0px;
        width: 100%;
        height: 100%;
        z-index: 1;
       }

       div.summary-text::first-letter {
        text-transform: uppercase;
       }

      div.time-picker {
        display: grid;
        grid-template-columns: min-content min-content min-content;
        grid-template-rows: min-content min-content min-content;
        grid-template-areas: "hours-up   .         minutes-up"
                             "hours      separator minutes"
                             "hours-down .         minutes-down";
        grid-gap: 10px 0px;
        align-items: center;
      }

      div.time-picker-hours-up { grid-area: hours-up; }
      div.time-picker-hours { grid-area: hours; }
      div.time-picker-hours-down { grid-area: hours-down; }
      div.time-picker-separator { grid-area: separator; }
      div.time-picker-minutes-up { grid-area: minutes-up; }
      div.time-picker-minutes { grid-area: minutes; }
      div.time-picker-minutes-down { grid-area: minutes-down; }
      div.time-picker-hours-up, div.time-picker-hours-down, div.time-picker-minutes-up, div.time-picker-minutes-down {
        --mdc-icon-size: 42px;
      }

      div.time-picker-hours, div.time-picker-minutes {
        font-size: 42px;
        text-align: center;
      }

      div.time-picker-separator {
        font-size: 36px;
      }

      div#day-list-custom.closed {
        display: none;
      }
      
      div#day-list-custom {
        overflow: hidden;
        max-height: 100px; /* approximate max height */
        transition-property: all;
        transition-duration: 1s;
        transition-timing-function: cubic-bezier(0, 1, 0.5, 1);
      }

      mwc-button {
        margin: 2px 0px;
      }

      mwc-button.active {
        background: var(--primary-color);
        --mdc-theme-primary: var(--text-primary-color);
        border-radius: 4px;
      }
      
      div.option-item {
        padding: 2px 5px;
        display: flex;
        align-items: center;
      }

      div.option-item ha-paper-slider {
        flex-grow: 1;
        --paper-slider-pin-start-color: var(--primary-color);
      }

      div#level-value {
        min-width: 40px;
      }

      div.option-item .disabled {
        color: var(--disabled-text-color);
      }
      
      .padded-right {
        margin-right: 11px;
      }
`;var tn=Ls((function(e,t){
/** @license URI.js v4.4.0 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */
!function(e){function t(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];if(t.length>1){t[0]=t[0].slice(0,-1);for(var a=t.length-1,i=1;i<a;++i)t[i]=t[i].slice(1,-1);return t[a]=t[a].slice(1),t.join("")}return t[0]}function r(e){return"(?:"+e+")"}function a(e){return void 0===e?"undefined":null===e?"null":Object.prototype.toString.call(e).split(" ").pop().split("]").shift().toLowerCase()}function i(e){return e.toUpperCase()}function s(e){var a=t("[0-9]","[A-Fa-f]"),i=r(r("%[EFef]"+a+"%"+a+a+"%"+a+a)+"|"+r("%[89A-Fa-f]"+a+"%"+a+a)+"|"+r("%"+a+a)),s="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",n=t("[\\:\\/\\?\\#\\[\\]\\@]",s),o=e?"[\\uE000-\\uF8FF]":"[]",c=t("[A-Za-z]","[0-9]","[\\-\\.\\_\\~]",e?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]"),l=(r("[A-Za-z]"+t("[A-Za-z]","[0-9]","[\\+\\-\\.]")+"*"),r(r(i+"|"+t(c,s,"[\\:]"))+"*"),r(r("25[0-5]")+"|"+r("2[0-4][0-9]")+"|"+r("1[0-9][0-9]")+"|"+r("0?[1-9][0-9]")+"|0?0?[0-9]")),u=r(l+"\\."+l+"\\."+l+"\\."+l),d=r(a+"{1,4}"),h=r(r(d+"\\:"+d)+"|"+u),p=r(r(d+"\\:")+"{6}"+h),f=r("\\:\\:"+r(d+"\\:")+"{5}"+h),m=r(r(d)+"?\\:\\:"+r(d+"\\:")+"{4}"+h),v=r(r(r(d+"\\:")+"{0,1}"+d)+"?\\:\\:"+r(d+"\\:")+"{3}"+h),y=r(r(r(d+"\\:")+"{0,2}"+d)+"?\\:\\:"+r(d+"\\:")+"{2}"+h),g=r(r(r(d+"\\:")+"{0,3}"+d)+"?\\:\\:"+d+"\\:"+h),b=r(r(r(d+"\\:")+"{0,4}"+d)+"?\\:\\:"+h),_=r(r(r(d+"\\:")+"{0,5}"+d)+"?\\:\\:"+d),w=r(r(r(d+"\\:")+"{0,6}"+d)+"?\\:\\:"),P=r([p,f,m,v,y,g,b,_,w].join("|")),E=r(r(c+"|"+i)+"+"),S=(r("[vV]"+a+"+\\."+t(c,s,"[\\:]")+"+"),r(r(i+"|"+t(c,s))+"*"),r(i+"|"+t(c,s,"[\\:\\@]")));return r(r(i+"|"+t(c,s,"[\\@]"))+"+"),r(r(S+"|"+t("[\\/\\?]",o))+"*"),{NOT_SCHEME:new RegExp(t("[^]","[A-Za-z]","[0-9]","[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(t("[^\\%\\:]",c,s),"g"),NOT_HOST:new RegExp(t("[^\\%\\[\\]\\:]",c,s),"g"),NOT_PATH:new RegExp(t("[^\\%\\/\\:\\@]",c,s),"g"),NOT_PATH_NOSCHEME:new RegExp(t("[^\\%\\/\\@]",c,s),"g"),NOT_QUERY:new RegExp(t("[^\\%]",c,s,"[\\:\\@\\/\\?]",o),"g"),NOT_FRAGMENT:new RegExp(t("[^\\%]",c,s,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(t("[^]",c,s),"g"),UNRESERVED:new RegExp(c,"g"),OTHER_CHARS:new RegExp(t("[^\\%]",c,n),"g"),PCT_ENCODED:new RegExp(i,"g"),IPV4ADDRESS:new RegExp("^("+u+")$"),IPV6ADDRESS:new RegExp("^\\[?("+P+")"+r(r("\\%25|\\%(?!"+a+"{2})")+"("+E+")")+"?\\]?$")}}var n=s(!1),o=s(!0),c=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],a=!0,i=!1,s=void 0;try{for(var n,o=e[Symbol.iterator]();!(a=(n=o.next()).done)&&(r.push(n.value),!t||r.length!==t);a=!0);}catch(e){i=!0,s=e}finally{try{!a&&o.return&&o.return()}finally{if(i)throw s}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},l=2147483647,u=/^xn--/,d=/[^\0-\x7E]/,h=/[\x2E\u3002\uFF0E\uFF61]/g,p={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},f=Math.floor,m=String.fromCharCode;function v(e){throw new RangeError(p[e])}function y(e,t){var r=e.split("@"),a="";r.length>1&&(a=r[0]+"@",e=r[1]);var i=function(e,t){for(var r=[],a=e.length;a--;)r[a]=t(e[a]);return r}((e=e.replace(h,".")).split("."),t).join(".");return a+i}function g(e){for(var t=[],r=0,a=e.length;r<a;){var i=e.charCodeAt(r++);if(i>=55296&&i<=56319&&r<a){var s=e.charCodeAt(r++);56320==(64512&s)?t.push(((1023&i)<<10)+(1023&s)+65536):(t.push(i),r--)}else t.push(i)}return t}var b=function(e,t){return e+22+75*(e<26)-((0!=t)<<5)},_=function(e,t,r){var a=0;for(e=r?f(e/700):e>>1,e+=f(e/t);e>455;a+=36)e=f(e/35);return f(a+36*e/(e+38))},w=function(e){var t,r=[],a=e.length,i=0,s=128,n=72,o=e.lastIndexOf("-");o<0&&(o=0);for(var c=0;c<o;++c)e.charCodeAt(c)>=128&&v("not-basic"),r.push(e.charCodeAt(c));for(var u=o>0?o+1:0;u<a;){for(var d=i,h=1,p=36;;p+=36){u>=a&&v("invalid-input");var m=(t=e.charCodeAt(u++))-48<10?t-22:t-65<26?t-65:t-97<26?t-97:36;(m>=36||m>f((l-i)/h))&&v("overflow"),i+=m*h;var y=p<=n?1:p>=n+26?26:p-n;if(m<y)break;var g=36-y;h>f(l/g)&&v("overflow"),h*=g}var b=r.length+1;n=_(i-d,b,0==d),f(i/b)>l-s&&v("overflow"),s+=f(i/b),i%=b,r.splice(i++,0,s)}return String.fromCodePoint.apply(String,r)},P=function(e){var t=[],r=(e=g(e)).length,a=128,i=0,s=72,n=!0,o=!1,c=void 0;try{for(var u,d=e[Symbol.iterator]();!(n=(u=d.next()).done);n=!0){var h=u.value;h<128&&t.push(m(h))}}catch(e){o=!0,c=e}finally{try{!n&&d.return&&d.return()}finally{if(o)throw c}}var p=t.length,y=p;for(p&&t.push("-");y<r;){var w=l,P=!0,E=!1,S=void 0;try{for(var j,x=e[Symbol.iterator]();!(P=(j=x.next()).done);P=!0){var $=j.value;$>=a&&$<w&&(w=$)}}catch(e){E=!0,S=e}finally{try{!P&&x.return&&x.return()}finally{if(E)throw S}}var O=y+1;w-a>f((l-i)/O)&&v("overflow"),i+=(w-a)*O,a=w;var A=!0,k=!1,F=void 0;try{for(var C,D=e[Symbol.iterator]();!(A=(C=D.next()).done);A=!0){var R=C.value;if(R<a&&++i>l&&v("overflow"),R==a){for(var I=i,z=36;;z+=36){var N=z<=s?1:z>=s+26?26:z-s;if(I<N)break;var T=I-N,L=36-N;t.push(m(b(N+T%L,0))),I=f(T/L)}t.push(m(b(I,0))),s=_(i,O,y==p),i=0,++y}}}catch(e){k=!0,F=e}finally{try{!A&&D.return&&D.return()}finally{if(k)throw F}}++i,++a}return t.join("")},E=function(e){return y(e,(function(e){return d.test(e)?"xn--"+P(e):e}))},S=function(e){return y(e,(function(e){return u.test(e)?w(e.slice(4).toLowerCase()):e}))},j={};function x(e){var t=e.charCodeAt(0);return t<16?"%0"+t.toString(16).toUpperCase():t<128?"%"+t.toString(16).toUpperCase():t<2048?"%"+(t>>6|192).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase():"%"+(t>>12|224).toString(16).toUpperCase()+"%"+(t>>6&63|128).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase()}function $(e){for(var t="",r=0,a=e.length;r<a;){var i=parseInt(e.substr(r+1,2),16);if(i<128)t+=String.fromCharCode(i),r+=3;else if(i>=194&&i<224){if(a-r>=6){var s=parseInt(e.substr(r+4,2),16);t+=String.fromCharCode((31&i)<<6|63&s)}else t+=e.substr(r,6);r+=6}else if(i>=224){if(a-r>=9){var n=parseInt(e.substr(r+4,2),16),o=parseInt(e.substr(r+7,2),16);t+=String.fromCharCode((15&i)<<12|(63&n)<<6|63&o)}else t+=e.substr(r,9);r+=9}else t+=e.substr(r,3),r+=3}return t}function O(e,t){function r(e){var r=$(e);return r.match(t.UNRESERVED)?r:e}return e.scheme&&(e.scheme=String(e.scheme).replace(t.PCT_ENCODED,r).toLowerCase().replace(t.NOT_SCHEME,"")),void 0!==e.userinfo&&(e.userinfo=String(e.userinfo).replace(t.PCT_ENCODED,r).replace(t.NOT_USERINFO,x).replace(t.PCT_ENCODED,i)),void 0!==e.host&&(e.host=String(e.host).replace(t.PCT_ENCODED,r).toLowerCase().replace(t.NOT_HOST,x).replace(t.PCT_ENCODED,i)),void 0!==e.path&&(e.path=String(e.path).replace(t.PCT_ENCODED,r).replace(e.scheme?t.NOT_PATH:t.NOT_PATH_NOSCHEME,x).replace(t.PCT_ENCODED,i)),void 0!==e.query&&(e.query=String(e.query).replace(t.PCT_ENCODED,r).replace(t.NOT_QUERY,x).replace(t.PCT_ENCODED,i)),void 0!==e.fragment&&(e.fragment=String(e.fragment).replace(t.PCT_ENCODED,r).replace(t.NOT_FRAGMENT,x).replace(t.PCT_ENCODED,i)),e}function A(e){return e.replace(/^0*(.*)/,"$1")||"0"}function k(e,t){var r=e.match(t.IPV4ADDRESS)||[],a=c(r,2)[1];return a?a.split(".").map(A).join("."):e}function F(e,t){var r=e.match(t.IPV6ADDRESS)||[],a=c(r,3),i=a[1],s=a[2];if(i){for(var n=i.toLowerCase().split("::").reverse(),o=c(n,2),l=o[0],u=o[1],d=u?u.split(":").map(A):[],h=l.split(":").map(A),p=t.IPV4ADDRESS.test(h[h.length-1]),f=p?7:8,m=h.length-f,v=Array(f),y=0;y<f;++y)v[y]=d[y]||h[m+y]||"";p&&(v[f-1]=k(v[f-1],t));var g=v.reduce((function(e,t,r){if(!t||"0"===t){var a=e[e.length-1];a&&a.index+a.length===r?a.length++:e.push({index:r,length:1})}return e}),[]).sort((function(e,t){return t.length-e.length}))[0],b=void 0;if(g&&g.length>1){var _=v.slice(0,g.index),w=v.slice(g.index+g.length);b=_.join(":")+"::"+w.join(":")}else b=v.join(":");return s&&(b+="%"+s),b}return e}var C=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,D=void 0==="".match(/(){0}/)[1];function R(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={},a=!1!==t.iri?o:n;"suffix"===t.reference&&(e=(t.scheme?t.scheme+":":"")+"//"+e);var i=e.match(C);if(i){D?(r.scheme=i[1],r.userinfo=i[3],r.host=i[4],r.port=parseInt(i[5],10),r.path=i[6]||"",r.query=i[7],r.fragment=i[8],isNaN(r.port)&&(r.port=i[5])):(r.scheme=i[1]||void 0,r.userinfo=-1!==e.indexOf("@")?i[3]:void 0,r.host=-1!==e.indexOf("//")?i[4]:void 0,r.port=parseInt(i[5],10),r.path=i[6]||"",r.query=-1!==e.indexOf("?")?i[7]:void 0,r.fragment=-1!==e.indexOf("#")?i[8]:void 0,isNaN(r.port)&&(r.port=e.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?i[4]:void 0)),r.host&&(r.host=F(k(r.host,a),a)),void 0!==r.scheme||void 0!==r.userinfo||void 0!==r.host||void 0!==r.port||r.path||void 0!==r.query?void 0===r.scheme?r.reference="relative":void 0===r.fragment?r.reference="absolute":r.reference="uri":r.reference="same-document",t.reference&&"suffix"!==t.reference&&t.reference!==r.reference&&(r.error=r.error||"URI is not a "+t.reference+" reference.");var s=j[(t.scheme||r.scheme||"").toLowerCase()];if(t.unicodeSupport||s&&s.unicodeSupport)O(r,a);else{if(r.host&&(t.domainHost||s&&s.domainHost))try{r.host=E(r.host.replace(a.PCT_ENCODED,$).toLowerCase())}catch(e){r.error=r.error||"Host's domain name can not be converted to ASCII via punycode: "+e}O(r,n)}s&&s.parse&&s.parse(r,t)}else r.error=r.error||"URI can not be parsed.";return r}function I(e,t){var r=!1!==t.iri?o:n,a=[];return void 0!==e.userinfo&&(a.push(e.userinfo),a.push("@")),void 0!==e.host&&a.push(F(k(String(e.host),r),r).replace(r.IPV6ADDRESS,(function(e,t,r){return"["+t+(r?"%25"+r:"")+"]"}))),"number"!=typeof e.port&&"string"!=typeof e.port||(a.push(":"),a.push(String(e.port))),a.length?a.join(""):void 0}var z=/^\.\.?\//,N=/^\/\.(\/|$)/,T=/^\/\.\.(\/|$)/,L=/^\/?(?:.|\n)*?(?=\/|$)/;function U(e){for(var t=[];e.length;)if(e.match(z))e=e.replace(z,"");else if(e.match(N))e=e.replace(N,"/");else if(e.match(T))e=e.replace(T,"/"),t.pop();else if("."===e||".."===e)e="";else{var r=e.match(L);if(!r)throw new Error("Unexpected dot segment condition");var a=r[0];e=e.slice(a.length),t.push(a)}return t.join("")}function q(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.iri?o:n,a=[],i=j[(t.scheme||e.scheme||"").toLowerCase()];if(i&&i.serialize&&i.serialize(e,t),e.host)if(r.IPV6ADDRESS.test(e.host));else if(t.domainHost||i&&i.domainHost)try{e.host=t.iri?S(e.host):E(e.host.replace(r.PCT_ENCODED,$).toLowerCase())}catch(r){e.error=e.error||"Host's domain name can not be converted to "+(t.iri?"Unicode":"ASCII")+" via punycode: "+r}O(e,r),"suffix"!==t.reference&&e.scheme&&(a.push(e.scheme),a.push(":"));var s=I(e,t);if(void 0!==s&&("suffix"!==t.reference&&a.push("//"),a.push(s),e.path&&"/"!==e.path.charAt(0)&&a.push("/")),void 0!==e.path){var c=e.path;t.absolutePath||i&&i.absolutePath||(c=U(c)),void 0===s&&(c=c.replace(/^\/\//,"/%2F")),a.push(c)}return void 0!==e.query&&(a.push("?"),a.push(e.query)),void 0!==e.fragment&&(a.push("#"),a.push(e.fragment)),a.join("")}function V(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments[3],i={};return a||(e=R(q(e,r),r),t=R(q(t,r),r)),!(r=r||{}).tolerant&&t.scheme?(i.scheme=t.scheme,i.userinfo=t.userinfo,i.host=t.host,i.port=t.port,i.path=U(t.path||""),i.query=t.query):(void 0!==t.userinfo||void 0!==t.host||void 0!==t.port?(i.userinfo=t.userinfo,i.host=t.host,i.port=t.port,i.path=U(t.path||""),i.query=t.query):(t.path?("/"===t.path.charAt(0)?i.path=U(t.path):(void 0===e.userinfo&&void 0===e.host&&void 0===e.port||e.path?e.path?i.path=e.path.slice(0,e.path.lastIndexOf("/")+1)+t.path:i.path=t.path:i.path="/"+t.path,i.path=U(i.path)),i.query=t.query):(i.path=e.path,void 0!==t.query?i.query=t.query:i.query=e.query),i.userinfo=e.userinfo,i.host=e.host,i.port=e.port),i.scheme=e.scheme),i.fragment=t.fragment,i}function M(e,t){return e&&e.toString().replace(t&&t.iri?o.PCT_ENCODED:n.PCT_ENCODED,$)}var H={scheme:"http",domainHost:!0,parse:function(e,t){return e.host||(e.error=e.error||"HTTP URIs must have a host."),e},serialize:function(e,t){var r="https"===String(e.scheme).toLowerCase();return e.port!==(r?443:80)&&""!==e.port||(e.port=void 0),e.path||(e.path="/"),e}},Q={scheme:"https",domainHost:H.domainHost,parse:H.parse,serialize:H.serialize};function B(e){return"boolean"==typeof e.secure?e.secure:"wss"===String(e.scheme).toLowerCase()}var G={scheme:"ws",domainHost:!0,parse:function(e,t){var r=e;return r.secure=B(r),r.resourceName=(r.path||"/")+(r.query?"?"+r.query:""),r.path=void 0,r.query=void 0,r},serialize:function(e,t){if(e.port!==(B(e)?443:80)&&""!==e.port||(e.port=void 0),"boolean"==typeof e.secure&&(e.scheme=e.secure?"wss":"ws",e.secure=void 0),e.resourceName){var r=e.resourceName.split("?"),a=c(r,2),i=a[0],s=a[1];e.path=i&&"/"!==i?i:void 0,e.query=s,e.resourceName=void 0}return e.fragment=void 0,e}},K={scheme:"wss",domainHost:G.domainHost,parse:G.parse,serialize:G.serialize},J={},W="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",Z="[0-9A-Fa-f]",Y=r(r("%[EFef]"+Z+"%"+Z+Z+"%"+Z+Z)+"|"+r("%[89A-Fa-f]"+Z+"%"+Z+Z)+"|"+r("%"+Z+Z)),X=t("[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",'[\\"\\\\]'),ee=new RegExp(W,"g"),te=new RegExp(Y,"g"),re=new RegExp(t("[^]","[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]","[\\.]",'[\\"]',X),"g"),ae=new RegExp(t("[^]",W,"[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]"),"g"),ie=ae;function se(e){var t=$(e);return t.match(ee)?t:e}var ne={scheme:"mailto",parse:function(e,t){var r=e,a=r.to=r.path?r.path.split(","):[];if(r.path=void 0,r.query){for(var i=!1,s={},n=r.query.split("&"),o=0,c=n.length;o<c;++o){var l=n[o].split("=");switch(l[0]){case"to":for(var u=l[1].split(","),d=0,h=u.length;d<h;++d)a.push(u[d]);break;case"subject":r.subject=M(l[1],t);break;case"body":r.body=M(l[1],t);break;default:i=!0,s[M(l[0],t)]=M(l[1],t)}}i&&(r.headers=s)}r.query=void 0;for(var p=0,f=a.length;p<f;++p){var m=a[p].split("@");if(m[0]=M(m[0]),t.unicodeSupport)m[1]=M(m[1],t).toLowerCase();else try{m[1]=E(M(m[1],t).toLowerCase())}catch(e){r.error=r.error||"Email address's domain name can not be converted to ASCII via punycode: "+e}a[p]=m.join("@")}return r},serialize:function(e,t){var r,a=e,s=null!=(r=e.to)?r instanceof Array?r:"number"!=typeof r.length||r.split||r.setInterval||r.call?[r]:Array.prototype.slice.call(r):[];if(s){for(var n=0,o=s.length;n<o;++n){var c=String(s[n]),l=c.lastIndexOf("@"),u=c.slice(0,l).replace(te,se).replace(te,i).replace(re,x),d=c.slice(l+1);try{d=t.iri?S(d):E(M(d,t).toLowerCase())}catch(e){a.error=a.error||"Email address's domain name can not be converted to "+(t.iri?"Unicode":"ASCII")+" via punycode: "+e}s[n]=u+"@"+d}a.path=s.join(",")}var h=e.headers=e.headers||{};e.subject&&(h.subject=e.subject),e.body&&(h.body=e.body);var p=[];for(var f in h)h[f]!==J[f]&&p.push(f.replace(te,se).replace(te,i).replace(ae,x)+"="+h[f].replace(te,se).replace(te,i).replace(ie,x));return p.length&&(a.query=p.join("&")),a}},oe=/^([^\:]+)\:(.*)/,ce={scheme:"urn",parse:function(e,t){var r=e.path&&e.path.match(oe),a=e;if(r){var i=t.scheme||a.scheme||"urn",s=r[1].toLowerCase(),n=r[2],o=i+":"+(t.nid||s),c=j[o];a.nid=s,a.nss=n,a.path=void 0,c&&(a=c.parse(a,t))}else a.error=a.error||"URN can not be parsed.";return a},serialize:function(e,t){var r=t.scheme||e.scheme||"urn",a=e.nid,i=r+":"+(t.nid||a),s=j[i];s&&(e=s.serialize(e,t));var n=e,o=e.nss;return n.path=(a||t.nid)+":"+o,n}},le=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,ue={scheme:"urn:uuid",parse:function(e,t){var r=e;return r.uuid=r.nss,r.nss=void 0,t.tolerant||r.uuid&&r.uuid.match(le)||(r.error=r.error||"UUID is not valid."),r},serialize:function(e,t){var r=e;return r.nss=(e.uuid||"").toLowerCase(),r}};j[H.scheme]=H,j[Q.scheme]=Q,j[G.scheme]=G,j[K.scheme]=K,j[ne.scheme]=ne,j[ce.scheme]=ce,j[ue.scheme]=ue,e.SCHEMES=j,e.pctEncChar=x,e.pctDecChars=$,e.parse=R,e.removeDotSegments=U,e.serialize=q,e.resolveComponents=V,e.resolve=function(e,t,r){var a=function(e,t){var r=e;if(t)for(var a in t)r[a]=t[a];return r}({scheme:"null"},r);return q(V(R(e,a),R(t,a),a,!0),a)},e.normalize=function(e,t){return"string"==typeof e?e=q(R(e,t),t):"object"===a(e)&&(e=R(q(e,t),t)),e},e.equal=function(e,t,r){return"string"==typeof e?e=q(R(e,r),r):"object"===a(e)&&(e=q(e,r)),"string"==typeof t?t=q(R(t,r),r):"object"===a(t)&&(t=q(t,r)),e===t},e.escapeComponent=function(e,t){return e&&e.toString().replace(t&&t.iri?o.ESCAPE:n.ESCAPE,x)},e.unescapeComponent=M,Object.defineProperty(e,"__esModule",{value:!0})}(t)})),rn=function e(t,r){if(t===r)return!0;if(t&&r&&"object"==typeof t&&"object"==typeof r){if(t.constructor!==r.constructor)return!1;var a,i,s;if(Array.isArray(t)){if((a=t.length)!=r.length)return!1;for(i=a;0!=i--;)if(!e(t[i],r[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((a=(s=Object.keys(t)).length)!==Object.keys(r).length)return!1;for(i=a;0!=i--;)if(!Object.prototype.hasOwnProperty.call(r,s[i]))return!1;for(i=a;0!=i--;){var n=s[i];if(!e(t[n],r[n]))return!1}return!0}return t!=t&&r!=r},an={copy:function(e,t){for(var r in t=t||{},e)t[r]=e[r];return t},checkDataType:sn,checkDataTypes:function(e,t,r){switch(e.length){case 1:return sn(e[0],t,r,!0);default:var a="",i=on(e);for(var s in i.array&&i.object&&(a=i.null?"(":"(!"+t+" || ",a+="typeof "+t+' !== "object")',delete i.null,delete i.array,delete i.object),i.number&&delete i.integer,i)a+=(a?" && ":"")+sn(s,t,r,!0);return a}},coerceToTypes:function(e,t){if(Array.isArray(t)){for(var r=[],a=0;a<t.length;a++){var i=t[a];(nn[i]||"array"===e&&"array"===i)&&(r[r.length]=i)}if(r.length)return r}else{if(nn[t])return[t];if("array"===e&&"array"===t)return["array"]}},toHash:on,getProperty:un,escapeQuotes:dn,equal:rn,ucs2length:function(e){for(var t,r=0,a=e.length,i=0;i<a;)r++,(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<a&&56320==(64512&(t=e.charCodeAt(i)))&&i++;return r},varOccurences:function(e,t){t+="[^0-9]";var r=e.match(new RegExp(t,"g"));return r?r.length:0},varReplace:function(e,t,r){return t+="([^0-9])",r=r.replace(/\$/g,"$$$$"),e.replace(new RegExp(t,"g"),r+"$1")},schemaHasRules:function(e,t){if("boolean"==typeof e)return!e;for(var r in e)if(t[r])return!0},schemaHasRulesExcept:function(e,t,r){if("boolean"==typeof e)return!e&&"not"!=r;for(var a in e)if(a!=r&&t[a])return!0},schemaUnknownRules:function(e,t){if("boolean"==typeof e)return;for(var r in e)if(!t[r])return r},toQuotedString:hn,getPathExpr:function(e,t,r,a){return mn(e,r?"'/' + "+t+(a?"":".replace(/~/g, '~0').replace(/\\//g, '~1')"):a?"'[' + "+t+" + ']'":"'[\\'' + "+t+" + '\\']'")},getPath:function(e,t,r){var a=hn(r?"/"+vn(t):un(t));return mn(e,a)},getData:function(e,t,r){var a,i,s,n;if(""===e)return"rootData";if("/"==e[0]){if(!pn.test(e))throw new Error("Invalid JSON-pointer: "+e);i=e,s="rootData"}else{if(!(n=e.match(fn)))throw new Error("Invalid JSON-pointer: "+e);if(a=+n[1],"#"==(i=n[2])){if(a>=t)throw new Error("Cannot access property/index "+a+" levels up, current level is "+t);return r[t-a]}if(a>t)throw new Error("Cannot access data "+a+" levels up, current level is "+t);if(s="data"+(t-a||""),!i)return s}for(var o=s,c=i.split("/"),l=0;l<c.length;l++){var u=c[l];u&&(s+=un(yn(u)),o+=" && "+s)}return o},unescapeFragment:function(e){return yn(decodeURIComponent(e))},unescapeJsonPointer:yn,escapeFragment:function(e){return encodeURIComponent(vn(e))},escapeJsonPointer:vn};function sn(e,t,r,a){var i=a?" !== ":" === ",s=a?" || ":" && ",n=a?"!":"",o=a?"":"!";switch(e){case"null":return t+i+"null";case"array":return n+"Array.isArray("+t+")";case"object":return"("+n+t+s+"typeof "+t+i+'"object"'+s+o+"Array.isArray("+t+"))";case"integer":return"(typeof "+t+i+'"number"'+s+o+"("+t+" % 1)"+s+t+i+t+(r?s+n+"isFinite("+t+")":"")+")";case"number":return"(typeof "+t+i+'"'+e+'"'+(r?s+n+"isFinite("+t+")":"")+")";default:return"typeof "+t+i+'"'+e+'"'}}var nn=on(["string","number","integer","boolean","null"]);function on(e){for(var t={},r=0;r<e.length;r++)t[e[r]]=!0;return t}var cn=/^[a-z$_][a-z$_0-9]*$/i,ln=/'|\\/g;function un(e){return"number"==typeof e?"["+e+"]":cn.test(e)?"."+e:"['"+dn(e)+"']"}function dn(e){return e.replace(ln,"\\$&").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\f/g,"\\f").replace(/\t/g,"\\t")}function hn(e){return"'"+dn(e)+"'"}var pn=/^\/(?:[^~]|~0|~1)*$/,fn=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function mn(e,t){return'""'==e?t:(e+" + "+t).replace(/([^\\])' \+ '/g,"$1")}function vn(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}function yn(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}var gn=function(e){an.copy(e,this)};var bn=Ls((function(e){var t=e.exports=function(e,r,a){"function"==typeof r&&(a=r,r={}),function e(r,a,i,s,n,o,c,l,u,d){if(s&&"object"==typeof s&&!Array.isArray(s)){for(var h in a(s,n,o,c,l,u,d),s){var p=s[h];if(Array.isArray(p)){if(h in t.arrayKeywords)for(var f=0;f<p.length;f++)e(r,a,i,p[f],n+"/"+h+"/"+f,o,n,h,s,f)}else if(h in t.propsKeywords){if(p&&"object"==typeof p)for(var m in p)e(r,a,i,p[m],n+"/"+h+"/"+m.replace(/~/g,"~0").replace(/\//g,"~1"),o,n,h,s,m)}else(h in t.keywords||r.allKeys&&!(h in t.skipKeywords))&&e(r,a,i,p,n+"/"+h,o,n,h,s)}i(s,n,o,c,l,u,d)}}(r,"function"==typeof(a=r.cb||a)?a:a.pre||function(){},a.post||function(){},e,"",e)};t.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0},t.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},t.propsKeywords={definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},t.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0}})),_n=wn;function wn(e,t,r){var a=this._refs[r];if("string"==typeof a){if(!this._refs[a])return wn.call(this,e,t,a);a=this._refs[a]}if((a=a||this._schemas[r])instanceof gn)return $n(a.schema,this._opts.inlineRefs)?a.schema:a.validate||this._compile(a);var i,s,n,o=Pn.call(this,t,r);return o&&(i=o.schema,t=o.root,n=o.baseId),i instanceof gn?s=i.validate||e.call(this,i.schema,t,void 0,n):void 0!==i&&(s=$n(i,this._opts.inlineRefs)?i:e.call(this,i,t,void 0,n)),s}function Pn(e,t){var r=tn.parse(t),a=An(r),i=On(this._getId(e.schema));if(0===Object.keys(e.schema).length||a!==i){var s=Fn(a),n=this._refs[s];if("string"==typeof n)return En.call(this,e,n,r);if(n instanceof gn)n.validate||this._compile(n),e=n;else{if(!((n=this._schemas[s])instanceof gn))return;if(n.validate||this._compile(n),s==Fn(t))return{schema:n,root:e,baseId:i};e=n}if(!e.schema)return;i=On(this._getId(e.schema))}return jn.call(this,r,i,e.schema,e)}function En(e,t,r){var a=Pn.call(this,e,t);if(a){var i=a.schema,s=a.baseId;e=a.root;var n=this._getId(i);return n&&(s=Cn(s,n)),jn.call(this,r,s,i,e)}}wn.normalizeId=Fn,wn.fullPath=On,wn.url=Cn,wn.ids=function(e){var t=Fn(this._getId(e)),r={"":t},a={"":On(t,!1)},i={},s=this;return bn(e,{allKeys:!0},(function(e,t,n,o,c,l,u){if(""!==t){var d=s._getId(e),h=r[o],p=a[o]+"/"+c;if(void 0!==u&&(p+="/"+("number"==typeof u?u:an.escapeFragment(u))),"string"==typeof d){d=h=Fn(h?tn.resolve(h,d):d);var f=s._refs[d];if("string"==typeof f&&(f=s._refs[f]),f&&f.schema){if(!rn(e,f.schema))throw new Error('id "'+d+'" resolves to more than one schema')}else if(d!=Fn(p))if("#"==d[0]){if(i[d]&&!rn(e,i[d]))throw new Error('id "'+d+'" resolves to more than one schema');i[d]=e}else s._refs[d]=p}r[t]=h,a[t]=p}})),i},wn.inlineRef=$n,wn.schema=Pn;var Sn=an.toHash(["properties","patternProperties","enum","dependencies","definitions"]);function jn(e,t,r,a){if(e.fragment=e.fragment||"","/"==e.fragment.slice(0,1)){for(var i=e.fragment.split("/"),s=1;s<i.length;s++){var n=i[s];if(n){if(void 0===(r=r[n=an.unescapeFragment(n)]))break;var o;if(!Sn[n]&&((o=this._getId(r))&&(t=Cn(t,o)),r.$ref)){var c=Cn(t,r.$ref),l=Pn.call(this,a,c);l&&(r=l.schema,a=l.root,t=l.baseId)}}}return void 0!==r&&r!==a.schema?{schema:r,root:a,baseId:t}:void 0}}var xn=an.toHash(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum"]);function $n(e,t){return!1!==t&&(void 0===t||!0===t?function e(t){var r;if(Array.isArray(t)){for(var a=0;a<t.length;a++)if("object"==typeof(r=t[a])&&!e(r))return!1}else for(var i in t){if("$ref"==i)return!1;if("object"==typeof(r=t[i])&&!e(r))return!1}return!0}(e):t?function e(t){var r,a=0;if(Array.isArray(t)){for(var i=0;i<t.length;i++)if("object"==typeof(r=t[i])&&(a+=e(r)),a==1/0)return 1/0}else for(var s in t){if("$ref"==s)return 1/0;if(xn[s])a++;else if("object"==typeof(r=t[s])&&(a+=e(r)+1),a==1/0)return 1/0}return a}(e)<=t:void 0)}function On(e,t){return!1!==t&&(e=Fn(e)),An(tn.parse(e))}function An(e){return tn.serialize(e).split("#")[0]+"#"}var kn=/#\/?$/;function Fn(e){return e?e.replace(kn,""):""}function Cn(e,t){return t=Fn(t),tn.resolve(e,t)}var Dn={Validation:In((function(e){this.message="validation failed",this.errors=e,this.ajv=this.validation=!0})),MissingRef:In(Rn)};function Rn(e,t,r){this.message=r||Rn.message(e,t),this.missingRef=_n.url(e,t),this.missingSchema=_n.normalizeId(_n.fullPath(this.missingRef))}function In(e){return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}Rn.message=function(e,t){return"can't resolve reference "+t+" from id "+e};var zn=function(e,t){t||(t={}),"function"==typeof t&&(t={cmp:t});var r,a="boolean"==typeof t.cycles&&t.cycles,i=t.cmp&&(r=t.cmp,function(e){return function(t,a){var i={key:t,value:e[t]},s={key:a,value:e[a]};return r(i,s)}}),s=[];return function e(t){if(t&&t.toJSON&&"function"==typeof t.toJSON&&(t=t.toJSON()),void 0!==t){if("number"==typeof t)return isFinite(t)?""+t:"null";if("object"!=typeof t)return JSON.stringify(t);var r,n;if(Array.isArray(t)){for(n="[",r=0;r<t.length;r++)r&&(n+=","),n+=e(t[r])||"null";return n+"]"}if(null===t)return"null";if(-1!==s.indexOf(t)){if(a)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var o=s.push(t)-1,c=Object.keys(t).sort(i&&i(t));for(n="",r=0;r<c.length;r++){var l=c[r],u=e(t[l]);u&&(n&&(n+=","),n+=JSON.stringify(l)+":"+u)}return s.splice(o,1),"{"+n+"}"}}(e)},Nn=function(e,t,r){var a="",i=!0===e.schema.$async,s=e.util.schemaHasRulesExcept(e.schema,e.RULES.all,"$ref"),n=e.self._getId(e.schema);if(e.opts.strictKeywords){var o=e.util.schemaUnknownRules(e.schema,e.RULES.keywords);if(o){var c="unknown keyword: "+o;if("log"!==e.opts.strictKeywords)throw new Error(c);e.logger.warn(c)}}if(e.isTop&&(a+=" var validate = ",i&&(e.async=!0,a+="async "),a+="function(data, dataPath, parentData, parentDataProperty, rootData) { 'use strict'; ",n&&(e.opts.sourceCode||e.opts.processCode)&&(a+=" /*# sourceURL="+n+" */ ")),"boolean"==typeof e.schema||!s&&!e.schema.$ref){var l=e.level,u=e.dataLevel,d=e.schema["false schema"],h=e.schemaPath+e.util.getProperty("false schema"),p=e.errSchemaPath+"/false schema",f=!e.opts.allErrors,m="data"+(u||""),v="valid"+l;if(!1===e.schema){e.isTop?f=!0:a+=" var "+v+" = false; ",(W=W||[]).push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'false schema' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: {} ",!1!==e.opts.messages&&(a+=" , message: 'boolean schema is false' "),e.opts.verbose&&(a+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),a+=" } "):a+=" {} ";var y=a;a=W.pop(),!e.compositeRule&&f?e.async?a+=" throw new ValidationError(["+y+"]); ":a+=" validate.errors = ["+y+"]; return false; ":a+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else e.isTop?a+=i?" return data; ":" validate.errors = null; return true; ":a+=" var "+v+" = true; ";return e.isTop&&(a+=" }; return validate; "),a}if(e.isTop){var g=e.isTop;l=e.level=0,u=e.dataLevel=0,m="data";if(e.rootId=e.resolve.fullPath(e.self._getId(e.root.schema)),e.baseId=e.baseId||e.rootId,delete e.isTop,e.dataPathArr=[void 0],void 0!==e.schema.default&&e.opts.useDefaults&&e.opts.strictDefaults){var b="default is ignored in the schema root";if("log"!==e.opts.strictDefaults)throw new Error(b);e.logger.warn(b)}a+=" var vErrors = null; ",a+=" var errors = 0;     ",a+=" if (rootData === undefined) rootData = data; "}else{l=e.level,m="data"+((u=e.dataLevel)||"");if(n&&(e.baseId=e.resolve.url(e.baseId,n)),i&&!e.async)throw new Error("async schema in sync schema");a+=" var errs_"+l+" = errors;"}v="valid"+l,f=!e.opts.allErrors;var _="",w="",P=e.schema.type,E=Array.isArray(P);if(P&&e.opts.nullable&&!0===e.schema.nullable&&(E?-1==P.indexOf("null")&&(P=P.concat("null")):"null"!=P&&(P=[P,"null"],E=!0)),E&&1==P.length&&(P=P[0],E=!1),e.schema.$ref&&s){if("fail"==e.opts.extendRefs)throw new Error('$ref: validation keywords used in schema at path "'+e.errSchemaPath+'" (see option extendRefs)');!0!==e.opts.extendRefs&&(s=!1,e.logger.warn('$ref: keywords ignored in schema at path "'+e.errSchemaPath+'"'))}if(e.schema.$comment&&e.opts.$comment&&(a+=" "+e.RULES.all.$comment.code(e,"$comment")),P){if(e.opts.coerceTypes)var S=e.util.coerceToTypes(e.opts.coerceTypes,P);var j=e.RULES.types[P];if(S||E||!0===j||j&&!Z(j)){h=e.schemaPath+".type",p=e.errSchemaPath+"/type",h=e.schemaPath+".type",p=e.errSchemaPath+"/type";var x=E?"checkDataTypes":"checkDataType";if(a+=" if ("+e.util[x](P,m,e.opts.strictNumbers,!0)+") { ",S){var $="dataType"+l,O="coerced"+l;a+=" var "+$+" = typeof "+m+"; var "+O+" = undefined; ","array"==e.opts.coerceTypes&&(a+=" if ("+$+" == 'object' && Array.isArray("+m+") && "+m+".length == 1) { "+m+" = "+m+"[0]; "+$+" = typeof "+m+"; if ("+e.util.checkDataType(e.schema.type,m,e.opts.strictNumbers)+") "+O+" = "+m+"; } "),a+=" if ("+O+" !== undefined) ; ";var A=S;if(A)for(var k,F=-1,C=A.length-1;F<C;)"string"==(k=A[F+=1])?a+=" else if ("+$+" == 'number' || "+$+" == 'boolean') "+O+" = '' + "+m+"; else if ("+m+" === null) "+O+" = ''; ":"number"==k||"integer"==k?(a+=" else if ("+$+" == 'boolean' || "+m+" === null || ("+$+" == 'string' && "+m+" && "+m+" == +"+m+" ","integer"==k&&(a+=" && !("+m+" % 1)"),a+=")) "+O+" = +"+m+"; "):"boolean"==k?a+=" else if ("+m+" === 'false' || "+m+" === 0 || "+m+" === null) "+O+" = false; else if ("+m+" === 'true' || "+m+" === 1) "+O+" = true; ":"null"==k?a+=" else if ("+m+" === '' || "+m+" === 0 || "+m+" === false) "+O+" = null; ":"array"==e.opts.coerceTypes&&"array"==k&&(a+=" else if ("+$+" == 'string' || "+$+" == 'number' || "+$+" == 'boolean' || "+m+" == null) "+O+" = ["+m+"]; ");a+=" else {   ",(W=W||[]).push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'type' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: { type: '",a+=E?""+P.join(","):""+P,a+="' } ",!1!==e.opts.messages&&(a+=" , message: 'should be ",a+=E?""+P.join(","):""+P,a+="' "),e.opts.verbose&&(a+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),a+=" } "):a+=" {} ";y=a;a=W.pop(),!e.compositeRule&&f?e.async?a+=" throw new ValidationError(["+y+"]); ":a+=" validate.errors = ["+y+"]; return false; ":a+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+=" } if ("+O+" !== undefined) {  ";var D=u?"data"+(u-1||""):"parentData";a+=" "+m+" = "+O+"; ",u||(a+="if ("+D+" !== undefined)"),a+=" "+D+"["+(u?e.dataPathArr[u]:"parentDataProperty")+"] = "+O+"; } "}else{(W=W||[]).push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'type' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: { type: '",a+=E?""+P.join(","):""+P,a+="' } ",!1!==e.opts.messages&&(a+=" , message: 'should be ",a+=E?""+P.join(","):""+P,a+="' "),e.opts.verbose&&(a+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),a+=" } "):a+=" {} ";y=a;a=W.pop(),!e.compositeRule&&f?e.async?a+=" throw new ValidationError(["+y+"]); ":a+=" validate.errors = ["+y+"]; return false; ":a+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}a+=" } "}}if(e.schema.$ref&&!s)a+=" "+e.RULES.all.$ref.code(e,"$ref")+" ",f&&(a+=" } if (errors === ",a+=g?"0":"errs_"+l,a+=") { ",w+="}");else{var R=e.RULES;if(R)for(var I=-1,z=R.length-1;I<z;)if(Z(j=R[I+=1])){if(j.type&&(a+=" if ("+e.util.checkDataType(j.type,m,e.opts.strictNumbers)+") { "),e.opts.useDefaults)if("object"==j.type&&e.schema.properties){d=e.schema.properties;var N=Object.keys(d);if(N)for(var T,L=-1,U=N.length-1;L<U;){if(void 0!==(M=d[T=N[L+=1]]).default){var q=m+e.util.getProperty(T);if(e.compositeRule){if(e.opts.strictDefaults){b="default is ignored for: "+q;if("log"!==e.opts.strictDefaults)throw new Error(b);e.logger.warn(b)}}else a+=" if ("+q+" === undefined ","empty"==e.opts.useDefaults&&(a+=" || "+q+" === null || "+q+" === '' "),a+=" ) "+q+" = ","shared"==e.opts.useDefaults?a+=" "+e.useDefault(M.default)+" ":a+=" "+JSON.stringify(M.default)+" ",a+="; "}}}else if("array"==j.type&&Array.isArray(e.schema.items)){var V=e.schema.items;if(V){F=-1;for(var M,H=V.length-1;F<H;)if(void 0!==(M=V[F+=1]).default){q=m+"["+F+"]";if(e.compositeRule){if(e.opts.strictDefaults){b="default is ignored for: "+q;if("log"!==e.opts.strictDefaults)throw new Error(b);e.logger.warn(b)}}else a+=" if ("+q+" === undefined ","empty"==e.opts.useDefaults&&(a+=" || "+q+" === null || "+q+" === '' "),a+=" ) "+q+" = ","shared"==e.opts.useDefaults?a+=" "+e.useDefault(M.default)+" ":a+=" "+JSON.stringify(M.default)+" ",a+="; "}}}var Q=j.rules;if(Q)for(var B,G=-1,K=Q.length-1;G<K;)if(Y(B=Q[G+=1])){var J=B.code(e,B.keyword,j.type);J&&(a+=" "+J+" ",f&&(_+="}"))}if(f&&(a+=" "+_+" ",_=""),j.type&&(a+=" } ",P&&P===j.type&&!S)){a+=" else { ";var W;h=e.schemaPath+".type",p=e.errSchemaPath+"/type";(W=W||[]).push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'type' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: { type: '",a+=E?""+P.join(","):""+P,a+="' } ",!1!==e.opts.messages&&(a+=" , message: 'should be ",a+=E?""+P.join(","):""+P,a+="' "),e.opts.verbose&&(a+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),a+=" } "):a+=" {} ";y=a;a=W.pop(),!e.compositeRule&&f?e.async?a+=" throw new ValidationError(["+y+"]); ":a+=" validate.errors = ["+y+"]; return false; ":a+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+=" } "}f&&(a+=" if (errors === ",a+=g?"0":"errs_"+l,a+=") { ",w+="}")}}function Z(e){for(var t=e.rules,r=0;r<t.length;r++)if(Y(t[r]))return!0}function Y(t){return void 0!==e.schema[t.keyword]||t.implements&&function(t){for(var r=t.implements,a=0;a<r.length;a++)if(void 0!==e.schema[r[a]])return!0}(t)}return f&&(a+=" "+w+" "),g?(i?(a+=" if (errors === 0) return data;           ",a+=" else throw new ValidationError(vErrors); "):(a+=" validate.errors = vErrors; ",a+=" return errors === 0;       "),a+=" }; return validate;"):a+=" var "+v+" = errors === errs_"+l+";",a},Tn=an.ucs2length,Ln=Dn.Validation,Un=function e(t,r,a,i){var s=this,n=this._opts,o=[void 0],c={},l=[],u={},d=[],h={},p=[];r=r||{schema:t,refVal:o,refs:c};var f=qn.call(this,t,r,i),m=this._compilations[f.index];if(f.compiling)return m.callValidate=function e(){var t=m.validate,r=t.apply(this,arguments);return e.errors=t.errors,r};var v=this._formats,y=this.RULES;try{var g=_(t,r,a,i);m.validate=g;var b=m.callValidate;return b&&(b.schema=g.schema,b.errors=null,b.refs=g.refs,b.refVal=g.refVal,b.root=g.root,b.$async=g.$async,n.sourceCode&&(b.source=g.source)),g}finally{Vn.call(this,t,r,i)}function _(t,a,i,u){var h=!a||a&&a.schema==t;if(a.schema!=r.schema)return e.call(s,t,a,i,u);var f,m=!0===t.$async,g=Nn({isTop:!0,schema:t,isRoot:h,baseId:u,root:a,schemaPath:"",errSchemaPath:"#",errorPath:'""',MissingRefError:Dn.MissingRef,RULES:y,validate:Nn,util:an,resolve:_n,resolveRef:w,usePattern:S,useDefault:j,useCustomRule:x,opts:n,formats:v,logger:s.logger,self:s});g=Kn(o,Bn)+Kn(l,Hn)+Kn(d,Qn)+Kn(p,Gn)+g,n.processCode&&(g=n.processCode(g,t));try{f=new Function("self","RULES","formats","root","refVal","defaults","customRules","equal","ucs2length","ValidationError",g)(s,y,v,r,o,d,p,rn,Tn,Ln),o[0]=f}catch(e){throw s.logger.error("Error compiling schema, function code:",g),e}return f.schema=t,f.errors=null,f.refs=c,f.refVal=o,f.root=h?f:a,m&&(f.$async=!0),!0===n.sourceCode&&(f.source={code:g,patterns:l,defaults:d}),f}function w(t,i,l){i=_n.url(t,i);var u,d,h=c[i];if(void 0!==h)return E(u=o[h],d="refVal["+h+"]");if(!l&&r.refs){var p=r.refs[i];if(void 0!==p)return E(u=r.refVal[p],d=P(i,u))}d=P(i);var f=_n.call(s,_,r,i);if(void 0===f){var m=a&&a[i];m&&(f=_n.inlineRef(m,n.inlineRefs)?m:e.call(s,m,r,a,t))}if(void 0!==f)return function(e,t){var r=c[e];o[r]=t}(i,f),E(f,d);!function(e){delete c[e]}(i)}function P(e,t){var r=o.length;return o[r]=t,c[e]=r,"refVal"+r}function E(e,t){return"object"==typeof e||"boolean"==typeof e?{code:t,schema:e,inline:!0}:{code:t,$async:e&&!!e.$async}}function S(e){var t=u[e];return void 0===t&&(t=u[e]=l.length,l[t]=e),"pattern"+t}function j(e){switch(typeof e){case"boolean":case"number":return""+e;case"string":return an.toQuotedString(e);case"object":if(null===e)return"null";var t=zn(e),r=h[t];return void 0===r&&(r=h[t]=d.length,d[r]=e),"default"+r}}function x(e,t,r,a){if(!1!==s._opts.validateSchema){var i=e.definition.dependencies;if(i&&!i.every((function(e){return Object.prototype.hasOwnProperty.call(r,e)})))throw new Error("parent schema must have all required keywords: "+i.join(","));var o=e.definition.validateSchema;if(o)if(!o(t)){var c="keyword schema is invalid: "+s.errorsText(o.errors);if("log"!=s._opts.validateSchema)throw new Error(c);s.logger.error(c)}}var l,u=e.definition.compile,d=e.definition.inline,h=e.definition.macro;if(u)l=u.call(s,t,r,a);else if(h)l=h.call(s,t,r,a),!1!==n.validateSchema&&s.validateSchema(l,!0);else if(d)l=d.call(s,a,e.keyword,t,r);else if(!(l=e.definition.validate))return;if(void 0===l)throw new Error('custom keyword "'+e.keyword+'"failed to compile');var f=p.length;return p[f]=l,{code:"customRule"+f,validate:l}}};function qn(e,t,r){var a=Mn.call(this,e,t,r);return a>=0?{index:a,compiling:!0}:(a=this._compilations.length,this._compilations[a]={schema:e,root:t,baseId:r},{index:a,compiling:!1})}function Vn(e,t,r){var a=Mn.call(this,e,t,r);a>=0&&this._compilations.splice(a,1)}function Mn(e,t,r){for(var a=0;a<this._compilations.length;a++){var i=this._compilations[a];if(i.schema==e&&i.root==t&&i.baseId==r)return a}return-1}function Hn(e,t){return"var pattern"+e+" = new RegExp("+an.toQuotedString(t[e])+");"}function Qn(e){return"var default"+e+" = defaults["+e+"];"}function Bn(e,t){return void 0===t[e]?"":"var refVal"+e+" = refVal["+e+"];"}function Gn(e){return"var customRule"+e+" = customRules["+e+"];"}function Kn(e,t){if(!e.length)return"";for(var r="",a=0;a<e.length;a++)r+=t(a,e);return r}var Jn=Ls((function(e){var t=e.exports=function(){this._cache={}};t.prototype.put=function(e,t){this._cache[e]=t},t.prototype.get=function(e){return this._cache[e]},t.prototype.del=function(e){delete this._cache[e]},t.prototype.clear=function(){this._cache={}}})),Wn=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,Zn=[0,31,28,31,30,31,30,31,31,30,31,30,31],Yn=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i,Xn=/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,eo=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,to=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,ro=/^(?:(?:http[s\u017F]?|ftp):\/\/)(?:(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+(?::(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?@)?(?:(?!10(?:\.[0-9]{1,3}){3})(?!127(?:\.[0-9]{1,3}){3})(?!169\.254(?:\.[0-9]{1,3}){2})(?!192\.168(?:\.[0-9]{1,3}){2})(?!172\.(?:1[6-9]|2[0-9]|3[01])(?:\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-?)*(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)(?:\.(?:(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-?)*(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)*(?:\.(?:(?:[KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\/(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?$/i,ao=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,io=/^(?:\/(?:[^~/]|~0|~1)*)*$/,so=/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,no=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,oo=co;function co(e){return e="full"==e?"full":"fast",an.copy(co[e])}function lo(e){var t=e.match(Wn);if(!t)return!1;var r=+t[1],a=+t[2],i=+t[3];return a>=1&&a<=12&&i>=1&&i<=(2==a&&function(e){return e%4==0&&(e%100!=0||e%400==0)}(r)?29:Zn[a])}function uo(e,t){var r=e.match(Yn);if(!r)return!1;var a=r[1],i=r[2],s=r[3],n=r[5];return(a<=23&&i<=59&&s<=59||23==a&&59==i&&60==s)&&(!t||n)}co.fast={date:/^\d\d\d\d-[0-1]\d-[0-3]\d$/,time:/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,"date-time":/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,uri:/^(?:[a-z][a-z0-9+-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,"uri-template":to,url:ro,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,hostname:Xn,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:mo,uuid:ao,"json-pointer":io,"json-pointer-uri-fragment":so,"relative-json-pointer":no},co.full={date:lo,time:uo,"date-time":function(e){var t=e.split(ho);return 2==t.length&&lo(t[0])&&uo(t[1],!0)},uri:function(e){return po.test(e)&&eo.test(e)},"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":to,url:ro,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:Xn,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:mo,uuid:ao,"json-pointer":io,"json-pointer-uri-fragment":so,"relative-json-pointer":no};var ho=/t|\s/i;var po=/\/|:/;var fo=/[^\\]\\Z/;function mo(e){if(fo.test(e))return!1;try{return new RegExp(e),!0}catch(e){return!1}}var vo=function(e,t,r){var a,i=" ",s=e.level,n=e.dataLevel,o=e.schema[t],c=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(n||""),h=e.opts.$data&&o&&o.$data;h?(i+=" var schema"+s+" = "+e.util.getData(o.$data,n,e.dataPathArr)+"; ",a="schema"+s):a=o;var p="maximum"==t,f=p?"exclusiveMaximum":"exclusiveMinimum",m=e.schema[f],v=e.opts.$data&&m&&m.$data,y=p?"<":">",g=p?">":"<",b=void 0;if(!h&&"number"!=typeof o&&void 0!==o)throw new Error(t+" must be number");if(!v&&void 0!==m&&"number"!=typeof m&&"boolean"!=typeof m)throw new Error(f+" must be number or boolean");if(v){var _=e.util.getData(m.$data,n,e.dataPathArr),w="exclusive"+s,P="exclType"+s,E="exclIsNumber"+s,S="' + "+($="op"+s)+" + '";i+=" var schemaExcl"+s+" = "+_+"; ",i+=" var "+w+"; var "+P+" = typeof "+(_="schemaExcl"+s)+"; if ("+P+" != 'boolean' && "+P+" != 'undefined' && "+P+" != 'number') { ";var j;b=f;(j=j||[]).push(i),i="",!1!==e.createErrors?(i+=" { keyword: '"+(b||"_exclusiveLimit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: {} ",!1!==e.opts.messages&&(i+=" , message: '"+f+" should be boolean' "),e.opts.verbose&&(i+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ";var x=i;i=j.pop(),!e.compositeRule&&u?e.async?i+=" throw new ValidationError(["+x+"]); ":i+=" validate.errors = ["+x+"]; return false; ":i+=" var err = "+x+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } else if ( ",h&&(i+=" ("+a+" !== undefined && typeof "+a+" != 'number') || "),i+=" "+P+" == 'number' ? ( ("+w+" = "+a+" === undefined || "+_+" "+y+"= "+a+") ? "+d+" "+g+"= "+_+" : "+d+" "+g+" "+a+" ) : ( ("+w+" = "+_+" === true) ? "+d+" "+g+"= "+a+" : "+d+" "+g+" "+a+" ) || "+d+" !== "+d+") { var op"+s+" = "+w+" ? '"+y+"' : '"+y+"='; ",void 0===o&&(b=f,l=e.errSchemaPath+"/"+f,a=_,h=v)}else{S=y;if((E="number"==typeof m)&&h){var $="'"+S+"'";i+=" if ( ",h&&(i+=" ("+a+" !== undefined && typeof "+a+" != 'number') || "),i+=" ( "+a+" === undefined || "+m+" "+y+"= "+a+" ? "+d+" "+g+"= "+m+" : "+d+" "+g+" "+a+" ) || "+d+" !== "+d+") { "}else{E&&void 0===o?(w=!0,b=f,l=e.errSchemaPath+"/"+f,a=m,g+="="):(E&&(a=Math[p?"min":"max"](m,o)),m===(!E||a)?(w=!0,b=f,l=e.errSchemaPath+"/"+f,g+="="):(w=!1,S+="="));$="'"+S+"'";i+=" if ( ",h&&(i+=" ("+a+" !== undefined && typeof "+a+" != 'number') || "),i+=" "+d+" "+g+" "+a+" || "+d+" !== "+d+") { "}}b=b||t,(j=j||[]).push(i),i="",!1!==e.createErrors?(i+=" { keyword: '"+(b||"_limit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { comparison: "+$+", limit: "+a+", exclusive: "+w+" } ",!1!==e.opts.messages&&(i+=" , message: 'should be "+S+" ",i+=h?"' + "+a:a+"'"),e.opts.verbose&&(i+=" , schema:  ",i+=h?"validate.schema"+c:""+o,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ";x=i;return i=j.pop(),!e.compositeRule&&u?e.async?i+=" throw new ValidationError(["+x+"]); ":i+=" validate.errors = ["+x+"]; return false; ":i+=" var err = "+x+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } ",u&&(i+=" else { "),i},yo=function(e,t,r){var a,i=" ",s=e.level,n=e.dataLevel,o=e.schema[t],c=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(n||""),h=e.opts.$data&&o&&o.$data;if(h?(i+=" var schema"+s+" = "+e.util.getData(o.$data,n,e.dataPathArr)+"; ",a="schema"+s):a=o,!h&&"number"!=typeof o)throw new Error(t+" must be number");i+="if ( ",h&&(i+=" ("+a+" !== undefined && typeof "+a+" != 'number') || "),i+=" "+d+".length "+("maxItems"==t?">":"<")+" "+a+") { ";var p=t,f=f||[];f.push(i),i="",!1!==e.createErrors?(i+=" { keyword: '"+(p||"_limitItems")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { limit: "+a+" } ",!1!==e.opts.messages&&(i+=" , message: 'should NOT have ",i+="maxItems"==t?"more":"fewer",i+=" than ",i+=h?"' + "+a+" + '":""+o,i+=" items' "),e.opts.verbose&&(i+=" , schema:  ",i+=h?"validate.schema"+c:""+o,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ";var m=i;return i=f.pop(),!e.compositeRule&&u?e.async?i+=" throw new ValidationError(["+m+"]); ":i+=" validate.errors = ["+m+"]; return false; ":i+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",u&&(i+=" else { "),i},go=function(e,t,r){var a,i=" ",s=e.level,n=e.dataLevel,o=e.schema[t],c=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(n||""),h=e.opts.$data&&o&&o.$data;if(h?(i+=" var schema"+s+" = "+e.util.getData(o.$data,n,e.dataPathArr)+"; ",a="schema"+s):a=o,!h&&"number"!=typeof o)throw new Error(t+" must be number");var p="maxLength"==t?">":"<";i+="if ( ",h&&(i+=" ("+a+" !== undefined && typeof "+a+" != 'number') || "),!1===e.opts.unicode?i+=" "+d+".length ":i+=" ucs2length("+d+") ",i+=" "+p+" "+a+") { ";var f=t,m=m||[];m.push(i),i="",!1!==e.createErrors?(i+=" { keyword: '"+(f||"_limitLength")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { limit: "+a+" } ",!1!==e.opts.messages&&(i+=" , message: 'should NOT be ",i+="maxLength"==t?"longer":"shorter",i+=" than ",i+=h?"' + "+a+" + '":""+o,i+=" characters' "),e.opts.verbose&&(i+=" , schema:  ",i+=h?"validate.schema"+c:""+o,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ";var v=i;return i=m.pop(),!e.compositeRule&&u?e.async?i+=" throw new ValidationError(["+v+"]); ":i+=" validate.errors = ["+v+"]; return false; ":i+=" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",u&&(i+=" else { "),i},bo=function(e,t,r){var a,i=" ",s=e.level,n=e.dataLevel,o=e.schema[t],c=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(n||""),h=e.opts.$data&&o&&o.$data;if(h?(i+=" var schema"+s+" = "+e.util.getData(o.$data,n,e.dataPathArr)+"; ",a="schema"+s):a=o,!h&&"number"!=typeof o)throw new Error(t+" must be number");i+="if ( ",h&&(i+=" ("+a+" !== undefined && typeof "+a+" != 'number') || "),i+=" Object.keys("+d+").length "+("maxProperties"==t?">":"<")+" "+a+") { ";var p=t,f=f||[];f.push(i),i="",!1!==e.createErrors?(i+=" { keyword: '"+(p||"_limitProperties")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { limit: "+a+" } ",!1!==e.opts.messages&&(i+=" , message: 'should NOT have ",i+="maxProperties"==t?"more":"fewer",i+=" than ",i+=h?"' + "+a+" + '":""+o,i+=" properties' "),e.opts.verbose&&(i+=" , schema:  ",i+=h?"validate.schema"+c:""+o,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ";var m=i;return i=f.pop(),!e.compositeRule&&u?e.async?i+=" throw new ValidationError(["+m+"]); ":i+=" validate.errors = ["+m+"]; return false; ":i+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",u&&(i+=" else { "),i},_o={$ref:function(e,t,r){var a,i,s=" ",n=e.level,o=e.dataLevel,c=e.schema[t],l=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(o||""),h="valid"+n;if("#"==c||"#/"==c)e.isRoot?(a=e.async,i="validate"):(a=!0===e.root.schema.$async,i="root.refVal[0]");else{var p=e.resolveRef(e.baseId,c,e.isRoot);if(void 0===p){var f=e.MissingRefError.message(e.baseId,c);if("fail"==e.opts.missingRefs){e.logger.error(f),(g=g||[]).push(s),s="",!1!==e.createErrors?(s+=" { keyword: '$ref' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { ref: '"+e.util.escapeQuotes(c)+"' } ",!1!==e.opts.messages&&(s+=" , message: 'can\\'t resolve reference "+e.util.escapeQuotes(c)+"' "),e.opts.verbose&&(s+=" , schema: "+e.util.toQuotedString(c)+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),s+=" } "):s+=" {} ";var m=s;s=g.pop(),!e.compositeRule&&u?e.async?s+=" throw new ValidationError(["+m+"]); ":s+=" validate.errors = ["+m+"]; return false; ":s+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",u&&(s+=" if (false) { ")}else{if("ignore"!=e.opts.missingRefs)throw new e.MissingRefError(e.baseId,c,f);e.logger.warn(f),u&&(s+=" if (true) { ")}}else if(p.inline){var v=e.util.copy(e);v.level++;var y="valid"+v.level;v.schema=p.schema,v.schemaPath="",v.errSchemaPath=c,s+=" "+e.validate(v).replace(/validate\.schema/g,p.code)+" ",u&&(s+=" if ("+y+") { ")}else a=!0===p.$async||e.async&&!1!==p.$async,i=p.code}if(i){var g;(g=g||[]).push(s),s="",e.opts.passContext?s+=" "+i+".call(this, ":s+=" "+i+"( ",s+=" "+d+", (dataPath || '')",'""'!=e.errorPath&&(s+=" + "+e.errorPath);var b=s+=" , "+(o?"data"+(o-1||""):"parentData")+" , "+(o?e.dataPathArr[o]:"parentDataProperty")+", rootData)  ";if(s=g.pop(),a){if(!e.async)throw new Error("async schema referenced by sync schema");u&&(s+=" var "+h+"; "),s+=" try { await "+b+"; ",u&&(s+=" "+h+" = true; "),s+=" } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; ",u&&(s+=" "+h+" = false; "),s+=" } ",u&&(s+=" if ("+h+") { ")}else s+=" if (!"+b+") { if (vErrors === null) vErrors = "+i+".errors; else vErrors = vErrors.concat("+i+".errors); errors = vErrors.length; } ",u&&(s+=" else { ")}return s},allOf:function(e,t,r){var a=" ",i=e.schema[t],s=e.schemaPath+e.util.getProperty(t),n=e.errSchemaPath+"/"+t,o=!e.opts.allErrors,c=e.util.copy(e),l="";c.level++;var u="valid"+c.level,d=c.baseId,h=!0,p=i;if(p)for(var f,m=-1,v=p.length-1;m<v;)f=p[m+=1],(e.opts.strictKeywords?"object"==typeof f&&Object.keys(f).length>0:e.util.schemaHasRules(f,e.RULES.all))&&(h=!1,c.schema=f,c.schemaPath=s+"["+m+"]",c.errSchemaPath=n+"/"+m,a+="  "+e.validate(c)+" ",c.baseId=d,o&&(a+=" if ("+u+") { ",l+="}"));return o&&(a+=h?" if (true) { ":" "+l.slice(0,-1)+" "),a},anyOf:function(e,t,r){var a=" ",i=e.level,s=e.dataLevel,n=e.schema[t],o=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,u="data"+(s||""),d="valid"+i,h="errs__"+i,p=e.util.copy(e),f="";p.level++;var m="valid"+p.level;if(n.every((function(t){return e.opts.strictKeywords?"object"==typeof t&&Object.keys(t).length>0:e.util.schemaHasRules(t,e.RULES.all)}))){var v=p.baseId;a+=" var "+h+" = errors; var "+d+" = false;  ";var y=e.compositeRule;e.compositeRule=p.compositeRule=!0;var g=n;if(g)for(var b,_=-1,w=g.length-1;_<w;)b=g[_+=1],p.schema=b,p.schemaPath=o+"["+_+"]",p.errSchemaPath=c+"/"+_,a+="  "+e.validate(p)+" ",p.baseId=v,a+=" "+d+" = "+d+" || "+m+"; if (!"+d+") { ",f+="}";e.compositeRule=p.compositeRule=y,a+=" "+f+" if (!"+d+") {   var err =   ",!1!==e.createErrors?(a+=" { keyword: 'anyOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: {} ",!1!==e.opts.messages&&(a+=" , message: 'should match some schema in anyOf' "),e.opts.verbose&&(a+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ",a+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&l&&(e.async?a+=" throw new ValidationError(vErrors); ":a+=" validate.errors = vErrors; return false; "),a+=" } else {  errors = "+h+"; if (vErrors !== null) { if ("+h+") vErrors.length = "+h+"; else vErrors = null; } ",e.opts.allErrors&&(a+=" } ")}else l&&(a+=" if (true) { ");return a},$comment:function(e,t,r){var a=" ",i=e.schema[t],s=e.errSchemaPath+"/"+t,n=(e.opts.allErrors,e.util.toQuotedString(i));return!0===e.opts.$comment?a+=" console.log("+n+");":"function"==typeof e.opts.$comment&&(a+=" self._opts.$comment("+n+", "+e.util.toQuotedString(s)+", validate.root.schema);"),a},const:function(e,t,r){var a=" ",i=e.level,s=e.dataLevel,n=e.schema[t],o=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,u="data"+(s||""),d="valid"+i,h=e.opts.$data&&n&&n.$data;h&&(a+=" var schema"+i+" = "+e.util.getData(n.$data,s,e.dataPathArr)+"; "),h||(a+=" var schema"+i+" = validate.schema"+o+";"),a+="var "+d+" = equal("+u+", schema"+i+"); if (!"+d+") {   ";var p=p||[];p.push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'const' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { allowedValue: schema"+i+" } ",!1!==e.opts.messages&&(a+=" , message: 'should be equal to constant' "),e.opts.verbose&&(a+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ";var f=a;return a=p.pop(),!e.compositeRule&&l?e.async?a+=" throw new ValidationError(["+f+"]); ":a+=" validate.errors = ["+f+"]; return false; ":a+=" var err = "+f+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+=" }",l&&(a+=" else { "),a},contains:function(e,t,r){var a=" ",i=e.level,s=e.dataLevel,n=e.schema[t],o=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,u="data"+(s||""),d="valid"+i,h="errs__"+i,p=e.util.copy(e);p.level++;var f="valid"+p.level,m="i"+i,v=p.dataLevel=e.dataLevel+1,y="data"+v,g=e.baseId,b=e.opts.strictKeywords?"object"==typeof n&&Object.keys(n).length>0:e.util.schemaHasRules(n,e.RULES.all);if(a+="var "+h+" = errors;var "+d+";",b){var _=e.compositeRule;e.compositeRule=p.compositeRule=!0,p.schema=n,p.schemaPath=o,p.errSchemaPath=c,a+=" var "+f+" = false; for (var "+m+" = 0; "+m+" < "+u+".length; "+m+"++) { ",p.errorPath=e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers,!0);var w=u+"["+m+"]";p.dataPathArr[v]=m;var P=e.validate(p);p.baseId=g,e.util.varOccurences(P,y)<2?a+=" "+e.util.varReplace(P,y,w)+" ":a+=" var "+y+" = "+w+"; "+P+" ",a+=" if ("+f+") break; }  ",e.compositeRule=p.compositeRule=_,a+="  if (!"+f+") {"}else a+=" if ("+u+".length == 0) {";var E=E||[];E.push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'contains' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: {} ",!1!==e.opts.messages&&(a+=" , message: 'should contain a valid item' "),e.opts.verbose&&(a+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ";var S=a;return a=E.pop(),!e.compositeRule&&l?e.async?a+=" throw new ValidationError(["+S+"]); ":a+=" validate.errors = ["+S+"]; return false; ":a+=" var err = "+S+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+=" } else { ",b&&(a+="  errors = "+h+"; if (vErrors !== null) { if ("+h+") vErrors.length = "+h+"; else vErrors = null; } "),e.opts.allErrors&&(a+=" } "),a},dependencies:function(e,t,r){var a=" ",i=e.level,s=e.dataLevel,n=e.schema[t],o=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,u="data"+(s||""),d="errs__"+i,h=e.util.copy(e),p="";h.level++;var f="valid"+h.level,m={},v={},y=e.opts.ownProperties;for(w in n)if("__proto__"!=w){var g=n[w],b=Array.isArray(g)?v:m;b[w]=g}a+="var "+d+" = errors;";var _=e.errorPath;for(var w in a+="var missing"+i+";",v)if((b=v[w]).length){if(a+=" if ( "+u+e.util.getProperty(w)+" !== undefined ",y&&(a+=" && Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(w)+"') "),l){a+=" && ( ";var P=b;if(P)for(var E=-1,S=P.length-1;E<S;){k=P[E+=1],E&&(a+=" || "),a+=" ( ( "+(R=u+(D=e.util.getProperty(k)))+" === undefined ",y&&(a+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(k)+"') "),a+=") && (missing"+i+" = "+e.util.toQuotedString(e.opts.jsonPointers?k:D)+") ) "}a+=")) {  ";var j="missing"+i,x="' + "+j+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(_,j,!0):_+" + "+j);var $=$||[];$.push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { property: '"+e.util.escapeQuotes(w)+"', missingProperty: '"+x+"', depsCount: "+b.length+", deps: '"+e.util.escapeQuotes(1==b.length?b[0]:b.join(", "))+"' } ",!1!==e.opts.messages&&(a+=" , message: 'should have ",1==b.length?a+="property "+e.util.escapeQuotes(b[0]):a+="properties "+e.util.escapeQuotes(b.join(", ")),a+=" when property "+e.util.escapeQuotes(w)+" is present' "),e.opts.verbose&&(a+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ";var O=a;a=$.pop(),!e.compositeRule&&l?e.async?a+=" throw new ValidationError(["+O+"]); ":a+=" validate.errors = ["+O+"]; return false; ":a+=" var err = "+O+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else{a+=" ) { ";var A=b;if(A)for(var k,F=-1,C=A.length-1;F<C;){k=A[F+=1];var D=e.util.getProperty(k),R=(x=e.util.escapeQuotes(k),u+D);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(_,k,e.opts.jsonPointers)),a+=" if ( "+R+" === undefined ",y&&(a+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(k)+"') "),a+=") {  var err =   ",!1!==e.createErrors?(a+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { property: '"+e.util.escapeQuotes(w)+"', missingProperty: '"+x+"', depsCount: "+b.length+", deps: '"+e.util.escapeQuotes(1==b.length?b[0]:b.join(", "))+"' } ",!1!==e.opts.messages&&(a+=" , message: 'should have ",1==b.length?a+="property "+e.util.escapeQuotes(b[0]):a+="properties "+e.util.escapeQuotes(b.join(", ")),a+=" when property "+e.util.escapeQuotes(w)+" is present' "),e.opts.verbose&&(a+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ",a+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}a+=" }   ",l&&(p+="}",a+=" else { ")}e.errorPath=_;var I=h.baseId;for(var w in m){g=m[w];(e.opts.strictKeywords?"object"==typeof g&&Object.keys(g).length>0:e.util.schemaHasRules(g,e.RULES.all))&&(a+=" "+f+" = true; if ( "+u+e.util.getProperty(w)+" !== undefined ",y&&(a+=" && Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(w)+"') "),a+=") { ",h.schema=g,h.schemaPath=o+e.util.getProperty(w),h.errSchemaPath=c+"/"+e.util.escapeFragment(w),a+="  "+e.validate(h)+" ",h.baseId=I,a+=" }  ",l&&(a+=" if ("+f+") { ",p+="}"))}return l&&(a+="   "+p+" if ("+d+" == errors) {"),a},enum:function(e,t,r){var a=" ",i=e.level,s=e.dataLevel,n=e.schema[t],o=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,u="data"+(s||""),d="valid"+i,h=e.opts.$data&&n&&n.$data;h&&(a+=" var schema"+i+" = "+e.util.getData(n.$data,s,e.dataPathArr)+"; ");var p="i"+i,f="schema"+i;h||(a+=" var "+f+" = validate.schema"+o+";"),a+="var "+d+";",h&&(a+=" if (schema"+i+" === undefined) "+d+" = true; else if (!Array.isArray(schema"+i+")) "+d+" = false; else {"),a+=d+" = false;for (var "+p+"=0; "+p+"<"+f+".length; "+p+"++) if (equal("+u+", "+f+"["+p+"])) { "+d+" = true; break; }",h&&(a+="  }  "),a+=" if (!"+d+") {   ";var m=m||[];m.push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'enum' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { allowedValues: schema"+i+" } ",!1!==e.opts.messages&&(a+=" , message: 'should be equal to one of the allowed values' "),e.opts.verbose&&(a+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ";var v=a;return a=m.pop(),!e.compositeRule&&l?e.async?a+=" throw new ValidationError(["+v+"]); ":a+=" validate.errors = ["+v+"]; return false; ":a+=" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+=" }",l&&(a+=" else { "),a},format:function(e,t,r){var a=" ",i=e.level,s=e.dataLevel,n=e.schema[t],o=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,u="data"+(s||"");if(!1===e.opts.format)return l&&(a+=" if (true) { "),a;var d,h=e.opts.$data&&n&&n.$data;h?(a+=" var schema"+i+" = "+e.util.getData(n.$data,s,e.dataPathArr)+"; ",d="schema"+i):d=n;var p=e.opts.unknownFormats,f=Array.isArray(p);if(h){a+=" var "+(m="format"+i)+" = formats["+d+"]; var "+(v="isObject"+i)+" = typeof "+m+" == 'object' && !("+m+" instanceof RegExp) && "+m+".validate; var "+(y="formatType"+i)+" = "+v+" && "+m+".type || 'string'; if ("+v+") { ",e.async&&(a+=" var async"+i+" = "+m+".async; "),a+=" "+m+" = "+m+".validate; } if (  ",h&&(a+=" ("+d+" !== undefined && typeof "+d+" != 'string') || "),a+=" (","ignore"!=p&&(a+=" ("+d+" && !"+m+" ",f&&(a+=" && self._opts.unknownFormats.indexOf("+d+") == -1 "),a+=") || "),a+=" ("+m+" && "+y+" == '"+r+"' && !(typeof "+m+" == 'function' ? ",e.async?a+=" (async"+i+" ? await "+m+"("+u+") : "+m+"("+u+")) ":a+=" "+m+"("+u+") ",a+=" : "+m+".test("+u+"))))) {"}else{var m;if(!(m=e.formats[n])){if("ignore"==p)return e.logger.warn('unknown format "'+n+'" ignored in schema at path "'+e.errSchemaPath+'"'),l&&(a+=" if (true) { "),a;if(f&&p.indexOf(n)>=0)return l&&(a+=" if (true) { "),a;throw new Error('unknown format "'+n+'" is used in schema at path "'+e.errSchemaPath+'"')}var v,y=(v="object"==typeof m&&!(m instanceof RegExp)&&m.validate)&&m.type||"string";if(v){var g=!0===m.async;m=m.validate}if(y!=r)return l&&(a+=" if (true) { "),a;if(g){if(!e.async)throw new Error("async format in sync schema");a+=" if (!(await "+(b="formats"+e.util.getProperty(n)+".validate")+"("+u+"))) { "}else{a+=" if (! ";var b="formats"+e.util.getProperty(n);v&&(b+=".validate"),a+="function"==typeof m?" "+b+"("+u+") ":" "+b+".test("+u+") ",a+=") { "}}var _=_||[];_.push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'format' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { format:  ",a+=h?""+d:""+e.util.toQuotedString(n),a+="  } ",!1!==e.opts.messages&&(a+=" , message: 'should match format \"",a+=h?"' + "+d+" + '":""+e.util.escapeQuotes(n),a+="\"' "),e.opts.verbose&&(a+=" , schema:  ",a+=h?"validate.schema"+o:""+e.util.toQuotedString(n),a+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ";var w=a;return a=_.pop(),!e.compositeRule&&l?e.async?a+=" throw new ValidationError(["+w+"]); ":a+=" validate.errors = ["+w+"]; return false; ":a+=" var err = "+w+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+=" } ",l&&(a+=" else { "),a},if:function(e,t,r){var a=" ",i=e.level,s=e.dataLevel,n=e.schema[t],o=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,u="data"+(s||""),d="valid"+i,h="errs__"+i,p=e.util.copy(e);p.level++;var f="valid"+p.level,m=e.schema.then,v=e.schema.else,y=void 0!==m&&(e.opts.strictKeywords?"object"==typeof m&&Object.keys(m).length>0:e.util.schemaHasRules(m,e.RULES.all)),g=void 0!==v&&(e.opts.strictKeywords?"object"==typeof v&&Object.keys(v).length>0:e.util.schemaHasRules(v,e.RULES.all)),b=p.baseId;if(y||g){var _;p.createErrors=!1,p.schema=n,p.schemaPath=o,p.errSchemaPath=c,a+=" var "+h+" = errors; var "+d+" = true;  ";var w=e.compositeRule;e.compositeRule=p.compositeRule=!0,a+="  "+e.validate(p)+" ",p.baseId=b,p.createErrors=!0,a+="  errors = "+h+"; if (vErrors !== null) { if ("+h+") vErrors.length = "+h+"; else vErrors = null; }  ",e.compositeRule=p.compositeRule=w,y?(a+=" if ("+f+") {  ",p.schema=e.schema.then,p.schemaPath=e.schemaPath+".then",p.errSchemaPath=e.errSchemaPath+"/then",a+="  "+e.validate(p)+" ",p.baseId=b,a+=" "+d+" = "+f+"; ",y&&g?a+=" var "+(_="ifClause"+i)+" = 'then'; ":_="'then'",a+=" } ",g&&(a+=" else { ")):a+=" if (!"+f+") { ",g&&(p.schema=e.schema.else,p.schemaPath=e.schemaPath+".else",p.errSchemaPath=e.errSchemaPath+"/else",a+="  "+e.validate(p)+" ",p.baseId=b,a+=" "+d+" = "+f+"; ",y&&g?a+=" var "+(_="ifClause"+i)+" = 'else'; ":_="'else'",a+=" } "),a+=" if (!"+d+") {   var err =   ",!1!==e.createErrors?(a+=" { keyword: 'if' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { failingKeyword: "+_+" } ",!1!==e.opts.messages&&(a+=" , message: 'should match \"' + "+_+" + '\" schema' "),e.opts.verbose&&(a+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ",a+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&l&&(e.async?a+=" throw new ValidationError(vErrors); ":a+=" validate.errors = vErrors; return false; "),a+=" }   ",l&&(a+=" else { ")}else l&&(a+=" if (true) { ");return a},items:function(e,t,r){var a=" ",i=e.level,s=e.dataLevel,n=e.schema[t],o=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,u="data"+(s||""),d="valid"+i,h="errs__"+i,p=e.util.copy(e),f="";p.level++;var m="valid"+p.level,v="i"+i,y=p.dataLevel=e.dataLevel+1,g="data"+y,b=e.baseId;if(a+="var "+h+" = errors;var "+d+";",Array.isArray(n)){var _=e.schema.additionalItems;if(!1===_){a+=" "+d+" = "+u+".length <= "+n.length+"; ";var w=c;c=e.errSchemaPath+"/additionalItems",a+="  if (!"+d+") {   ";var P=P||[];P.push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'additionalItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { limit: "+n.length+" } ",!1!==e.opts.messages&&(a+=" , message: 'should NOT have more than "+n.length+" items' "),e.opts.verbose&&(a+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ";var E=a;a=P.pop(),!e.compositeRule&&l?e.async?a+=" throw new ValidationError(["+E+"]); ":a+=" validate.errors = ["+E+"]; return false; ":a+=" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+=" } ",c=w,l&&(f+="}",a+=" else { ")}var S=n;if(S)for(var j,x=-1,$=S.length-1;x<$;)if(j=S[x+=1],e.opts.strictKeywords?"object"==typeof j&&Object.keys(j).length>0:e.util.schemaHasRules(j,e.RULES.all)){a+=" "+m+" = true; if ("+u+".length > "+x+") { ";var O=u+"["+x+"]";p.schema=j,p.schemaPath=o+"["+x+"]",p.errSchemaPath=c+"/"+x,p.errorPath=e.util.getPathExpr(e.errorPath,x,e.opts.jsonPointers,!0),p.dataPathArr[y]=x;var A=e.validate(p);p.baseId=b,e.util.varOccurences(A,g)<2?a+=" "+e.util.varReplace(A,g,O)+" ":a+=" var "+g+" = "+O+"; "+A+" ",a+=" }  ",l&&(a+=" if ("+m+") { ",f+="}")}if("object"==typeof _&&(e.opts.strictKeywords?"object"==typeof _&&Object.keys(_).length>0:e.util.schemaHasRules(_,e.RULES.all))){p.schema=_,p.schemaPath=e.schemaPath+".additionalItems",p.errSchemaPath=e.errSchemaPath+"/additionalItems",a+=" "+m+" = true; if ("+u+".length > "+n.length+") {  for (var "+v+" = "+n.length+"; "+v+" < "+u+".length; "+v+"++) { ",p.errorPath=e.util.getPathExpr(e.errorPath,v,e.opts.jsonPointers,!0);O=u+"["+v+"]";p.dataPathArr[y]=v;A=e.validate(p);p.baseId=b,e.util.varOccurences(A,g)<2?a+=" "+e.util.varReplace(A,g,O)+" ":a+=" var "+g+" = "+O+"; "+A+" ",l&&(a+=" if (!"+m+") break; "),a+=" } }  ",l&&(a+=" if ("+m+") { ",f+="}")}}else if(e.opts.strictKeywords?"object"==typeof n&&Object.keys(n).length>0:e.util.schemaHasRules(n,e.RULES.all)){p.schema=n,p.schemaPath=o,p.errSchemaPath=c,a+="  for (var "+v+" = 0; "+v+" < "+u+".length; "+v+"++) { ",p.errorPath=e.util.getPathExpr(e.errorPath,v,e.opts.jsonPointers,!0);O=u+"["+v+"]";p.dataPathArr[y]=v;A=e.validate(p);p.baseId=b,e.util.varOccurences(A,g)<2?a+=" "+e.util.varReplace(A,g,O)+" ":a+=" var "+g+" = "+O+"; "+A+" ",l&&(a+=" if (!"+m+") break; "),a+=" }"}return l&&(a+=" "+f+" if ("+h+" == errors) {"),a},maximum:vo,minimum:vo,maxItems:yo,minItems:yo,maxLength:go,minLength:go,maxProperties:bo,minProperties:bo,multipleOf:function(e,t,r){var a,i=" ",s=e.level,n=e.dataLevel,o=e.schema[t],c=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(n||""),h=e.opts.$data&&o&&o.$data;if(h?(i+=" var schema"+s+" = "+e.util.getData(o.$data,n,e.dataPathArr)+"; ",a="schema"+s):a=o,!h&&"number"!=typeof o)throw new Error(t+" must be number");i+="var division"+s+";if (",h&&(i+=" "+a+" !== undefined && ( typeof "+a+" != 'number' || "),i+=" (division"+s+" = "+d+" / "+a+", ",e.opts.multipleOfPrecision?i+=" Math.abs(Math.round(division"+s+") - division"+s+") > 1e-"+e.opts.multipleOfPrecision+" ":i+=" division"+s+" !== parseInt(division"+s+") ",i+=" ) ",h&&(i+="  )  "),i+=" ) {   ";var p=p||[];p.push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'multipleOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { multipleOf: "+a+" } ",!1!==e.opts.messages&&(i+=" , message: 'should be multiple of ",i+=h?"' + "+a:a+"'"),e.opts.verbose&&(i+=" , schema:  ",i+=h?"validate.schema"+c:""+o,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ";var f=i;return i=p.pop(),!e.compositeRule&&u?e.async?i+=" throw new ValidationError(["+f+"]); ":i+=" validate.errors = ["+f+"]; return false; ":i+=" var err = "+f+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",u&&(i+=" else { "),i},not:function(e,t,r){var a=" ",i=e.level,s=e.dataLevel,n=e.schema[t],o=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,u="data"+(s||""),d="errs__"+i,h=e.util.copy(e);h.level++;var p="valid"+h.level;if(e.opts.strictKeywords?"object"==typeof n&&Object.keys(n).length>0:e.util.schemaHasRules(n,e.RULES.all)){h.schema=n,h.schemaPath=o,h.errSchemaPath=c,a+=" var "+d+" = errors;  ";var f,m=e.compositeRule;e.compositeRule=h.compositeRule=!0,h.createErrors=!1,h.opts.allErrors&&(f=h.opts.allErrors,h.opts.allErrors=!1),a+=" "+e.validate(h)+" ",h.createErrors=!0,f&&(h.opts.allErrors=f),e.compositeRule=h.compositeRule=m,a+=" if ("+p+") {   ";var v=v||[];v.push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: {} ",!1!==e.opts.messages&&(a+=" , message: 'should NOT be valid' "),e.opts.verbose&&(a+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ";var y=a;a=v.pop(),!e.compositeRule&&l?e.async?a+=" throw new ValidationError(["+y+"]); ":a+=" validate.errors = ["+y+"]; return false; ":a+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+=" } else {  errors = "+d+"; if (vErrors !== null) { if ("+d+") vErrors.length = "+d+"; else vErrors = null; } ",e.opts.allErrors&&(a+=" } ")}else a+="  var err =   ",!1!==e.createErrors?(a+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: {} ",!1!==e.opts.messages&&(a+=" , message: 'should NOT be valid' "),e.opts.verbose&&(a+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ",a+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",l&&(a+=" if (false) { ");return a},oneOf:function(e,t,r){var a=" ",i=e.level,s=e.dataLevel,n=e.schema[t],o=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,u="data"+(s||""),d="valid"+i,h="errs__"+i,p=e.util.copy(e),f="";p.level++;var m="valid"+p.level,v=p.baseId,y="prevValid"+i,g="passingSchemas"+i;a+="var "+h+" = errors , "+y+" = false , "+d+" = false , "+g+" = null; ";var b=e.compositeRule;e.compositeRule=p.compositeRule=!0;var _=n;if(_)for(var w,P=-1,E=_.length-1;P<E;)w=_[P+=1],(e.opts.strictKeywords?"object"==typeof w&&Object.keys(w).length>0:e.util.schemaHasRules(w,e.RULES.all))?(p.schema=w,p.schemaPath=o+"["+P+"]",p.errSchemaPath=c+"/"+P,a+="  "+e.validate(p)+" ",p.baseId=v):a+=" var "+m+" = true; ",P&&(a+=" if ("+m+" && "+y+") { "+d+" = false; "+g+" = ["+g+", "+P+"]; } else { ",f+="}"),a+=" if ("+m+") { "+d+" = "+y+" = true; "+g+" = "+P+"; }";return e.compositeRule=p.compositeRule=b,a+=f+"if (!"+d+") {   var err =   ",!1!==e.createErrors?(a+=" { keyword: 'oneOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { passingSchemas: "+g+" } ",!1!==e.opts.messages&&(a+=" , message: 'should match exactly one schema in oneOf' "),e.opts.verbose&&(a+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ",a+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&l&&(e.async?a+=" throw new ValidationError(vErrors); ":a+=" validate.errors = vErrors; return false; "),a+="} else {  errors = "+h+"; if (vErrors !== null) { if ("+h+") vErrors.length = "+h+"; else vErrors = null; }",e.opts.allErrors&&(a+=" } "),a},pattern:function(e,t,r){var a,i=" ",s=e.level,n=e.dataLevel,o=e.schema[t],c=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(n||""),h=e.opts.$data&&o&&o.$data;h?(i+=" var schema"+s+" = "+e.util.getData(o.$data,n,e.dataPathArr)+"; ",a="schema"+s):a=o,i+="if ( ",h&&(i+=" ("+a+" !== undefined && typeof "+a+" != 'string') || "),i+=" !"+(h?"(new RegExp("+a+"))":e.usePattern(o))+".test("+d+") ) {   ";var p=p||[];p.push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'pattern' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { pattern:  ",i+=h?""+a:""+e.util.toQuotedString(o),i+="  } ",!1!==e.opts.messages&&(i+=" , message: 'should match pattern \"",i+=h?"' + "+a+" + '":""+e.util.escapeQuotes(o),i+="\"' "),e.opts.verbose&&(i+=" , schema:  ",i+=h?"validate.schema"+c:""+e.util.toQuotedString(o),i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ";var f=i;return i=p.pop(),!e.compositeRule&&u?e.async?i+=" throw new ValidationError(["+f+"]); ":i+=" validate.errors = ["+f+"]; return false; ":i+=" var err = "+f+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",u&&(i+=" else { "),i},properties:function(e,t,r){var a=" ",i=e.level,s=e.dataLevel,n=e.schema[t],o=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,u="data"+(s||""),d="errs__"+i,h=e.util.copy(e),p="";h.level++;var f="valid"+h.level,m="key"+i,v="idx"+i,y=h.dataLevel=e.dataLevel+1,g="data"+y,b="dataProperties"+i,_=Object.keys(n||{}).filter(D),w=e.schema.patternProperties||{},P=Object.keys(w).filter(D),E=e.schema.additionalProperties,S=_.length||P.length,j=!1===E,x="object"==typeof E&&Object.keys(E).length,$=e.opts.removeAdditional,O=j||x||$,A=e.opts.ownProperties,k=e.baseId,F=e.schema.required;if(F&&(!e.opts.$data||!F.$data)&&F.length<e.opts.loopRequired)var C=e.util.toHash(F);function D(e){return"__proto__"!==e}if(a+="var "+d+" = errors;var "+f+" = true;",A&&(a+=" var "+b+" = undefined;"),O){if(a+=A?" "+b+" = "+b+" || Object.keys("+u+"); for (var "+v+"=0; "+v+"<"+b+".length; "+v+"++) { var "+m+" = "+b+"["+v+"]; ":" for (var "+m+" in "+u+") { ",S){if(a+=" var isAdditional"+i+" = !(false ",_.length)if(_.length>8)a+=" || validate.schema"+o+".hasOwnProperty("+m+") ";else{var R=_;if(R)for(var I=-1,z=R.length-1;I<z;)J=R[I+=1],a+=" || "+m+" == "+e.util.toQuotedString(J)+" "}if(P.length){var N=P;if(N)for(var T=-1,L=N.length-1;T<L;)se=N[T+=1],a+=" || "+e.usePattern(se)+".test("+m+") "}a+=" ); if (isAdditional"+i+") { "}if("all"==$)a+=" delete "+u+"["+m+"]; ";else{var U=e.errorPath,q="' + "+m+" + '";if(e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers)),j)if($)a+=" delete "+u+"["+m+"]; ";else{a+=" "+f+" = false; ";var V=c;c=e.errSchemaPath+"/additionalProperties",(re=re||[]).push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'additionalProperties' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { additionalProperty: '"+q+"' } ",!1!==e.opts.messages&&(a+=" , message: '",e.opts._errorDataPathProperty?a+="is an invalid additional property":a+="should NOT have additional properties",a+="' "),e.opts.verbose&&(a+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ";var M=a;a=re.pop(),!e.compositeRule&&l?e.async?a+=" throw new ValidationError(["+M+"]); ":a+=" validate.errors = ["+M+"]; return false; ":a+=" var err = "+M+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",c=V,l&&(a+=" break; ")}else if(x)if("failing"==$){a+=" var "+d+" = errors;  ";var H=e.compositeRule;e.compositeRule=h.compositeRule=!0,h.schema=E,h.schemaPath=e.schemaPath+".additionalProperties",h.errSchemaPath=e.errSchemaPath+"/additionalProperties",h.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers);var Q=u+"["+m+"]";h.dataPathArr[y]=m;var B=e.validate(h);h.baseId=k,e.util.varOccurences(B,g)<2?a+=" "+e.util.varReplace(B,g,Q)+" ":a+=" var "+g+" = "+Q+"; "+B+" ",a+=" if (!"+f+") { errors = "+d+"; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete "+u+"["+m+"]; }  ",e.compositeRule=h.compositeRule=H}else{h.schema=E,h.schemaPath=e.schemaPath+".additionalProperties",h.errSchemaPath=e.errSchemaPath+"/additionalProperties",h.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers);Q=u+"["+m+"]";h.dataPathArr[y]=m;B=e.validate(h);h.baseId=k,e.util.varOccurences(B,g)<2?a+=" "+e.util.varReplace(B,g,Q)+" ":a+=" var "+g+" = "+Q+"; "+B+" ",l&&(a+=" if (!"+f+") break; ")}e.errorPath=U}S&&(a+=" } "),a+=" }  ",l&&(a+=" if ("+f+") { ",p+="}")}var G=e.opts.useDefaults&&!e.compositeRule;if(_.length){var K=_;if(K)for(var J,W=-1,Z=K.length-1;W<Z;){var Y=n[J=K[W+=1]];if(e.opts.strictKeywords?"object"==typeof Y&&Object.keys(Y).length>0:e.util.schemaHasRules(Y,e.RULES.all)){var X=e.util.getProperty(J),ee=(Q=u+X,G&&void 0!==Y.default);h.schema=Y,h.schemaPath=o+X,h.errSchemaPath=c+"/"+e.util.escapeFragment(J),h.errorPath=e.util.getPath(e.errorPath,J,e.opts.jsonPointers),h.dataPathArr[y]=e.util.toQuotedString(J);B=e.validate(h);if(h.baseId=k,e.util.varOccurences(B,g)<2){B=e.util.varReplace(B,g,Q);var te=Q}else{te=g;a+=" var "+g+" = "+Q+"; "}if(ee)a+=" "+B+" ";else{if(C&&C[J]){a+=" if ( "+te+" === undefined ",A&&(a+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(J)+"') "),a+=") { "+f+" = false; ";U=e.errorPath,V=c;var re,ae=e.util.escapeQuotes(J);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(U,J,e.opts.jsonPointers)),c=e.errSchemaPath+"/required",(re=re||[]).push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+ae+"' } ",!1!==e.opts.messages&&(a+=" , message: '",e.opts._errorDataPathProperty?a+="is a required property":a+="should have required property \\'"+ae+"\\'",a+="' "),e.opts.verbose&&(a+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ";M=a;a=re.pop(),!e.compositeRule&&l?e.async?a+=" throw new ValidationError(["+M+"]); ":a+=" validate.errors = ["+M+"]; return false; ":a+=" var err = "+M+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",c=V,e.errorPath=U,a+=" } else { "}else l?(a+=" if ( "+te+" === undefined ",A&&(a+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(J)+"') "),a+=") { "+f+" = true; } else { "):(a+=" if ("+te+" !== undefined ",A&&(a+=" &&   Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(J)+"') "),a+=" ) { ");a+=" "+B+" } "}}l&&(a+=" if ("+f+") { ",p+="}")}}if(P.length){var ie=P;if(ie)for(var se,ne=-1,oe=ie.length-1;ne<oe;){Y=w[se=ie[ne+=1]];if(e.opts.strictKeywords?"object"==typeof Y&&Object.keys(Y).length>0:e.util.schemaHasRules(Y,e.RULES.all)){h.schema=Y,h.schemaPath=e.schemaPath+".patternProperties"+e.util.getProperty(se),h.errSchemaPath=e.errSchemaPath+"/patternProperties/"+e.util.escapeFragment(se),a+=A?" "+b+" = "+b+" || Object.keys("+u+"); for (var "+v+"=0; "+v+"<"+b+".length; "+v+"++) { var "+m+" = "+b+"["+v+"]; ":" for (var "+m+" in "+u+") { ",a+=" if ("+e.usePattern(se)+".test("+m+")) { ",h.errorPath=e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers);Q=u+"["+m+"]";h.dataPathArr[y]=m;B=e.validate(h);h.baseId=k,e.util.varOccurences(B,g)<2?a+=" "+e.util.varReplace(B,g,Q)+" ":a+=" var "+g+" = "+Q+"; "+B+" ",l&&(a+=" if (!"+f+") break; "),a+=" } ",l&&(a+=" else "+f+" = true; "),a+=" }  ",l&&(a+=" if ("+f+") { ",p+="}")}}}return l&&(a+=" "+p+" if ("+d+" == errors) {"),a},propertyNames:function(e,t,r){var a=" ",i=e.level,s=e.dataLevel,n=e.schema[t],o=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,u="data"+(s||""),d="errs__"+i,h=e.util.copy(e);h.level++;var p="valid"+h.level;if(a+="var "+d+" = errors;",e.opts.strictKeywords?"object"==typeof n&&Object.keys(n).length>0:e.util.schemaHasRules(n,e.RULES.all)){h.schema=n,h.schemaPath=o,h.errSchemaPath=c;var f="key"+i,m="idx"+i,v="i"+i,y="' + "+f+" + '",g="data"+(h.dataLevel=e.dataLevel+1),b="dataProperties"+i,_=e.opts.ownProperties,w=e.baseId;_&&(a+=" var "+b+" = undefined; "),a+=_?" "+b+" = "+b+" || Object.keys("+u+"); for (var "+m+"=0; "+m+"<"+b+".length; "+m+"++) { var "+f+" = "+b+"["+m+"]; ":" for (var "+f+" in "+u+") { ",a+=" var startErrs"+i+" = errors; ";var P=f,E=e.compositeRule;e.compositeRule=h.compositeRule=!0;var S=e.validate(h);h.baseId=w,e.util.varOccurences(S,g)<2?a+=" "+e.util.varReplace(S,g,P)+" ":a+=" var "+g+" = "+P+"; "+S+" ",e.compositeRule=h.compositeRule=E,a+=" if (!"+p+") { for (var "+v+"=startErrs"+i+"; "+v+"<errors; "+v+"++) { vErrors["+v+"].propertyName = "+f+"; }   var err =   ",!1!==e.createErrors?(a+=" { keyword: 'propertyNames' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { propertyName: '"+y+"' } ",!1!==e.opts.messages&&(a+=" , message: 'property name \\'"+y+"\\' is invalid' "),e.opts.verbose&&(a+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ",a+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&l&&(e.async?a+=" throw new ValidationError(vErrors); ":a+=" validate.errors = vErrors; return false; "),l&&(a+=" break; "),a+=" } }"}return l&&(a+="  if ("+d+" == errors) {"),a},required:function(e,t,r){var a=" ",i=e.level,s=e.dataLevel,n=e.schema[t],o=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,u="data"+(s||""),d="valid"+i,h=e.opts.$data&&n&&n.$data;h&&(a+=" var schema"+i+" = "+e.util.getData(n.$data,s,e.dataPathArr)+"; ");var p="schema"+i;if(!h)if(n.length<e.opts.loopRequired&&e.schema.properties&&Object.keys(e.schema.properties).length){var f=[],m=n;if(m)for(var v,y=-1,g=m.length-1;y<g;){v=m[y+=1];var b=e.schema.properties[v];b&&(e.opts.strictKeywords?"object"==typeof b&&Object.keys(b).length>0:e.util.schemaHasRules(b,e.RULES.all))||(f[f.length]=v)}}else f=n;if(h||f.length){var _=e.errorPath,w=h||f.length>=e.opts.loopRequired,P=e.opts.ownProperties;if(l)if(a+=" var missing"+i+"; ",w){h||(a+=" var "+p+" = validate.schema"+o+"; ");var E="' + "+(A="schema"+i+"["+(x="i"+i)+"]")+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(_,A,e.opts.jsonPointers)),a+=" var "+d+" = true; ",h&&(a+=" if (schema"+i+" === undefined) "+d+" = true; else if (!Array.isArray(schema"+i+")) "+d+" = false; else {"),a+=" for (var "+x+" = 0; "+x+" < "+p+".length; "+x+"++) { "+d+" = "+u+"["+p+"["+x+"]] !== undefined ",P&&(a+=" &&   Object.prototype.hasOwnProperty.call("+u+", "+p+"["+x+"]) "),a+="; if (!"+d+") break; } ",h&&(a+="  }  "),a+="  if (!"+d+") {   ",(O=O||[]).push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+E+"' } ",!1!==e.opts.messages&&(a+=" , message: '",e.opts._errorDataPathProperty?a+="is a required property":a+="should have required property \\'"+E+"\\'",a+="' "),e.opts.verbose&&(a+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ";var S=a;a=O.pop(),!e.compositeRule&&l?e.async?a+=" throw new ValidationError(["+S+"]); ":a+=" validate.errors = ["+S+"]; return false; ":a+=" var err = "+S+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+=" } else { "}else{a+=" if ( ";var j=f;if(j)for(var x=-1,$=j.length-1;x<$;){F=j[x+=1],x&&(a+=" || "),a+=" ( ( "+(I=u+(R=e.util.getProperty(F)))+" === undefined ",P&&(a+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(F)+"') "),a+=") && (missing"+i+" = "+e.util.toQuotedString(e.opts.jsonPointers?F:R)+") ) "}a+=") {  ";var O;E="' + "+(A="missing"+i)+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(_,A,!0):_+" + "+A),(O=O||[]).push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+E+"' } ",!1!==e.opts.messages&&(a+=" , message: '",e.opts._errorDataPathProperty?a+="is a required property":a+="should have required property \\'"+E+"\\'",a+="' "),e.opts.verbose&&(a+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ";S=a;a=O.pop(),!e.compositeRule&&l?e.async?a+=" throw new ValidationError(["+S+"]); ":a+=" validate.errors = ["+S+"]; return false; ":a+=" var err = "+S+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+=" } else { "}else if(w){h||(a+=" var "+p+" = validate.schema"+o+"; ");var A;E="' + "+(A="schema"+i+"["+(x="i"+i)+"]")+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(_,A,e.opts.jsonPointers)),h&&(a+=" if ("+p+" && !Array.isArray("+p+")) {  var err =   ",!1!==e.createErrors?(a+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+E+"' } ",!1!==e.opts.messages&&(a+=" , message: '",e.opts._errorDataPathProperty?a+="is a required property":a+="should have required property \\'"+E+"\\'",a+="' "),e.opts.verbose&&(a+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ",a+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else if ("+p+" !== undefined) { "),a+=" for (var "+x+" = 0; "+x+" < "+p+".length; "+x+"++) { if ("+u+"["+p+"["+x+"]] === undefined ",P&&(a+=" || ! Object.prototype.hasOwnProperty.call("+u+", "+p+"["+x+"]) "),a+=") {  var err =   ",!1!==e.createErrors?(a+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+E+"' } ",!1!==e.opts.messages&&(a+=" , message: '",e.opts._errorDataPathProperty?a+="is a required property":a+="should have required property \\'"+E+"\\'",a+="' "),e.opts.verbose&&(a+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ",a+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } ",h&&(a+="  }  ")}else{var k=f;if(k)for(var F,C=-1,D=k.length-1;C<D;){F=k[C+=1];var R=e.util.getProperty(F),I=(E=e.util.escapeQuotes(F),u+R);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(_,F,e.opts.jsonPointers)),a+=" if ( "+I+" === undefined ",P&&(a+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(F)+"') "),a+=") {  var err =   ",!1!==e.createErrors?(a+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+E+"' } ",!1!==e.opts.messages&&(a+=" , message: '",e.opts._errorDataPathProperty?a+="is a required property":a+="should have required property \\'"+E+"\\'",a+="' "),e.opts.verbose&&(a+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ",a+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}e.errorPath=_}else l&&(a+=" if (true) {");return a},uniqueItems:function(e,t,r){var a,i=" ",s=e.level,n=e.dataLevel,o=e.schema[t],c=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(n||""),h="valid"+s,p=e.opts.$data&&o&&o.$data;if(p?(i+=" var schema"+s+" = "+e.util.getData(o.$data,n,e.dataPathArr)+"; ",a="schema"+s):a=o,(o||p)&&!1!==e.opts.uniqueItems){p&&(i+=" var "+h+"; if ("+a+" === false || "+a+" === undefined) "+h+" = true; else if (typeof "+a+" != 'boolean') "+h+" = false; else { "),i+=" var i = "+d+".length , "+h+" = true , j; if (i > 1) { ";var f=e.schema.items&&e.schema.items.type,m=Array.isArray(f);if(!f||"object"==f||"array"==f||m&&(f.indexOf("object")>=0||f.indexOf("array")>=0))i+=" outer: for (;i--;) { for (j = i; j--;) { if (equal("+d+"[i], "+d+"[j])) { "+h+" = false; break outer; } } } ";else{i+=" var itemIndices = {}, item; for (;i--;) { var item = "+d+"[i]; ";var v="checkDataType"+(m?"s":"");i+=" if ("+e.util[v](f,"item",e.opts.strictNumbers,!0)+") continue; ",m&&(i+=" if (typeof item == 'string') item = '\"' + item; "),i+=" if (typeof itemIndices[item] == 'number') { "+h+" = false; j = itemIndices[item]; break; } itemIndices[item] = i; } "}i+=" } ",p&&(i+="  }  "),i+=" if (!"+h+") {   ";var y=y||[];y.push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'uniqueItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { i: i, j: j } ",!1!==e.opts.messages&&(i+=" , message: 'should NOT have duplicate items (items ## ' + j + ' and ' + i + ' are identical)' "),e.opts.verbose&&(i+=" , schema:  ",i+=p?"validate.schema"+c:""+o,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ";var g=i;i=y.pop(),!e.compositeRule&&u?e.async?i+=" throw new ValidationError(["+g+"]); ":i+=" validate.errors = ["+g+"]; return false; ":i+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } ",u&&(i+=" else { ")}else u&&(i+=" if (true) { ");return i},validate:Nn},wo=an.toHash,Po=["multipleOf","maximum","exclusiveMaximum","minimum","exclusiveMinimum","maxLength","minLength","pattern","additionalItems","maxItems","minItems","uniqueItems","maxProperties","minProperties","required","additionalProperties","enum","format","const"],Eo=function(e,t){for(var r=0;r<t.length;r++){e=JSON.parse(JSON.stringify(e));var a,i=t[r].split("/"),s=e;for(a=1;a<i.length;a++)s=s[i[a]];for(a=0;a<Po.length;a++){var n=Po[a],o=s[n];o&&(s[n]={anyOf:[o,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]})}}return e},So=Dn.MissingRef,jo=function e(t,r,a){var i=this;if("function"!=typeof this._opts.loadSchema)throw new Error("options.loadSchema should be a function");"function"==typeof r&&(a=r,r=void 0);var s=n(t).then((function(){var e=i._addSchema(t,void 0,r);return e.validate||function e(t){try{return i._compile(t)}catch(e){if(e instanceof So)return a(e);throw e}function a(a){var s=a.missingSchema;if(l(s))throw new Error("Schema "+s+" is loaded but "+a.missingRef+" cannot be resolved");var o=i._loadingSchemas[s];return o||(o=i._loadingSchemas[s]=i._opts.loadSchema(s)).then(c,c),o.then((function(e){if(!l(s))return n(e).then((function(){l(s)||i.addSchema(e,s,void 0,r)}))})).then((function(){return e(t)}));function c(){delete i._loadingSchemas[s]}function l(e){return i._refs[e]||i._schemas[e]}}}(e)}));a&&s.then((function(e){a(null,e)}),a);return s;function n(t){var r=t.$schema;return r&&!i.getSchema(r)?e.call(i,{$ref:r},!0):Promise.resolve()}};var xo=function(e,t,r){var a,i,s=" ",n=e.level,o=e.dataLevel,c=e.schema[t],l=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,d=!e.opts.allErrors,h="data"+(o||""),p="valid"+n,f="errs__"+n,m=e.opts.$data&&c&&c.$data;m?(s+=" var schema"+n+" = "+e.util.getData(c.$data,o,e.dataPathArr)+"; ",i="schema"+n):i=c;var v,y,g,b,_,w="definition"+n,P=this.definition,E="";if(m&&P.$data){_="keywordValidate"+n;var S=P.validateSchema;s+=" var "+w+" = RULES.custom['"+t+"'].definition; var "+_+" = "+w+".validate;"}else{if(!(b=e.useCustomRule(this,c,e.schema,e)))return;i="validate.schema"+l,_=b.code,v=P.compile,y=P.inline,g=P.macro}var j=_+".errors",x="i"+n,$="ruleErr"+n,O=P.async;if(O&&!e.async)throw new Error("async keyword in sync schema");if(y||g||(s+=j+" = null;"),s+="var "+f+" = errors;var "+p+";",m&&P.$data&&(E+="}",s+=" if ("+i+" === undefined) { "+p+" = true; } else { ",S&&(E+="}",s+=" "+p+" = "+w+".validateSchema("+i+"); if ("+p+") { ")),y)P.statements?s+=" "+b.validate+" ":s+=" "+p+" = "+b.validate+"; ";else if(g){var A=e.util.copy(e);E="";A.level++;var k="valid"+A.level;A.schema=b.validate,A.schemaPath="";var F=e.compositeRule;e.compositeRule=A.compositeRule=!0;var C=e.validate(A).replace(/validate\.schema/g,_);e.compositeRule=A.compositeRule=F,s+=" "+C}else{(z=z||[]).push(s),s="",s+="  "+_+".call( ",e.opts.passContext?s+="this":s+="self",v||!1===P.schema?s+=" , "+h+" ":s+=" , "+i+" , "+h+" , validate.schema"+e.schemaPath+" ",s+=" , (dataPath || '')",'""'!=e.errorPath&&(s+=" + "+e.errorPath);var D=o?"data"+(o-1||""):"parentData",R=o?e.dataPathArr[o]:"parentDataProperty",I=s+=" , "+D+" , "+R+" , rootData )  ";s=z.pop(),!1===P.errors?(s+=" "+p+" = ",O&&(s+="await "),s+=I+"; "):s+=O?" var "+(j="customErrors"+n)+" = null; try { "+p+" = await "+I+"; } catch (e) { "+p+" = false; if (e instanceof ValidationError) "+j+" = e.errors; else throw e; } ":" "+j+" = null; "+p+" = "+I+"; "}if(P.modifying&&(s+=" if ("+D+") "+h+" = "+D+"["+R+"];"),s+=""+E,P.valid)d&&(s+=" if (true) { ");else{var z;s+=" if ( ",void 0===P.valid?(s+=" !",s+=g?""+k:""+p):s+=" "+!P.valid+" ",s+=") { ",a=this.keyword,(z=z||[]).push(s),s="",(z=z||[]).push(s),s="",!1!==e.createErrors?(s+=" { keyword: '"+(a||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { keyword: '"+this.keyword+"' } ",!1!==e.opts.messages&&(s+=" , message: 'should pass \""+this.keyword+"\" keyword validation' "),e.opts.verbose&&(s+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),s+=" } "):s+=" {} ";var N=s;s=z.pop(),!e.compositeRule&&d?e.async?s+=" throw new ValidationError(["+N+"]); ":s+=" validate.errors = ["+N+"]; return false; ":s+=" var err = "+N+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";var T=s;s=z.pop(),y?P.errors?"full"!=P.errors&&(s+="  for (var "+x+"="+f+"; "+x+"<errors; "+x+"++) { var "+$+" = vErrors["+x+"]; if ("+$+".dataPath === undefined) "+$+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+$+".schemaPath === undefined) { "+$+'.schemaPath = "'+u+'"; } ',e.opts.verbose&&(s+=" "+$+".schema = "+i+"; "+$+".data = "+h+"; "),s+=" } "):!1===P.errors?s+=" "+T+" ":(s+=" if ("+f+" == errors) { "+T+" } else {  for (var "+x+"="+f+"; "+x+"<errors; "+x+"++) { var "+$+" = vErrors["+x+"]; if ("+$+".dataPath === undefined) "+$+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+$+".schemaPath === undefined) { "+$+'.schemaPath = "'+u+'"; } ',e.opts.verbose&&(s+=" "+$+".schema = "+i+"; "+$+".data = "+h+"; "),s+=" } } "):g?(s+="   var err =   ",!1!==e.createErrors?(s+=" { keyword: '"+(a||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { keyword: '"+this.keyword+"' } ",!1!==e.opts.messages&&(s+=" , message: 'should pass \""+this.keyword+"\" keyword validation' "),e.opts.verbose&&(s+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),s+=" } "):s+=" {} ",s+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&d&&(e.async?s+=" throw new ValidationError(vErrors); ":s+=" validate.errors = vErrors; return false; ")):!1===P.errors?s+=" "+T+" ":(s+=" if (Array.isArray("+j+")) { if (vErrors === null) vErrors = "+j+"; else vErrors = vErrors.concat("+j+"); errors = vErrors.length;  for (var "+x+"="+f+"; "+x+"<errors; "+x+"++) { var "+$+" = vErrors["+x+"]; if ("+$+".dataPath === undefined) "+$+".dataPath = (dataPath || '') + "+e.errorPath+";  "+$+'.schemaPath = "'+u+'";  ',e.opts.verbose&&(s+=" "+$+".schema = "+i+"; "+$+".data = "+h+"; "),s+=" } } else { "+T+" } "),s+=" } ",d&&(s+=" else { ")}return s},$o={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0},Oo={$id:"https://github.com/ajv-validator/ajv/blob/master/lib/definition_schema.js",definitions:{simpleTypes:$o.definitions.simpleTypes},type:"object",dependencies:{schema:["validate"],$data:["validate"],statements:["inline"],valid:{not:{required:["macro"]}}},properties:{type:$o.properties.type,schema:{type:"boolean"},statements:{type:"boolean"},dependencies:{type:"array",items:{type:"string"}},metaSchema:{type:"object"},modifying:{type:"boolean"},valid:{type:"boolean"},$data:{type:"boolean"},async:{type:"boolean"},errors:{anyOf:[{type:"boolean"},{const:"full"}]}}},Ao=/^[a-z_$][a-z0-9_$-]*$/i,ko=function(e,t){var r=this.RULES;if(r.keywords[e])throw new Error("Keyword "+e+" is already defined");if(!Ao.test(e))throw new Error("Keyword "+e+" is not a valid identifier");if(t){this.validateKeyword(t,!0);var a=t.type;if(Array.isArray(a))for(var i=0;i<a.length;i++)n(e,a[i],t);else n(e,a,t);var s=t.metaSchema;s&&(t.$data&&this._opts.$data&&(s={anyOf:[s,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]}),t.validateSchema=this.compile(s,!0))}function n(e,t,a){for(var i,s=0;s<r.length;s++){var n=r[s];if(n.type==t){i=n;break}}i||(i={type:t,rules:[]},r.push(i));var o={keyword:e,definition:a,custom:!0,code:xo,implements:a.implements};i.rules.push(o),r.custom[e]=o}return r.keywords[e]=r.all[e]=!0,this},Fo=function(e){var t=this.RULES.custom[e];return t?t.definition:this.RULES.keywords[e]||!1},Co=function(e){var t=this.RULES;delete t.keywords[e],delete t.all[e],delete t.custom[e];for(var r=0;r<t.length;r++)for(var a=t[r].rules,i=0;i<a.length;i++)if(a[i].keyword==e){a.splice(i,1);break}return this},Do=function e(t,r){e.errors=null;var a=this._validateKeyword=this._validateKeyword||this.compile(Oo,!0);if(a(t))return!0;if(e.errors=a.errors,r)throw new Error("custom keyword definition is invalid: "+this.errorsText(a.errors));return!1};var Ro={$schema:"http://json-schema.org/draft-07/schema#",$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON Schema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1},Io=Lo;Lo.prototype.validate=function(e,t){var r;if("string"==typeof e){if(!(r=this.getSchema(e)))throw new Error('no schema with key or ref "'+e+'"')}else{var a=this._addSchema(e);r=a.validate||this._compile(a)}var i=r(t);!0!==r.$async&&(this.errors=r.errors);return i},Lo.prototype.compile=function(e,t){var r=this._addSchema(e,void 0,t);return r.validate||this._compile(r)},Lo.prototype.addSchema=function(e,t,r,a){if(Array.isArray(e)){for(var i=0;i<e.length;i++)this.addSchema(e[i],void 0,r,a);return this}var s=this._getId(e);if(void 0!==s&&"string"!=typeof s)throw new Error("schema id must be string");return Qo(this,t=_n.normalizeId(t||s)),this._schemas[t]=this._addSchema(e,r,a,!0),this},Lo.prototype.addMetaSchema=function(e,t,r){return this.addSchema(e,t,r,!0),this},Lo.prototype.validateSchema=function(e,t){var r=e.$schema;if(void 0!==r&&"string"!=typeof r)throw new Error("$schema must be a string");if(!(r=r||this._opts.defaultMeta||function(e){var t=e._opts.meta;return e._opts.defaultMeta="object"==typeof t?e._getId(t)||t:e.getSchema(zo)?zo:void 0,e._opts.defaultMeta}(this)))return this.logger.warn("meta-schema not available"),this.errors=null,!0;var a=this.validate(r,e);if(!a&&t){var i="schema is invalid: "+this.errorsText();if("log"!=this._opts.validateSchema)throw new Error(i);this.logger.error(i)}return a},Lo.prototype.getSchema=function(e){var t=Uo(this,e);switch(typeof t){case"object":return t.validate||this._compile(t);case"string":return this.getSchema(t);case"undefined":return function(e,t){var r=_n.schema.call(e,{schema:{}},t);if(r){var a=r.schema,i=r.root,s=r.baseId,n=Un.call(e,a,i,void 0,s);return e._fragments[t]=new gn({ref:t,fragment:!0,schema:a,root:i,baseId:s,validate:n}),n}}(this,e)}},Lo.prototype.removeSchema=function(e){if(e instanceof RegExp)return qo(this,this._schemas,e),qo(this,this._refs,e),this;switch(typeof e){case"undefined":return qo(this,this._schemas),qo(this,this._refs),this._cache.clear(),this;case"string":var t=Uo(this,e);return t&&this._cache.del(t.cacheKey),delete this._schemas[e],delete this._refs[e],this;case"object":var r=this._opts.serialize,a=r?r(e):e;this._cache.del(a);var i=this._getId(e);i&&(i=_n.normalizeId(i),delete this._schemas[i],delete this._refs[i])}return this},Lo.prototype.addFormat=function(e,t){"string"==typeof t&&(t=new RegExp(t));return this._formats[e]=t,this},Lo.prototype.errorsText=function(e,t){if(!(e=e||this.errors))return"No errors";for(var r=void 0===(t=t||{}).separator?", ":t.separator,a=void 0===t.dataVar?"data":t.dataVar,i="",s=0;s<e.length;s++){var n=e[s];n&&(i+=a+n.dataPath+" "+n.message+r)}return i.slice(0,-r.length)},Lo.prototype._addSchema=function(e,t,r,a){if("object"!=typeof e&&"boolean"!=typeof e)throw new Error("schema should be object or boolean");var i=this._opts.serialize,s=i?i(e):e,n=this._cache.get(s);if(n)return n;a=a||!1!==this._opts.addUsedSchema;var o=_n.normalizeId(this._getId(e));o&&a&&Qo(this,o);var c,l=!1!==this._opts.validateSchema&&!t;l&&!(c=o&&o==_n.normalizeId(e.$schema))&&this.validateSchema(e,!0);var u=_n.ids.call(this,e),d=new gn({id:o,schema:e,localRefs:u,cacheKey:s,meta:r});"#"!=o[0]&&a&&(this._refs[o]=d);this._cache.put(s,d),l&&c&&this.validateSchema(e,!0);return d},Lo.prototype._compile=function(e,t){if(e.compiling)return e.validate=i,i.schema=e.schema,i.errors=null,i.root=t||i,!0===e.schema.$async&&(i.$async=!0),i;var r,a;e.compiling=!0,e.meta&&(r=this._opts,this._opts=this._metaOpts);try{a=Un.call(this,e.schema,t,e.localRefs)}catch(t){throw delete e.validate,t}finally{e.compiling=!1,e.meta&&(this._opts=r)}return e.validate=a,e.refs=a.refs,e.refVal=a.refVal,e.root=a.root,a;function i(){var t=e.validate,r=t.apply(this,arguments);return i.errors=t.errors,r}},Lo.prototype.compileAsync=jo,Lo.prototype.addKeyword=ko,Lo.prototype.getKeyword=Fo,Lo.prototype.removeKeyword=Co,Lo.prototype.validateKeyword=Do,Lo.ValidationError=Dn.Validation,Lo.MissingRefError=Dn.MissingRef,Lo.$dataMetaSchema=Eo;var zo="http://json-schema.org/draft-07/schema",No=["removeAdditional","useDefaults","coerceTypes","strictDefaults"],To=["/properties"];function Lo(e){if(!(this instanceof Lo))return new Lo(e);var t,r;e=this._opts=an.copy(e)||{},function(e){var t=e._opts.logger;if(!1===t)e.logger={log:Bo,warn:Bo,error:Bo};else{if(void 0===t&&(t=console),!("object"==typeof t&&t.log&&t.warn&&t.error))throw new Error("logger must implement log, warn and error methods");e.logger=t}}(this),this._schemas={},this._refs={},this._fragments={},this._formats=oo(e.format),this._cache=e.cache||new Jn,this._loadingSchemas={},this._compilations=[],this.RULES=((t=[{type:"number",rules:[{maximum:["exclusiveMaximum"]},{minimum:["exclusiveMinimum"]},"multipleOf","format"]},{type:"string",rules:["maxLength","minLength","pattern","format"]},{type:"array",rules:["maxItems","minItems","items","contains","uniqueItems"]},{type:"object",rules:["maxProperties","minProperties","required","dependencies","propertyNames",{properties:["additionalProperties","patternProperties"]}]},{rules:["$ref","const","enum","not","anyOf","oneOf","allOf","if"]}]).all=wo(r=["type","$comment"]),t.types=wo(["number","integer","string","array","object","boolean","null"]),t.forEach((function(e){e.rules=e.rules.map((function(e){var a;if("object"==typeof e){var i=Object.keys(e)[0];a=e[i],e=i,a.forEach((function(e){r.push(e),t.all[e]=!0}))}return r.push(e),t.all[e]={keyword:e,code:_o[e],implements:a}})),t.all.$comment={keyword:"$comment",code:_o.$comment},e.type&&(t.types[e.type]=e)})),t.keywords=wo(r.concat(["$schema","$id","id","$data","$async","title","description","default","definitions","examples","readOnly","writeOnly","contentMediaType","contentEncoding","additionalItems","then","else"])),t.custom={},t),this._getId=function(e){switch(e.schemaId){case"auto":return Ho;case"id":return Vo;default:return Mo}}(e),e.loopRequired=e.loopRequired||1/0,"property"==e.errorDataPath&&(e._errorDataPathProperty=!0),void 0===e.serialize&&(e.serialize=zn),this._metaOpts=function(e){for(var t=an.copy(e._opts),r=0;r<No.length;r++)delete t[No[r]];return t}(this),e.formats&&function(e){for(var t in e._opts.formats){var r=e._opts.formats[t];e.addFormat(t,r)}}(this),e.keywords&&function(e){for(var t in e._opts.keywords){var r=e._opts.keywords[t];e.addKeyword(t,r)}}(this),function(e){var t;e._opts.$data&&(t=Ro,e.addMetaSchema(t,t.$id,!0));if(!1===e._opts.meta)return;var r=$o;e._opts.$data&&(r=Eo(r,To));e.addMetaSchema(r,zo,!0),e._refs["http://json-schema.org/schema"]=zo}(this),"object"==typeof e.meta&&this.addMetaSchema(e.meta),e.nullable&&this.addKeyword("nullable",{metaSchema:{type:"boolean"}}),function(e){var t=e._opts.schemas;if(!t)return;if(Array.isArray(t))e.addSchema(t);else for(var r in t)e.addSchema(t[r],r)}(this)}function Uo(e,t){return t=_n.normalizeId(t),e._schemas[t]||e._refs[t]||e._fragments[t]}function qo(e,t,r){for(var a in t){var i=t[a];i.meta||r&&!r.test(a)||(e._cache.del(i.cacheKey),delete t[a])}}function Vo(e){return e.$id&&this.logger.warn("schema $id ignored",e.$id),e.id}function Mo(e){return e.id&&this.logger.warn("schema id ignored",e.id),e.$id}function Ho(e){if(e.$id&&e.id&&e.$id!=e.id)throw new Error("schema $id is different from id");return e.$id||e.id}function Qo(e,t){if(e._schemas[t]||e._refs[t])throw new Error('schema with key or id "'+t+'" already exists')}function Bo(){}const Go=new Io({allErrors:!0,jsonPointers:!0}),Ko={type:"object",properties:{discoverExisting:{type:"boolean"},standardConfiguration:{type:"boolean"},title:{type:["boolean","string"]},domains:{type:"object",additionalProperties:{type:["object","null"],properties:{icon:{type:"string"},actions:{type:"array",items:{type:"object",properties:{icon:{type:"string"},name:{type:"string"},service:{type:"string"},service_data:{type:"object"},variable:{type:"object",properties:{field:{type:"string"},name:{type:"string"},unit:{type:"string"},min:{type:"number"},max:{type:"number"},step:{type:"number"},optional:{type:"boolean"},showPercentage:{type:"boolean"}},required:["field"],additionalProperties:!1}},required:["service"],additionalProperties:!1}},include:{type:"array",items:{type:"string"}},exclude:{type:"array",items:{type:"string"}}},additionalProperties:!1}},entities:{type:"object",additionalProperties:{type:["object","null"],properties:{name:{type:"string"},icon:{type:"string"},actions:{type:"array",items:{type:"object",properties:{icon:{type:"string"},name:{type:"string"},service:{type:"string"},service_data:{type:"object"},variable:{type:"object",properties:{field:{type:"string"},name:{type:"string"},unit:{type:"string"},min:{type:"number"},max:{type:"number"},step:{type:"number"},optional:{type:"boolean"},showPercentage:{type:"boolean"}},required:["field"],additionalProperties:!1}},required:["service"],additionalProperties:!1}}},additionalProperties:!1}},groups:{type:"object",additionalProperties:{type:"object",properties:{name:{type:"string"},icon:{type:"string"},entities:{type:"array",items:{type:"string"}},domains:{type:"array",items:{type:"string"}}},additionalProperties:!1,oneOf:[{required:["entities"]},{required:["domains"]}]}}}};var Jo,Wo;console.info(`%c   SCHEDULER-CARD   \n%c   Version: ${"1.2.8".padEnd(8," ")}\n%c   Language: ${Ds().padEnd(7," ")}`,"color: orange; font-weight: bold; background: black","color: white; font-weight: bold; background: dimgray","color: white; font-weight: bold; background: dimgray"),window.customCards=window.customCards||[],window.customCards.push({type:"scheduler-card",name:"Scheduler Card",description:"Card to manage schedule entities made with scheduler-component."}),e.SchedulerCard=class extends ee{constructor(){super(...arguments),this.Config=new Xs,this.entries=[],this.selection=Object.assign({},Is),this.await_update=!0}static get styles(){return en}set hass(e){this.await_update&&this.Config&&(this._hass||this.Config.LoadEntities(e.states),this.update_entries(e),this._hass=e)}update_entries(e){let t=Ra(e.states,e=>Js(e.entity_id)).map(e=>function(e,t){let r=e.attributes.entries.map(e=>{let r=qs.exec(e),a=Vs.exec(r[3]),i={days:r[1].split("").map(Number),actions:a.map(Number).filter(e=>!isNaN(e))},s=Ms.exec(r[2]);if(null!==Bs(r[2]))Object.assign(i,{time:Bs(r[2])});else if(s){let e;if(e="SR"==s[2]?t.next_sunrise.getHours()+t.next_sunrise.getMinutes()/60:t.next_sunset.getHours()+t.next_sunset.getMinutes()/60,s[1]){let t=e-(Number(s[1].substr(0,2))+Number(s[1].substr(2))/60);Object.assign(i,{event:"SR"==s[2]?"sunrise":"sunset",offset:"-"+Bs(s[1]),time:`${String(Math.floor(t)).padStart(2,"0")}:${String(10*Math.round(6*(t-Math.floor(t)))).padStart(2,"0")}`})}else if(s[3]){let t=e+(Number(s[3].substr(0,2))+Number(s[3].substr(2))/60);Object.assign(i,{event:"SR"==s[2]?"sunrise":"sunset",offset:"+"+Bs(s[3]),time:`${String(Math.floor(t)).padStart(2,"0")}:${String(10*Math.round(6*(t-Math.floor(t)))).padStart(2,"0")}`})}}return i}),a=e.attributes.actions.map(e=>{let r={},a=Gs(e.entity)?e.entity:Gs(e.service)+"."+e.entity,i=e.service,s=Ja(e,["service","entity"]);if(Gs(a)==Gs(i)&&(i=i.split(".").pop()),!t.FindEntity(a))return;Object.assign(r,{entity:a});let n=Ks(s?Object.assign({service:i,service_data:s}):Object.assign({service:i}));if(!t.FindAction(a,n)){let e=t.GetActionsForEntity(a).find(e=>!!e.hasOwnProperty("variable")&&!!s.hasOwnProperty(e.variable.field));if(!e)return;{let t=e.variable.field;Object.assign(r,{level:Number(s[t])}),s=Ja(s,t),n=Ks(s?Object.assign({service:i,service_data:s}):Object.assign({service:i}))}}return Object.assign(r,{action:n}),r});return{id:e.entity_id,enabled:"off"!=e.state,entries:r,actions:a}}(e,this.Config)).filter(e=>void 0!==e.actions[0]);t!=this.entries&&(this.entries=t,this.await_update=!1,this.requestUpdate())}awaitUpdate(){this.await_update=!0}render(){return this.selection.newItem||this.selection.editItem?this.selection.newItem&&!this.selection.actionConfirmed?T`
        <ha-card>
          ${this.getHeader()}
          <div class="card-section first">
            <div class="header">${Cs("fields.group")}</div>
            <div class="option-list">
            ${this.getGroups()}
            </div>
            <div class="header">${Cs("fields.entity")}</div>
            <div class="option-list">
            ${this.getEntities()}
            </div>
            <div class="header">${Cs("fields.action")}</div>
            <div class="option-list">
            ${this.getActions()}
            </div>
          </div>
          <div class="card-section last">
            <mwc-button outlined @click="${()=>this.editItemCancel()}">${Cs("actions.cancel")}</mwc-button>
            ${this.selection.action?T`<mwc-button outlined @click="${()=>this.newItemConfirm()}">${Cs("actions.next")}</mwc-button>`:T`<mwc-button outlined disabled>${Cs("actions.next")}</mwc-button>`}
          </div>
        </ha-card>
      `:T`
      <ha-card>
        ${this.getHeader()}
        ${this.showEditor()}
      </ha-card>
      `:T`
      <ha-card>
        ${this.getHeader()}
        <div class="card-section first">
        ${this.getEntries()}
        </div>
        <div class="card-section last">
          <mwc-button outlined @click="${()=>{this.newItem()}}">${Cs("actions.add")}</mwc-button>
        </div>
      </ha-card>
      `}getHeader(){return"string"==typeof this.Config.userConfig.title?T`<div class="card-header">${this.Config.userConfig.title}</div>`:this.Config.userConfig.title?T`<div class="card-header">${Cs("scheduler")}</div>`:T``}newItem(){this.selection=Qt(Object.assign({},Is),{newItem:!0}),this.requestUpdate()}editItemCancel(){this.selection=Object.assign({},Is),this.requestUpdate()}newItemConfirm(){this.selection=Qt(Object.assign({},Is),{newItem:!0,actionConfirmed:!0,entity:this.selection.entity,action:this.selection.action}),this.requestUpdate()}getEntries(){return this.entries&&this.entries.length?this.entries.map(e=>{if(!e.actions[0])return T``;let t=this.Config.FindEntity(e.actions[0].entity),r=this.Config.FindAction(e.actions[0].entity,e.actions[0].action);if(!t||!r)return T``;let a=Zs(r.name);if(e.actions[0].hasOwnProperty("level")){let t=r.variable,i=e.actions[0].level,s=t.hasOwnProperty("unit")?t.unit:"";t.showPercentage&&(i=Math.round((i-t.min)/(t.max-t.min)*100),i<t.min?i=t.min:i>t.max&&(i=t.max),s="%"),a=`${Cs("services.set_to")} ${i}${s}`}return T`
      <div class="list-item${e.enabled?"":" disabled"}" @click="${()=>this.editItem(e.id)}">
        <div class="list-item-icon">
          ${t.icon?T`<ha-icon icon="${Ys(t.icon)}"></ha-icon>`:""}
        </div>
        <div class="list-item-name">
          ${Zs(t.name)}
        </div>
        <div class="list-item-action">
          ${a}
        </div>
        <div class="list-item-days">
          ${function(e){if("daily"==Ws(e))return Cs("fields.day_type_daily");if("weekdays"==Ws(e))return`${Cs("words.on")} ${Cs("fields.day_type_weekdays")}`;{let r=Array();e.includes(1)&&r.push(Cs("days_long.mon")),e.includes(2)&&r.push(Cs("days_long.tue")),e.includes(3)&&r.push(Cs("days_long.wed")),e.includes(4)&&r.push(Cs("days_long.thu")),e.includes(5)&&r.push(Cs("days_long.fri")),e.includes(6)&&r.push(Cs("days_long.sat")),e.includes(7)&&r.push(Cs("days_long.sun"));let a=r.join(", ");var t=a.lastIndexOf(", ");return t&&(a=a.slice(0,t)+a.slice(t).replace(", ",` ${Cs("words.and")} `)),`${Cs("words.every")} ${a}`}}(e.entries[0].days)}
        </div>
        <div class="list-item-time">
          ${function(e){if(e.event){let t=Qs.exec(e.offset),r=Number(t[2])+Number(t[3])/60;return Math.abs(r)<1/6?`${Cs("words.at")} ${e.event} (${e.time})`:`${t[2]}:${t[3]} ${"+"==t[1]?Cs("words.after"):Cs("words.before")} ${Cs("words."+e.event)} (${e.time})`}return`${Cs("words.at")} ${e.time}`}(ti(e.entries[0],["time","event","offset"]))}
        </div>
        <div class="list-item-switch">
          ${e.enabled?T`<ha-switch checked="checked" @click="${t=>this.toggleDisable(e.id,t)}"></ha-switch>`:T`<ha-switch @click="${t=>this.toggleDisable(e.id,t)}"></ha-switch>`}
        </div>
      </div>
      `}):[T`
      <div class="text-field">
        ${Cs("instructions.no_entries_defined")}
      </div>
    `]}toggleDisable(e,t){t.stopPropagation(),!t.target.checked?this._hass.callService("switch","turn_on",{entity_id:e}):this._hass.callService("switch","turn_off",{entity_id:e}),this.awaitUpdate()}editItem(e){let t=Na(this.entries,{id:e});this.selection=Qt(Object.assign({},Is),{editItem:e,entity:t.actions[0].entity,action:t.actions[0].action,timeHours:t.entries[0].time.split(":").shift(),timeMinutes:t.entries[0].time.split(":").pop(),days:t.entries[0].days,daysType:Ws(t.entries[0].days),sun:void 0!==t.entries[0].event}),void 0!==t.actions[0].level&&Object.assign(this.selection,{levelEnabled:!0,level:t.actions[0].level}),this.requestUpdate()}getGroups(){let e=this.Config.GetGroups();return e.length?e.map(e=>T`
        <mwc-button class="${this.selection.group==e.id?" active":""}" @click="${()=>{this.selectGroup(e.id)}}">
          ${e.icon?T`<ha-icon icon="${Ys(e.icon)}" class="padded-right"></ha-icon>`:""}
          ${Zs(e.name)}
        </mwc-button>
      `):[T`<div class="text-field">${Cs("instructions.no_groups_defined")}</div>`]}selectGroup(e){Object.assign(this.selection,{group:e,entity:null,action:null}),this.requestUpdate()}getEntities(){if(!this.selection.group)return[T`<div class="text-field">${Cs("instructions.no_group_selected")}</div>`];let e=this.Config.GetEntitiesForGroup(this.selection.group);return e.length?e.map(e=>T`
        <mwc-button class="${this.selection.entity==e.id?" active":""}" @click="${()=>{this.selectEntity(e.id)}}">
          ${e.icon?T`<ha-icon icon="${Ys(e.icon)}" class="padded-right"></ha-icon>`:""}
          ${Zs(e.name)}
        </mwc-button>
      `):[T`<div class="text-field">${Cs("instructions.no_entities_for_group")}</div>`]}selectEntity(e){Object.assign(this.selection,{entity:e,action:null}),this.requestUpdate()}getActions(){if(!this.selection.entity)return[T`<div class="text-field">${Cs("instructions.no_entity_selected")}</div>`];let e=this.Config.GetActionsForEntity(this.selection.entity);return e.length?e.map(e=>T`
        <mwc-button class="${this.selection.action==e.id?" active":""}" @click="${()=>{this.selectAction(e.id)}}">
          ${e.icon?T`<ha-icon icon="${Ys(e.icon)}" class="padded-right"></ha-icon>`:""}
          ${Zs(e.name)}
        </mwc-button>
      `):[T`<div class="text-field">${Cs("instructions.no_actions_for_entity")}</div>`]}selectAction(e){Object.assign(this.selection,{action:e}),this.requestUpdate()}setConfig(e){!function(e){if(!Go.validate(Ko,e)){let e=Go.errors.map(e=>{let t="",r=e.dataPath.substr(1).split("/"),a=r.pop();return r.length&&(t+=`in '${r.join("->")}' `),"type"==e.keyword&&(t+="type of "),a?a&&(t+=(isNaN(+a)?`'${a}'`:`[item ${a}]`)+" "):t+="card ",t+=e.message,e.params.hasOwnProperty("additionalProperty")&&(t+=` '${e.params.additionalProperty}'`),t.charAt(0).toUpperCase()+t.slice(1)+"."});throw new Error("Invalid configuration provided. "+e.map((e,t)=>`(${t+1}) ${e}`).join(" "))}}(e),this.Config.setUserConfig(e)}showEditor(){let e=this.Config.FindEntity(this.selection.entity),t=this.Config.FindAction(this.selection.entity,this.selection.action);return e&&t?T`
    <div class="card-section first">
      <div class="header">${Cs("fields.action")}</div>
      <div class="summary">
        <div class="summary-entity">
          <div class="summary-icon">
            ${e.icon?T`<ha-icon icon="${Ys(e.icon)}"></ha-icon>`:""}
          </div>
          <div class="summary-text">
            ${Zs(e.name)}
          </div>
        </div>
        <div class="summary-arrow">
          <ha-icon icon="hass:arrow-right"></ha-icon>
        </div>
        <div class="summary-action">
          <div class="summary-icon">
            ${t.icon?T`<ha-icon icon="${Ys(t.icon)}"></ha-icon>`:""}
          </div>
          <div class="summary-text">
            ${Zs(t.name)}
          </div>
        </div>
      </div>
     </div>
     ${t.hasOwnProperty("variable")?this.getLevelPanel(t.variable):""}
    <div class="card-section">
      <div class="header">${Cs("fields.days")}</div>
      <div class="day-list">
        <mwc-button class="day-item${"daily"==this.selection.daysType?" active":""}" index="daily" @click="${e=>this.updateDays(e.target.getAttribute("index"))}">${Cs("fields.day_type_daily")}</mwc-button>
        <mwc-button class="day-item${"weekdays"==this.selection.daysType?" active":""}" index="weekdays" @click="${e=>this.updateDays(e.target.getAttribute("index"))}">${Cs("fields.day_type_weekdays")}</mwc-button>
        <mwc-button class="day-item${"custom"==this.selection.daysType?" active":""}" index="custom" @click="${e=>this.updateDays(e.target.getAttribute("index"))}">${Cs("fields.day_type_custom")}</mwc-button>
      </div>
      <div class="day-list${"custom"==this.selection.daysType?"":" closed"}" id="day-list-custom">
        <mwc-button class="day-item${this.selection.days.includes(1)?" active":""}" index="1" @click="${e=>this.updateDays(e.target.getAttribute("index"))}">${Cs("days_short.mon")}</mwc-button>
        <mwc-button class="day-item${this.selection.days.includes(2)?" active":""}" index="2" @click="${e=>this.updateDays(e.target.getAttribute("index"))}">${Cs("days_short.tue")}</mwc-button>
        <mwc-button class="day-item${this.selection.days.includes(3)?" active":""}" index="3" @click="${e=>this.updateDays(e.target.getAttribute("index"))}">${Cs("days_short.wed")}</mwc-button>
        <mwc-button class="day-item${this.selection.days.includes(4)?" active":""}" index="4" @click="${e=>this.updateDays(e.target.getAttribute("index"))}">${Cs("days_short.thu")}</mwc-button>
        <mwc-button class="day-item${this.selection.days.includes(5)?" active":""}" index="5" @click="${e=>this.updateDays(e.target.getAttribute("index"))}">${Cs("days_short.fri")}</mwc-button>
        <mwc-button class="day-item${this.selection.days.includes(6)?" active":""}" index="6" @click="${e=>this.updateDays(e.target.getAttribute("index"))}">${Cs("days_short.sat")}</mwc-button>
        <mwc-button class="day-item${this.selection.days.includes(7)?" active":""}" index="7" @click="${e=>this.updateDays(e.target.getAttribute("index"))}">${Cs("days_short.sun")}</mwc-button>
      </div>
    </div>
      
    <div class="card-section">
      <div class="header">${Cs("fields.time")}</div>
      <div class="time-picker">
        <div class="time-picker-hours-up">
          <mwc-button @click="${()=>this.updateTime("time-hours-up")}">
            <ha-icon icon="hass:chevron-up"></ha-icon>
          </mwc-button>
        </div>
        <div class="time-picker-hours" id="time-hours">
        ${this.selection.timeHours}
        </div>
        <div class="time-picker-hours-down">
          <mwc-button @click="${()=>this.updateTime("time-hours-down")}">
            <ha-icon icon="hass:chevron-down"></ha-icon>
          </mwc-button>
        </div>
        <div class="time-picker-separator">
        :
        </div>
        <div class="time-picker-minutes-up">
          <mwc-button @click="${()=>this.updateTime("time-minutes-up")}">
            <ha-icon icon="hass:chevron-up"></ha-icon>
          </mwc-button>
        </div>
        <div class="time-picker-minutes" id="time-minutes">
        ${this.selection.timeMinutes}
        </div>
        <div class="time-picker-minutes-down">
          <mwc-button @click="${()=>this.updateTime("time-minutes-down")}">
            <ha-icon icon="hass:chevron-down"></ha-icon>
          </mwc-button>
        </div>
      </div>
    </div>
    <div class="card-section">
      <div class="header">${Cs("fields.options")}</div>
        <div class="option-item">
          ${this.selection.sun?T`<paper-checkbox checked name="option-item-sun" @change="${e=>this.toggleSun(e.target.checked)}">${Cs("fields.shift_with_sun")}</paper-checkbox>`:T`<paper-checkbox name="option-item-sun" @change="${e=>this.toggleSun(e.target)}">${Cs("fields.shift_with_sun")}</paper-checkbox>`}
        </div>
      </div>
    </div>
    <div class="card-section last">
      <mwc-button outlined @click="${()=>this.editItemCancel()}">${Cs("actions.cancel")}</mwc-button>
      ${void 0===this.selection.editItem?"":T`<mwc-button outlined @click="${()=>this.editItemDelete()}">${Cs("actions.delete")}</mwc-button>`}
      <mwc-button outlined @click="${()=>this.editItemSave()}">${Cs("actions.save")}</mwc-button>
    </div>
    `:T``}getLevelPanel(e){let t=e.min,r=e.max,a=e.step,i=e.unit,s=this.selection.level;return e.showPercentage&&(s=Math.round((s-t)/(r-t)*100),a=1,t=0,r=100,i="%"),s<t?s=t:s>r&&(s=r),e.optional||this.selection.levelEnabled||Object.assign(this.selection,{levelEnabled:!0}),T`
    <div class="card-section">
      <div class="header">${e.name}</div>
      <div class="option-item">
        ${e.optional?this.selection.levelEnabled?T`<paper-checkbox checked @change="${this._toggleEnableLevel}"></paper-checkbox>`:T`<paper-checkbox @change="${this._toggleEnableLevel}"></paper-checkbox>`:""}
        ${this.selection.levelEnabled?T`<ha-paper-slider id="level" pin min=${t} max=${r} step=${a} value=${s} @change=${this._updateLevel}></ha-paper-slider>`:T`<ha-paper-slider id="level" pin min=${t} max=${r} step=${a} value=${s} @change=${this._updateLevel} disabled></ha-paper-slider>`}
        <div id="level-value" class="${this.selection.levelEnabled?"":"disabled"}">${s}${i}</div>
      </div>
     </div>`}_toggleEnableLevel(e){let t=e.target.checked;this.shadowRoot.querySelector("#level").disabled=!t,this.selection.levelEnabled=t,t?this.shadowRoot.querySelector("#level-value").classList.remove("disabled"):this.shadowRoot.querySelector("#level-value").classList.add("disabled")}_updateLevel(e){let t=this.Config.FindAction(this.selection.entity,this.selection.action).variable;if(!t)return;let r=t.min,a=t.max,i=t.unit;t.showPercentage&&(i="%");let s=Number(e.target.value);this.shadowRoot.querySelector("#level-value").innerHTML=`${s}${i}`,t.showPercentage&&(s=Math.round(s/100*(a-r)+r),i="%"),s<r?s=r:s>a&&(s=a),this.selection.level=s}updateDays(e){var t=Array("daily","weekdays","custom");t.includes(e)?this.selection.daysType=e:(this.selection.days.includes(Number(e))?ii(this.selection.days,Number(e)):this.selection.days.push(Number(e)),this.selection.daysType="custom"),this.shadowRoot.querySelectorAll(".day-item").forEach(e=>{let r=String(e.getAttribute("index"));t.includes(r)?this.selection.daysType==r?e.classList.add("active"):e.classList.remove("active"):this.selection.days.includes(Number(r))?e.classList.add("active"):e.classList.remove("active")}),"custom"==this.selection.daysType?this.shadowRoot.querySelector("#day-list-custom").classList.remove("closed"):this.shadowRoot.querySelector("#day-list-custom").classList.add("closed")}updateTime(e){let t=Number(this.selection.timeHours),r=Number(this.selection.timeMinutes);"time-hours-up"==e?t++:"time-hours-down"==e?t--:"time-minutes-up"==e?r+=10:"time-minutes-down"==e&&(r-=10),t<0?t=23:t>23?t=0:r<0?r=50:r>50&&(r=0);let a=String(t).padStart(2,"0"),i=String(r).padStart(2,"0");this.shadowRoot.querySelector("#time-hours").innerHTML=a,this.shadowRoot.querySelector("#time-minutes").innerHTML=i,this.selection.timeHours=a,this.selection.timeMinutes=i}editItemSave(){var e=function(e,t){let r=t.FindAction(e.entity,e.action),a=ti(r,["service","service_data"]);if(Object.assign(a,{entity:e.entity}),Gs(a.service)||(a.service=Gs(a.entity)+"."+a.service),e.hasOwnProperty("levelEnabled")&&e.levelEnabled){let t=r.variable.field,i=e.level,s=a.hasOwnProperty("service_data")?a.service_data:{};Object.assign(a,{service_data:Object.assign(s,{[t]:i})})}let i={actions:[0]};if(e.sun){if(t.next_sunrise&&t.next_sunset){let r,a=Number(e.timeHours)+Number(e.timeMinutes)/60,s=t.next_sunrise.getHours()+t.next_sunrise.getMinutes()/60,n=t.next_sunset.getHours()+t.next_sunset.getMinutes()/60;Math.abs(a-s)<Math.abs(a-n)?(Object.assign(i,{event:"sunrise"}),r=a-s):(Object.assign(i,{event:"sunset"}),r=a-n);let o=r>0?Math.abs(Math.floor(r)):Math.abs(Math.ceil(r)),c=r>0?Math.round(60*(r-o)):-Math.round(60*(r+o));Object.assign(i,{offset:`${r>0?"+":"-"}${String(o).padStart(2,"0")}:${String(c).padStart(2,"0")}`})}}else Object.assign(i,{time:e.timeHours+":"+e.timeMinutes});return"weekdays"==e.daysType?Object.assign(i,{days:[1,2,3,4,5]}):"custom"==e.daysType&&Object.assign(i,{days:e.days.sort().filter(e=>0!=e)}),{actions:[a],entries:[i]}}(this.selection,this.Config);this.selection.newItem?this._hass.callService("scheduler","add",e):this.selection.editItem&&this._hass.callService("scheduler","edit",Object.assign(e,{entity_id:this.selection.editItem})),this.selection=Object.assign({},Is),this.awaitUpdate()}editItemDelete(){let e=this.selection.editItem;this._hass.callService("scheduler","remove",{entity_id:e}),this.selection=Object.assign({},Is),this.awaitUpdate()}toggleSun(e){this.selection.sun=e}},t([(e,t)=>void 0!==t?((e,t,r)=>{t.constructor.createProperty(r,e)})(Jo,e,t):J(Jo,e)],e.SchedulerCard.prototype,"_hass",void 0),e.SchedulerCard=t([(Wo="scheduler-card",e=>"function"==typeof e?((e,t)=>(window.customElements.define(e,t),t))(Wo,e):((e,t)=>{const{kind:r,elements:a}=t;return{kind:r,elements:a,finisher(t){window.customElements.define(e,t)}}})(Wo,e))],e.SchedulerCard)}({});
